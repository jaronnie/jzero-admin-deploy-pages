import{A as He,m as Je,a as Xe,e as Qe,G as Ze,_ as ea,b as aa,c as ta,d as na,u as la,f as oa,g as ra,h as sa,i as ua,N as ia,j as ca,k as da,l as pa}from"./business-zKE6o0Mm.js";import{d as J,a1 as h,L as E,M as Ve,K as L,N as W,O as re,U as Be,ag as ma,a8 as Se,ah as ga,a6 as Me,ai as fa,aj as va,ak as ha,al as ya,am as ba,aa as _a,ab as ke,v as ce,an as Pa,r as ne,a9 as ue,ao as Ia,V as Le,a as z,Y as ka,ap as Ta,B as q,aq as $e,ar as Ce,as as fe,at as ve,au as Ra,av as le,aw as De,ax as Na,ay as he,az as wa,ae as Oa,o as w,b as oe,e as je,aA as R,aB as Ae,aC as Va,$ as l,p as $a,f as a,_ as Ie,aD as xe,c as M,w as i,g as Ee,t as Ue,h as r,a3 as ye,a4 as be,aE as Z,aF as Ca,aG as Da,aH as Aa,aI as xa,A as Ea,aJ as Ua,aK as _e,a5 as Pe,J as Ba,aL as Sa}from"./index-Cvi-sYie.js";import{u as Ma,a as La,b as ja}from"./form-D5_31G_i.js";import{_ as Ka}from"./Space-BsCYa8iE.js";import{a as Fa}from"./Grid-Cu3XDYzp.js";const za=J({name:"ArrowUp",render(){return h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},h("g",{fill:"none"},h("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),_="0!important",Ke="-1px!important";function ee(t){return W(`${t}-type`,[L("& +",[E("button",{},[W(`${t}-type`,[re("border",{borderLeftWidth:_}),re("state-border",{left:Ke})])])])])}function ae(t){return W(`${t}-type`,[L("& +",[E("button",[W(`${t}-type`,[re("border",{borderTopWidth:_}),re("state-border",{top:Ke})])])])])}const qa=E("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Ve("vertical",{flexDirection:"row"},[Ve("rtl",[E("button",[L("&:first-child:not(:last-child)",`
 margin-right: ${_};
 border-top-right-radius: ${_};
 border-bottom-right-radius: ${_};
 `),L("&:last-child:not(:first-child)",`
 margin-left: ${_};
 border-top-left-radius: ${_};
 border-bottom-left-radius: ${_};
 `),L("&:not(:first-child):not(:last-child)",`
 margin-left: ${_};
 margin-right: ${_};
 border-radius: ${_};
 `),ee("default"),W("ghost",[ee("primary"),ee("info"),ee("success"),ee("warning"),ee("error")])])])]),W("vertical",{flexDirection:"column"},[E("button",[L("&:first-child:not(:last-child)",`
 margin-bottom: ${_};
 margin-left: ${_};
 margin-right: ${_};
 border-bottom-left-radius: ${_};
 border-bottom-right-radius: ${_};
 `),L("&:last-child:not(:first-child)",`
 margin-top: ${_};
 margin-left: ${_};
 margin-right: ${_};
 border-top-left-radius: ${_};
 border-top-right-radius: ${_};
 `),L("&:not(:first-child):not(:last-child)",`
 margin: ${_};
 border-radius: ${_};
 `),ae("default"),W("ghost",[ae("primary"),ae("info"),ae("success"),ae("warning"),ae("error")])])])]),Ga={size:{type:String,default:void 0},vertical:Boolean},Wa=J({name:"ButtonGroup",props:Ga,setup(t){const{mergedClsPrefixRef:g,mergedRtlRef:m}=Be(t);return ma("-button-group",qa,g),Se(ga,t),{rtlEnabled:Me("ButtonGroup",m,g),mergedClsPrefix:g}},render(){const{mergedClsPrefix:t}=this;return h("div",{class:[`${t}-button-group`,this.rtlEnabled&&`${t}-button-group--rtl`,this.vertical&&`${t}-button-group--vertical`],role:"group"},this.$slots)}});function Ya(){return ba}const Ha=fa({name:"DynamicInput",common:va,peers:{Input:ha,Button:ya},self:Ya}),Te=_a("n-dynamic-input"),Ja=J({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:t,placeholderRef:g}=ke(Te);return{mergedTheme:t,placeholder:g}},render(){const{mergedTheme:t,placeholder:g,value:m,clsPrefix:p,onUpdateValue:v,disabled:V}=this;return h("div",{class:`${p}-dynamic-input-preset-input`},h(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:m,placeholder:g,onUpdateValue:v,disabled:V}))}}),Xa=J({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(t){const{mergedThemeRef:g,keyPlaceholderRef:m,valuePlaceholderRef:p}=ke(Te);return{mergedTheme:g,keyPlaceholder:m,valuePlaceholder:p,handleKeyInput(v){t.onUpdateValue({key:v,value:t.value.value})},handleValueInput(v){t.onUpdateValue({key:t.value.key,value:v})}}},render(){const{mergedTheme:t,keyPlaceholder:g,valuePlaceholder:m,value:p,clsPrefix:v,disabled:V}=this;return h("div",{class:`${v}-dynamic-input-preset-pair`},h(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:p.key,class:`${v}-dynamic-input-pair-input`,placeholder:g,onUpdateValue:this.handleKeyInput,disabled:V}),h(ce,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:p.value,class:`${v}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleValueInput,disabled:V}))}}),Qa=E("dynamic-input",{width:"100%"},[E("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[E("dynamic-input-preset-input",{flex:1,alignItems:"center"}),E("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[E("dynamic-input-pair-input",[L("&:first-child",{"margin-right":"12px"})])]),re("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[W("icon",{cursor:"pointer"})]),L("&:last-child",{marginBottom:0})]),E("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[E("form-item-blank",{paddingTop:"0 !important"})])]),ie=new WeakMap,Za=Object.assign(Object.assign({},Le.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),et=J({name:"DynamicInput",props:Za,setup(t,{slots:g}){const{mergedComponentPropsRef:m,mergedClsPrefixRef:p,mergedRtlRef:v,inlineThemeDisabled:V}=Be(),T=ke(Pa,null),$=ne(t.defaultValue),U=ue(t,"value"),O=Ia(U,$),e=Le("DynamicInput","-dynamic-input",Qa,Ha,t,p),I=z(()=>{const{value:n}=O;if(Array.isArray(n)){const{max:u}=t;return u!==void 0&&n.length>=u}return!1}),A=z(()=>{const{value:n}=O;return Array.isArray(n)?n.length<=t.min:!0}),G=z(()=>{var n,u;return(u=(n=m==null?void 0:m.value)===null||n===void 0?void 0:n.DynamicInput)===null||u===void 0?void 0:u.buttonSize});function C(n){const{onInput:u,"onUpdate:value":c,onUpdateValue:d}=t;u&&he(u,n),c&&he(c,n),d&&he(d,n),$.value=n}function B(n,u){if(n==null||typeof n!="object")return u;const c=fe(n)?ve(n):n;let d=ie.get(c);return d===void 0&&ie.set(c,d=Ra()),d}function j(n,u){const{value:c}=O,d=Array.from(c??[]),f=d[n];if(d[n]=u,f&&u&&typeof f=="object"&&typeof u=="object"){const s=fe(f)?ve(f):f,P=fe(u)?ve(u):u,k=ie.get(s);k!==void 0&&ie.set(P,k)}C(d)}function K(){N(-1)}function N(n){const{value:u}=O,{onCreate:c}=t,d=Array.from(u??[]);if(c)d.splice(n+1,0,c(n+1)),C(d);else if(g.default)d.splice(n+1,0,null),C(d);else switch(t.preset){case"input":d.splice(n+1,0,""),C(d);break;case"pair":d.splice(n+1,0,{key:"",value:""}),C(d);break}}function x(n){const{value:u}=O;if(!Array.isArray(u))return;const{min:c}=t;if(u.length<=c)return;const{onRemove:d}=t;d&&d(n);const f=Array.from(u);f.splice(n,1),C(f)}function y(n,u,c){if(u<0||c<0||u>=n.length||c>=n.length||u===c)return;const d=n[u];n[u]=n[c],n[c]=d}function F(n,u){const{value:c}=O;if(!Array.isArray(c))return;const d=Array.from(c);n==="up"&&y(d,u,u-1),n==="down"&&y(d,u,u+1),C(d)}Se(Te,{mergedThemeRef:e,keyPlaceholderRef:ue(t,"keyPlaceholder"),valuePlaceholderRef:ue(t,"valuePlaceholder"),placeholderRef:ue(t,"placeholder")});const X=Me("DynamicInput",v,p),Y=z(()=>{const{self:{actionMargin:n,actionMarginRtl:u}}=e.value;return{"--action-margin":n,"--action-margin-rtl":u}}),S=V?ka("dynamic-input",void 0,Y,t):void 0;return{locale:Ta("DynamicInput").localeRef,rtlEnabled:X,buttonSize:G,mergedClsPrefix:p,NFormItem:T,uncontrolledValue:$,mergedValue:O,insertionDisabled:I,removeDisabled:A,handleCreateClick:K,ensureKey:B,handleValueChange:j,remove:x,move:F,createItem:N,mergedTheme:e,cssVars:V?void 0:Y,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){const{$slots:t,itemClass:g,buttonSize:m,mergedClsPrefix:p,mergedValue:v,locale:V,mergedTheme:T,keyField:$,itemStyle:U,preset:O,showSortButton:e,NFormItem:I,ensureKey:A,handleValueChange:G,remove:C,createItem:B,move:j,onRender:K,disabled:N}=this;return K==null||K(),h("div",{class:[`${p}-dynamic-input`,this.rtlEnabled&&`${p}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(v)||v.length===0?h(q,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled||N,theme:T.peers.Button,themeOverrides:T.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>$e(t["create-button-default"],()=>[V.create]),icon:()=>$e(t["create-button-icon"],()=>[h(le,{clsPrefix:p},{default:()=>h(De,null)})])}):v.map((x,y)=>h("div",{key:$?x[$]:A(x,y),"data-key":$?x[$]:A(x,y),class:[`${p}-dynamic-input-item`,g],style:U},Ce(t.default,{value:v[y],index:y},()=>[O==="input"?h(Ja,{disabled:N,clsPrefix:p,value:v[y],parentPath:I?I.path.value:void 0,path:I!=null&&I.path.value?`${I.path.value}[${y}]`:void 0,onUpdateValue:F=>{G(y,F)}}):O==="pair"?h(Xa,{disabled:N,clsPrefix:p,value:v[y],parentPath:I?I.path.value:void 0,path:I!=null&&I.path.value?`${I.path.value}[${y}]`:void 0,onUpdateValue:F=>{G(y,F)}}):null]),Ce(t.action,{value:v[y],index:y,create:B,remove:C,move:j},()=>[h("div",{class:`${p}-dynamic-input-item__action`},h(Wa,{size:m},{default:()=>[h(q,{disabled:this.removeDisabled||N,theme:T.peers.Button,themeOverrides:T.peerOverrides.Button,circle:!0,onClick:()=>{C(y)}},{icon:()=>h(le,{clsPrefix:p},{default:()=>h(Na,null)})}),h(q,{disabled:this.insertionDisabled||N,circle:!0,theme:T.peers.Button,themeOverrides:T.peerOverrides.Button,onClick:()=>{B(y)}},{icon:()=>h(le,{clsPrefix:p},{default:()=>h(De,null)})}),e?h(q,{disabled:y===0||N,circle:!0,theme:T.peers.Button,themeOverrides:T.peerOverrides.Button,onClick:()=>{j("up",y)}},{icon:()=>h(le,{clsPrefix:p},{default:()=>h(za,null)})}):null,e?h(q,{disabled:y===v.length-1||N,circle:!0,theme:T.peers.Button,themeOverrides:T.peerOverrides.Button,onClick:()=>{j("down",y)}},{icon:()=>h(le,{clsPrefix:p},{default:()=>h(He,null)})}):null]}))]))))}}),Fe={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};wa(Fe);const at={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function tt(t,g){return w(),oe("svg",at,g[0]||(g[0]=[je("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}const nt=Oa({name:"ic-round-remove",render:tt});function lt(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>R(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>R(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>R(()=>import("./avatar-CQqEtg-V.js"),[]),"/src/assets/svg-icon/banner.svg":()=>R(()=>import("./banner-CFFAqDOx.js"),[]),"/src/assets/svg-icon/cast.svg":()=>R(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>R(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>R(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>R(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>R(()=>import("./empty-data-Df-AtTS4.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>R(()=>import("./expectation-BuEJD7SN.js"),[]),"/src/assets/svg-icon/heart.svg":()=>R(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>R(()=>import("./logo-BeLY4cv9.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>R(()=>import("./network-error-DDJxZniG.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>R(()=>import("./no-icon-lf9QfDPR.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>R(()=>import("./no-permission-CgHwmHj5.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>R(()=>import("./not-found-qgwLoIvx.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>R(()=>import("./service-error-BlNULCLM.js"),[]),"/src/assets/svg-icon/wind.svg":()=>R(()=>import("./wind-Dy5zdHKW.js"),[])})).map(m=>{var p;return((p=m.split("/").at(-1))==null?void 0:p.replace(".svg",""))||""}).filter(Boolean)}const de="layout.",pe="view.",ze="$";function ot(t){let g="",m="";const[p="",v=""]=(t==null?void 0:t.split(ze))||[];return g=rt(p),m=st(v||p),{layout:g,page:m}}function rt(t){return t.startsWith(de)?t.replace(de,""):""}function st(t){return t.startsWith(pe)?t.replace(pe,""):""}function ut(t,g){const m=!!t,p=!!g;return m&&p?`${de}${t}${ze}${pe}${g}`:m?`${de}${t}`:p?`${pe}${g}`:""}function it(t){return`/${t.replace(/_/g,"/")}`}function ct(t){const[g,m=""]=t.split("/:");return{path:g,param:m}}function dt(t,g){return g.trim()?`${t}/:${g}`:t}const pt={class:"ml-8px flex-y-center flex-1 gap-12px"},mt=J({name:"MenuOperateModal",__name:"menu-operate-modal",props:Ae({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Ae(["submitted"],["update:visible"]),setup(t,{emit:g}){const m=t,p=g,v=Va(t,"visible"),{formRef:V,validate:T,restoreValidation:$}=Ma(),{defaultRequiredRule:U}=La(),O=z(()=>({add:l("page.manage.menu.addMenu"),addChild:l("page.manage.menu.addChildMenu"),edit:l("page.manage.menu.editMenu")})[m.operateType]),e=$a(I());function I(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const A={menuName:U,status:U,routeName:U,routePath:U},G=z(()=>m.operateType==="edit"),B=lt().map(f=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(Ie,{localIcon:f,class:"text-icon"},null),a("span",null,[f])]),value:f})),j=z(()=>e.parentId===0),K=z(()=>e.menuType==="2"),N=z(()=>{const f=[...m.allPages];return e.routeName&&!f.includes(e.routeName)&&f.unshift(e.routeName),f.map(P=>({label:P,value:P}))}),x=[{label:"base",value:"base"},{label:"blank",value:"blank"}],y=ne([]);async function F(){const{error:f,data:s}=await Ze();if(!f){const P=s.map(k=>({label:k.roleName,value:k.roleCode}));y.value=[...P]}}function X(){if(Object.assign(e,I()),!!m.rowData){if(m.operateType==="addChild"){const{id:f}=m.rowData;Object.assign(e,{parentId:f})}if(m.operateType==="edit"){const{component:f,...s}=m.rowData,{layout:P,page:k}=ot(f),{path:b,param:D}=ct(s.routePath);Object.assign(e,s,{layout:P,page:k,routePath:b,pathParam:D})}e.query||(e.query=[]),e.buttons||(e.buttons=[])}}function Y(){v.value=!1}function S(){e.routeName?e.routePath=it(e.routeName):e.routePath=""}function n(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function u(){return{code:"",desc:""}}function c(){const{layout:f,page:s,pathParam:P,...k}=e,b=ut(f,s),D=dt(e.routePath,P);return k.component=b,k.routePath=D,k}async function d(){var s;await T();const f=c();console.log("params: ",f),(s=window.$message)==null||s.success(l("common.updateSuccess")),Y(),p("submitted")}return xe(v,()=>{v.value&&(X(),$(),F())}),xe(()=>e.routeName,()=>{S(),n()}),(f,s)=>{const P=ea,k=aa,b=ta,D=ce,se=Ca,Re=Da,Ne=na,Q=q,we=nt,me=Ka,Oe=et,qe=Fa,Ge=ja,We=Aa,Ye=xa;return w(),M(Ye,{show:v.value,"onUpdate:show":s[22]||(s[22]=o=>v.value=o),title:O.value,preset:"card",class:"w-800px"},{footer:i(()=>[a(me,{justify:"end",size:16},{default:i(()=>[a(Q,{onClick:Y},{default:i(()=>[Ee(Ue(r(l)("common.cancel")),1)]),_:1}),a(Q,{type:"primary",onClick:d},{default:i(()=>[Ee(Ue(r(l)("common.confirm")),1)]),_:1})]),_:1})]),default:i(()=>[a(We,{class:"h-480px pr-20px"},{default:i(()=>[a(Ge,{ref_key:"formRef",ref:V,model:e,rules:A,"label-placement":"left","label-width":100},{default:i(()=>[a(qe,{responsive:"screen","item-responsive":""},{default:i(()=>[a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuType"),path:"menuType"},{default:i(()=>[a(k,{value:e.menuType,"onUpdate:value":s[0]||(s[0]=o=>e.menuType=o),disabled:G.value},{default:i(()=>[(w(!0),oe(be,null,ye(r(Je),o=>(w(),M(P,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuName"),path:"menuName"},{default:i(()=>[a(D,{value:e.menuName,"onUpdate:value":s[1]||(s[1]=o=>e.menuName=o),placeholder:r(l)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.routeName"),path:"routeName"},{default:i(()=>[a(D,{value:e.routeName,"onUpdate:value":s[2]||(s[2]=o=>e.routeName=o),placeholder:r(l)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.routePath"),path:"routePath"},{default:i(()=>[a(D,{value:e.routePath,"onUpdate:value":s[3]||(s[3]=o=>e.routePath=o),disabled:"",placeholder:r(l)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.pathParam"),path:"pathParam"},{default:i(()=>[a(D,{value:e.pathParam,"onUpdate:value":s[4]||(s[4]=o=>e.pathParam=o),placeholder:r(l)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),j.value?(w(),M(b,{key:0,span:"24 m:12",label:r(l)("page.manage.menu.layout"),path:"layout"},{default:i(()=>[a(se,{value:e.layout,"onUpdate:value":s[5]||(s[5]=o=>e.layout=o),options:x,placeholder:r(l)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):Z("",!0),K.value?(w(),M(b,{key:1,span:"24 m:12",label:r(l)("page.manage.menu.page"),path:"page"},{default:i(()=>[a(se,{value:e.page,"onUpdate:value":s[6]||(s[6]=o=>e.page=o),options:N.value,placeholder:r(l)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:i(()=>[a(D,{value:e.i18nKey,"onUpdate:value":s[7]||(s[7]=o=>e.i18nKey=o),placeholder:r(l)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.order"),path:"order"},{default:i(()=>[a(Re,{value:e.order,"onUpdate:value":s[8]||(s[8]=o=>e.order=o),class:"w-full",placeholder:r(l)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:i(()=>[a(k,{value:e.iconType,"onUpdate:value":s[9]||(s[9]=o=>e.iconType=o)},{default:i(()=>[(w(!0),oe(be,null,ye(r(Xe),o=>(w(),M(P,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.icon"),path:"icon"},{default:i(()=>[e.iconType==="1"?(w(),M(D,{key:0,value:e.icon,"onUpdate:value":s[10]||(s[10]=o=>e.icon=o),placeholder:r(l)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:i(()=>[e.icon?(w(),M(Ie,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):Z("",!0)]),_:1},8,["value","placeholder"])):Z("",!0),e.iconType==="2"?(w(),M(se,{key:1,value:e.icon,"onUpdate:value":s[11]||(s[11]=o=>e.icon=o),placeholder:r(l)("page.manage.menu.form.localIcon"),options:r(B)},null,8,["value","placeholder","options"])):Z("",!0)]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuStatus"),path:"status"},{default:i(()=>[a(k,{value:e.status,"onUpdate:value":s[12]||(s[12]=o=>e.status=o)},{default:i(()=>[(w(!0),oe(be,null,ye(r(Qe),o=>(w(),M(P,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:i(()=>[a(k,{value:e.keepAlive,"onUpdate:value":s[13]||(s[13]=o=>e.keepAlive=o)},{default:i(()=>[a(P,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(P,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.constant"),path:"constant"},{default:i(()=>[a(k,{value:e.constant,"onUpdate:value":s[14]||(s[14]=o=>e.constant=o)},{default:i(()=>[a(P,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(P,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.href"),path:"href"},{default:i(()=>[a(D,{value:e.href,"onUpdate:value":s[15]||(s[15]=o=>e.href=o),placeholder:r(l)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:i(()=>[a(k,{value:e.hideInMenu,"onUpdate:value":s[16]||(s[16]=o=>e.hideInMenu=o)},{default:i(()=>[a(P,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(P,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.hideInMenu?(w(),M(b,{key:2,span:"24 m:12",label:r(l)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:i(()=>[a(se,{value:e.activeMenu,"onUpdate:value":s[17]||(s[17]=o=>e.activeMenu=o),options:N.value,clearable:"",placeholder:r(l)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.multiTab"),path:"multiTab"},{default:i(()=>[a(k,{value:e.multiTab,"onUpdate:value":s[18]||(s[18]=o=>e.multiTab=o)},{default:i(()=>[a(P,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(P,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:i(()=>[a(Re,{value:e.fixedIndexInTab,"onUpdate:value":s[19]||(s[19]=o=>e.fixedIndexInTab=o),class:"w-full",clearable:"",placeholder:r(l)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:r(l)("page.manage.menu.query")},{default:i(()=>[a(Oe,{value:e.query,"onUpdate:value":s[20]||(s[20]=o=>e.query=o),preset:"pair","key-placeholder":r(l)("page.manage.menu.form.queryKey"),"value-placeholder":r(l)("page.manage.menu.form.queryValue")},{action:i(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:i(()=>[a(Q,{size:"medium",onClick:()=>H(o)},{default:i(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Q,{size:"medium",onClick:()=>ge(o)},{default:i(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:r(l)("page.manage.menu.button")},{default:i(()=>[a(Oe,{value:e.buttons,"onUpdate:value":s[21]||(s[21]=o=>e.buttons=o),"on-create":u},{default:i(({value:o})=>[je("div",pt,[a(D,{value:o.code,"onUpdate:value":H=>o.code=H,placeholder:r(l)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(D,{value:o.desc,"onUpdate:value":H=>o.desc=H,placeholder:r(l)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:i(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:i(()=>[a(Q,{size:"medium",onClick:()=>H(o)},{default:i(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Q,{size:"medium",onClick:()=>ge(o)},{default:i(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function te(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Sa(t)}const bt=J({name:"manage_menu",__name:"index",setup(t){const g=Ea(),{bool:m,setTrue:p}=Ua(),v=ne(null),{columns:V,columnChecks:T,data:$,loading:U,pagination:O,getData:e,getDataByPage:I}=la({apiFn:ra,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:l("page.manage.menu.id"),align:"center"},{key:"menuType",title:l("page.manage.menu.menuType"),align:"center",width:80,render:n=>{const u={1:"default",2:"primary"},c=l(sa[n.menuType]);return a(Pe,{type:u[n.menuType]},te(c)?c:{default:()=>[c]})}},{key:"menuName",title:l("page.manage.menu.menuName"),align:"center",minWidth:120,render:n=>{const{i18nKey:u,menuName:c}=n,d=u?l(u):c;return a("span",null,[d])}},{key:"icon",title:l("page.manage.menu.icon"),align:"center",width:60,render:n=>{const u=n.iconType==="1"?n.icon:void 0,c=n.iconType==="2"?n.icon:void 0;return a("div",{class:"flex-center"},[a(Ie,{icon:u,localIcon:c,class:"text-icon"},null)])}},{key:"routeName",title:l("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:l("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:l("page.manage.menu.menuStatus"),align:"center",width:80,render:n=>{if(n.status===null)return null;const u={1:"success",2:"warning"},c=l(ua[n.status]);return a(Pe,{type:u[n.status]},te(c)?c:{default:()=>[c]})}},{key:"hideInMenu",title:l("page.manage.menu.hideInMenu"),align:"center",width:80,render:n=>{const u=n.hideInMenu?"Y":"N",c={Y:"error",N:"default"},d=l(Fe[u]);return a(Pe,{type:c[u]},te(d)?d:{default:()=>[d]})}},{key:"parentId",title:l("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:l("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:l("common.operate"),align:"center",width:230,render:n=>{let u,c;return a("div",{class:"flex-center justify-end gap-8px"},[n.menuType==="1"&&a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>F(n)},te(u=l("page.manage.menu.addChildMenu"))?u:{default:()=>[u]}),a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>y(n)},te(c=l("common.edit"))?c:{default:()=>[c]}),a(ia,{onPositiveClick:()=>N(n.id)},{default:()=>l("common.confirmDelete"),trigger:()=>{let d;return a(q,{type:"error",ghost:!0,size:"small"},te(d=l("common.delete"))?d:{default:()=>[d]})}})])}}]}),{checkedRowKeys:A,onBatchDeleted:G,onDeleted:C}=oa($,e),B=ne("add");function j(){B.value="add",p()}async function K(){console.log(A.value),G()}function N(n){console.log(n),C()}const x=ne(null);function y(n){B.value="edit",x.value={...n},p()}function F(n){B.value="addChild",x.value={...n},p()}const X=ne([]);async function Y(){const{data:n}=await pa();X.value=n||[]}function S(){Y()}return S(),(n,u)=>{const c=ca,d=da,f=Ba;return w(),oe("div",{ref_key:"wrapperRef",ref:v,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(f,{title:r(l)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":i(()=>[a(c,{columns:r(T),"onUpdate:columns":u[0]||(u[0]=s=>_e(T)?T.value=s:null),"disabled-delete":r(A).length===0,loading:r(U),onAdd:j,onDelete:K,onRefresh:r(e)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:i(()=>[a(d,{"checked-row-keys":r(A),"onUpdate:checkedRowKeys":u[1]||(u[1]=s=>_e(A)?A.value=s:null),columns:r(V),data:r($),size:"small","flex-height":!r(g).isMobile,"scroll-x":1088,loading:r(U),"row-key":s=>s.id,remote:"",pagination:r(O),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(mt,{visible:r(m),"onUpdate:visible":u[2]||(u[2]=s=>_e(m)?m.value=s:null),"operate-type":B.value,"row-data":x.value,"all-pages":X.value,onSubmitted:r(I)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{bt as default};
