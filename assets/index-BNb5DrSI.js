import{S as mt,n as bt,o as yt,p as pt,e as Ln,q as kt,r as xt,c as wt,_ as _t,d as Nt,u as Rt,g as Ct,s as St,j as Dt,N as Kt,t as xn,k as Tt,l as Lt}from"./business-DZoGW-bm.js";import{d as ue,a1 as S,aa as An,ab as Te,aM as At,aN as Pt,av as Et,x as Ft,r as W,aO as dn,a as j,aP as Ot,aQ as ee,i as Bt,a2 as It,aR as Ge,aS as Pn,aT as $t,L as z,K as ce,N as H,aU as wn,O as Se,M as De,aV as Mt,U as Ut,a6 as zt,V as En,aW as jt,aX as _n,aY as Oe,a9 as $,ao as We,aD as Ke,aZ as Ye,a_ as Be,a$ as Nn,b0 as Ht,ay as te,a8 as Vt,b1 as sn,Y as qt,aq as Rn,b2 as Gt,b3 as Cn,b4 as Sn,aB as Je,aC as fn,$ as C,b5 as Xe,o as ye,c as $e,w as L,f as _,g as pe,t as me,h as p,e as Dn,aG as Fn,B as Me,aI as Wt,aJ as Yt,y as Xt,p as On,b as Bn,a3 as Jt,a4 as Qt,aK as Ie,aE as Zt,v as In,b6 as el,b7 as nl,b8 as tl,J as $n,A as ll,a5 as al,aL as ol}from"./index-OtHHdiCY.js";import{u as il,a as rl,_ as dl,b as Mn}from"./form-E0yYq8X_.js";import{_ as hn}from"./Space-KVZJLs9R.js";import{_ as sl,a as cl,b as ul,c as fl}from"./round-refresh-CUzqPBXd.js";import{a as hl}from"./Grid-CaGaDUYg.js";function Un(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const gl=ue({name:"Switcher",render(){return S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S("path",{d:"M12 8l10 8l-10 8z"}))}}),zn=An("n-tree-select"),Ue=An("n-tree"),vl=ue({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Te(Ue,null);return()=>{const{clsPrefix:a,expanded:s,hide:d,indent:r,onClick:N}=e;return S("span",{"data-switcher":!0,class:[`${a}-tree-node-switcher`,s&&`${a}-tree-node-switcher--expanded`,d&&`${a}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:N},S("div",{class:`${a}-tree-node-switcher__icon`},S(At,null,{default:()=>{if(e.loading)return S(Pt,{clsPrefix:a,key:"loading",radius:85,strokeWidth:20});const{value:v}=t;return v?v({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):S(Et,{clsPrefix:a,key:"switcher"},{default:()=>S(gl,null)})}})))}}}),ml=ue({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Te(Ue);function a(d){const{onCheck:r}=e;r&&r(d)}function s(d){a(d)}return{handleUpdateValue:s,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:a,indeterminate:s,disabled:d,focusable:r,indent:N,handleUpdateValue:v}=this;return S("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${N}px`},"data-checkbox":!0},S(Ft,{focusable:r,disabled:d,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:a,indeterminate:s,onUpdateChecked:v}))}}),bl=ue({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:a,renderSuffixRef:s,labelFieldRef:d}=Te(Ue),r=W(null);function N(m){const{onClick:k}=e;k&&k(m)}function v(m){N(m)}return{selfRef:r,renderLabel:t,renderPrefix:a,renderSuffix:s,labelField:d,handleClick:v}},render(){const{clsPrefix:e,labelField:t,nodeProps:a,checked:s=!1,selected:d=!1,renderLabel:r,renderPrefix:N,renderSuffix:v,handleClick:m,onDragstart:k,tmNode:{rawNode:b,rawNode:{prefix:P,suffix:x,[t]:K}}}=this;return S("span",Object.assign({},a,{ref:"selfRef",class:[`${e}-tree-node-content`,a==null?void 0:a.class],onClick:m,draggable:k===void 0?void 0:!0,onDragstart:k}),N||P?S("div",{class:`${e}-tree-node-content__prefix`},N?N({option:b,selected:d,checked:s}):dn(P)):null,S("div",{class:`${e}-tree-node-content__text`},r?r({option:b,selected:d,checked:s}):dn(K)),v||x?S("div",{class:`${e}-tree-node-content__suffix`},v?v({option:b,selected:d,checked:s}):dn(x)):null)}});function Kn({position:e,offsetLevel:t,indent:a,el:s}){const d={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")d.left=0,d.top=0,d.bottom=0,d.borderRadius="inherit",d.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";d[r]=0,d.left=`${s.offsetLeft+6-t*a}px`,d.height="2px",d.backgroundColor="var(--n-drop-mark-color)",d.transformOrigin=r,d.borderRadius="1px",d.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return S("div",{style:d})}function yl({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function pl(e){return j(()=>e.leafOnly?"child":e.checkStrategy)}function ve(e,t){return!!e.rawNode[t]}function jn(e,t,a,s){e==null||e.forEach(d=>{a(d),jn(d[t],t,a,s),s(d)})}function kl(e,t,a,s,d){const r=new Set,N=new Set,v=[];return jn(e,s,m=>{if(v.push(m),d(t,m)){N.add(m[a]);for(let k=v.length-2;k>=0;--k)if(!r.has(v[k][a]))r.add(v[k][a]);else return}},()=>{v.pop()}),{expandedKeys:Array.from(r),highlightKeySet:N}}if(Ot&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function xl(e,t,a,s,d){const r=new Set,N=new Set,v=new Set,m=[],k=[],b=[];function P(K){K.forEach(D=>{if(b.push(D),t(a,D)){r.add(D[s]),v.add(D[s]);for(let g=b.length-2;g>=0;--g){const i=b[g][s];if(!N.has(i))N.add(i),r.has(i)&&r.delete(i);else break}}const f=D[d];f&&P(f),b.pop()})}P(e);function x(K,D){K.forEach(f=>{const g=f[s],i=r.has(g),y=N.has(g);if(!i&&!y)return;const R=f[d];if(R)if(i)D.push(f);else{m.push(g);const A=Object.assign(Object.assign({},f),{[d]:[]});D.push(A),x(R,A[d])}else D.push(f)})}return x(e,k),{filteredTree:k,highlightKeySet:v,expandedKeys:m}}const Hn=ue({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Te(Ue),{droppingNodeParentRef:a,droppingMouseNodeRef:s,draggingNodeRef:d,droppingPositionRef:r,droppingOffsetLevelRef:N,nodePropsRef:v,indentRef:m,blockLineRef:k,checkboxPlacementRef:b,checkOnClickRef:P,disabledFieldRef:x,showLineRef:K,renderSwitcherIconRef:D,overrideDefaultNodeClickBehaviorRef:f}=t,g=ee(()=>!!e.tmNode.rawNode.checkboxDisabled),i=ee(()=>ve(e.tmNode,x.value)),y=ee(()=>t.disabledRef.value||i.value),R=j(()=>{const{value:c}=v;if(c)return c({option:e.tmNode.rawNode})}),A=W(null),q={value:null};Bt(()=>{q.value=A.value.$el});function J(){const c=()=>{const{tmNode:F}=e;if(!F.isLeaf&&!F.shallowLoaded){if(!t.loadingKeysRef.value.has(F.key))t.loadingKeysRef.value.add(F.key);else return;const{onLoadRef:{value:M}}=t;M&&M(F.rawNode).then(V=>{V!==!1&&t.handleSwitcherClick(F)}).finally(()=>{t.loadingKeysRef.value.delete(F.key)})}else t.handleSwitcherClick(F)};D.value?setTimeout(c,0):c()}const T=ee(()=>!i.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),w=ee(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),E=ee(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),G=ee(()=>{const{value:c}=w;if(!c)return!1;const{value:F}=P,{tmNode:M}=e;return typeof F=="boolean"?!M.disabled&&F:F(e.tmNode.rawNode)});function le(c){const{value:F}=t.expandOnClickRef,{value:M}=T,{value:V}=G;if(!M&&!F&&!V||Ge(c,"checkbox")||Ge(c,"switcher"))return;const{tmNode:Z}=e;M&&t.handleSelect(Z),F&&!Z.isLeaf&&J(),V&&ae(!E.value)}function Y(c){var F,M;if(!(Ge(c,"checkbox")||Ge(c,"switcher"))){if(!y.value){const V=f.value;let Z=!1;if(V)switch(V({option:e.tmNode.rawNode})){case"toggleCheck":Z=!0,ae(!E.value);break;case"toggleSelect":Z=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":Z=!0,J(),Z=!0;break;case"none":Z=!0,Z=!0;return}Z||le(c)}(M=(F=R.value)===null||F===void 0?void 0:F.onClick)===null||M===void 0||M.call(F,c)}}function Le(c){k.value||Y(c)}function Q(c){k.value&&Y(c)}function ae(c){t.handleCheck(e.tmNode,c)}function fe(c){t.handleDragStart({event:c,node:e.tmNode})}function Ae(c){c.currentTarget===c.target&&t.handleDragEnter({event:c,node:e.tmNode})}function B(c){c.preventDefault(),t.handleDragOver({event:c,node:e.tmNode})}function he(c){t.handleDragEnd({event:c,node:e.tmNode})}function Pe(c){c.currentTarget===c.target&&t.handleDragLeave({event:c,node:e.tmNode})}function Qe(c){c.preventDefault(),r.value!==null&&t.handleDrop({event:c,node:e.tmNode,dropPosition:r.value})}const Ze=j(()=>{const{clsPrefix:c}=e,{value:F}=m;if(K.value){const M=[];let V=e.tmNode.parent;for(;V;)V.isLastChild?M.push(S("div",{class:`${c}-tree-node-indent`},S("div",{style:{width:`${F}px`}}))):M.push(S("div",{class:[`${c}-tree-node-indent`,`${c}-tree-node-indent--show-line`]},S("div",{style:{width:`${F}px`}}))),V=V.parent;return M.reverse()}else return It(e.tmNode.level,S("div",{class:`${e.clsPrefix}-tree-node-indent`},S("div",{style:{width:`${F}px`}})))});return{showDropMark:ee(()=>{const{value:c}=d;if(!c)return;const{value:F}=r;if(!F)return;const{value:M}=s;if(!M)return;const{tmNode:V}=e;return V.key===M.key}),showDropMarkAsParent:ee(()=>{const{value:c}=a;if(!c)return!1;const{tmNode:F}=e,{value:M}=r;return M==="before"||M==="after"?c.key===F.key:!1}),pending:ee(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:ee(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:ee(()=>{var c;return(c=t.highlightKeySetRef.value)===null||c===void 0?void 0:c.has(e.tmNode.key)}),checked:E,indeterminate:ee(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:ee(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:ee(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:y,checkable:w,mergedCheckOnClick:G,checkboxDisabled:g,selectable:T,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:k,nodeProps:R,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:N,indent:m,checkboxPlacement:b,showLine:K,contentInstRef:A,contentElRef:q,indentNodes:Ze,handleCheck:ae,handleDrop:Qe,handleDragStart:fe,handleDragEnter:Ae,handleDragOver:B,handleDragEnd:he,handleDragLeave:Pe,handleLineClick:Q,handleContentClick:Le,handleSwitcherClick:J}},render(){const{tmNode:e,clsPrefix:t,checkable:a,expandOnClick:s,selectable:d,selected:r,checked:N,highlight:v,draggable:m,blockLine:k,indent:b,indentNodes:P,disabled:x,pending:K,internalScrollable:D,nodeProps:f,checkboxPlacement:g}=this,i=m&&!x?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,y=D?Un(e.key):void 0,R=g==="right",A=a?S(ml,{indent:b,right:R,focusable:this.checkboxFocusable,disabled:x||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return S("div",Object.assign({class:`${t}-tree-node-wrapper`},i),S("div",Object.assign({},k?f:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:a,[`${t}-tree-node--highlight`]:v,[`${t}-tree-node--pending`]:K,[`${t}-tree-node--disabled`]:x,[`${t}-tree-node--selectable`]:d,[`${t}-tree-node--clickable`]:d||s||this.mergedCheckOnClick},f==null?void 0:f.class],"data-key":y,draggable:m&&k,onClick:this.handleLineClick,onDragstart:m&&k&&!x?this.handleDragStart:void 0}),P,e.isLeaf&&this.showLine?S("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},S("div",{style:{width:`${b}px`}})):S(vl,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:b,onClick:this.handleSwitcherClick}),R?null:A,S(bl,{ref:"contentInstRef",clsPrefix:t,checked:N,selected:r,onClick:this.handleContentClick,nodeProps:k?void 0:f,onDragstart:m&&!k&&!x?this.handleDragStart:void 0,tmNode:e}),m?this.showDropMark?Kn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:b}):this.showDropMarkAsParent?Kn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:b}):null:null,R?A:null))}});function wl({props:e,fNodesRef:t,mergedExpandedKeysRef:a,mergedSelectedKeysRef:s,mergedCheckedKeysRef:d,handleCheck:r,handleSelect:N,handleSwitcherClick:v}){const{value:m}=s,k=Te(zn,null),b=k?k.pendingNodeKeyRef:W(m.length?m[m.length-1]:null);function P(x){var K;if(!e.keyboard)return{enterBehavior:null};const{value:D}=b;let f=null;if(D===null){if((x.key==="ArrowDown"||x.key==="ArrowUp")&&x.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(x.key)&&D===null){const{value:g}=t;let i=0;for(;i<g.length;){if(!g[i].disabled){b.value=g[i].key;break}i+=1}}}else{const{value:g}=t;let i=g.findIndex(y=>y.key===D);if(!~i)return{enterBehavior:null};if(x.key==="Enter"){const y=g[i];switch(f=((K=e.overrideDefaultNodeClickBehavior)===null||K===void 0?void 0:K.call(e,{option:y.rawNode}))||null,f){case"toggleCheck":r(y,!d.value.includes(y.key));break;case"toggleSelect":N(y);break;case"toggleExpand":v(y);break;case"none":break;case"default":default:f="default",N(y)}}else if(x.key==="ArrowDown")for(x.preventDefault(),i+=1;i<g.length;){if(!g[i].disabled){b.value=g[i].key;break}i+=1}else if(x.key==="ArrowUp")for(x.preventDefault(),i-=1;i>=0;){if(!g[i].disabled){b.value=g[i].key;break}i-=1}else if(x.key==="ArrowLeft"){const y=g[i];if(y.isLeaf||!a.value.includes(D)){const R=y.getParent();R&&(b.value=R.key)}else v(y)}else if(x.key==="ArrowRight"){const y=g[i];if(y.isLeaf)return{enterBehavior:null};if(!a.value.includes(D))v(y);else for(i+=1;i<g.length;){if(!g[i].disabled){b.value=g[i].key;break}i+=1}}}return{enterBehavior:f}}return{pendingNodeKeyRef:b,handleKeydown:P}}const _l=ue({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return S($t,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>S("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Pn(this.height)}},this.nodes.map(t=>S(Hn,{clsPrefix:e,tmNode:t})))})}}),cn=Mt(),Nl=z("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ce("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ce(">",[z("tree-node",[ce("&:first-child","margin-top: 0;")])]),z("tree-motion-wrapper",[H("expand",[wn({duration:"0.2s"})]),H("collapse",[wn({duration:"0.2s",reverse:!0})])]),z("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),z("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[H("highlight",[z("tree-node-content",[Se("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),H("disabled",[z("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),De("disabled",[H("clickable",[z("tree-node-content",`
 cursor: pointer;
 `)])])]),H("block-node",[z("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),De("block-line",[z("tree-node",[De("disabled",[z("tree-node-content",[ce("&:hover","background: var(--n-node-color-hover);")]),H("selectable",[z("tree-node-content",[ce("&:active","background: var(--n-node-color-pressed);")])]),H("pending",[z("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),H("selected",[z("tree-node-content","background: var(--n-node-color-active);")])]),H("selected",[z("tree-node-content","background: var(--n-node-color-active);")])])]),H("block-line",[z("tree-node",[De("disabled",[ce("&:hover","background: var(--n-node-color-hover);"),H("pending",`
 background: var(--n-node-color-hover);
 `),H("selectable",[De("selected",[ce("&:active","background: var(--n-node-color-pressed);")])]),H("selected","background: var(--n-node-color-active);")]),H("selected","background: var(--n-node-color-active);"),H("disabled",`
 cursor: not-allowed;
 `)])]),z("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[H("show-line","position: relative",[ce("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),H("last-child",[ce("&::before",`
 bottom: 50%;
 `)]),H("is-leaf",[ce("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),De("show-line","height: 0;")]),z("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Se("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[z("icon",[cn]),z("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[cn]),z("base-icon",[cn])]),H("hide","visibility: hidden;"),H("expanded","transform: rotate(90deg);")]),z("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),z("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ce("&:last-child","margin-bottom: 0;"),Se("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Se("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Se("suffix",`
 display: inline-flex;
 `)]),Se("empty","margin: auto;")]);var Rl=function(e,t,a,s){function d(r){return r instanceof a?r:new a(function(N){N(r)})}return new(a||(a=Promise))(function(r,N){function v(b){try{k(s.next(b))}catch(P){N(P)}}function m(b){try{k(s.throw(b))}catch(P){N(P)}}function k(b){b.done?r(b.value):d(b.value).then(v,m)}k((s=s.apply(e,[])).next())})};function Tn(e,t,a,s){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:s||(r=>r[t]),getDisabled(r){return!!(r[a]||r.checkboxDisabled)}}}const Cl={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Sl=Object.assign(Object.assign(Object.assign(Object.assign({},En.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:yl},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Cl),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Dl=ue({name:"Tree",props:Sl,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:a,mergedRtlRef:s}=Ut(e),d=zt("Tree",s,t),r=En("Tree","-tree",Nl,jt,e,t),N=W(null),v=W(null),m=W(null);function k(){var n;return(n=m.value)===null||n===void 0?void 0:n.listElRef}function b(){var n;return(n=m.value)===null||n===void 0?void 0:n.itemsElRef}const P=j(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(o,u)=>{if(!o.length)return!0;const h=u[l];return typeof h=="string"?h.toLowerCase().includes(o.toLowerCase()):!1}}),x=j(()=>{const{pattern:n}=e;return n?!n.length||!P.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:xl(e.data,P.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),K=j(()=>_n(e.showIrrelevantNodes?e.data:x.value.filteredTree,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),D=Te(zn,null),f=e.internalTreeSelect?D.dataTreeMate:j(()=>e.showIrrelevantNodes?K.value:_n(e.data,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:g}=e,i=W([]);g!=null&&g.includes("defaultCheckedKeys")?Oe(()=>{i.value=e.defaultCheckedKeys}):i.value=e.defaultCheckedKeys;const y=$(e,"checkedKeys"),R=We(y,i),A=j(()=>f.value.getCheckedKeys(R.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),q=pl(e),J=j(()=>A.value.checkedKeys),T=j(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:A.value.indeterminateKeys}),w=W([]);g!=null&&g.includes("defaultSelectedKeys")?Oe(()=>{w.value=e.defaultSelectedKeys}):w.value=e.defaultSelectedKeys;const E=$(e,"selectedKeys"),G=We(E,w),le=W([]),Y=n=>{le.value=e.defaultExpandAll?f.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};g!=null&&g.includes("defaultExpandedKeys")?Oe(()=>{Y(void 0)}):Oe(()=>{Y(e.defaultExpandedKeys)});const Le=$(e,"expandedKeys"),Q=We(Le,le),ae=j(()=>K.value.getFlattenedNodes(Q.value)),{pendingNodeKeyRef:fe,handleKeydown:Ae}=wl({props:e,mergedCheckedKeysRef:R,mergedSelectedKeysRef:G,fNodesRef:ae,mergedExpandedKeysRef:Q,handleCheck:an,handleSelect:on,handleSwitcherClick:mn});let B=null,he=null;const Pe=W(new Set),Qe=j(()=>e.internalHighlightKeySet||x.value.highlightKeySet),Ze=We(Qe,Pe),c=W(new Set),F=j(()=>Q.value.filter(n=>!c.value.has(n)));let M=0;const V=W(null),Z=W(null),ze=W(null),je=W(null),He=W(0),Vn=j(()=>{const{value:n}=Z;return n?n.parent:null});let en=!1;Ke($(e,"data"),()=>{en=!0,Ye(()=>{en=!1}),c.value.clear(),fe.value=null,Fe()},{deep:!1});let nn=!1;const tn=()=>{nn=!0,Ye(()=>{nn=!1})};let Ee;Ke($(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ee=void 0,n){const{expandedKeys:o,highlightKeySet:u}=kl(e.data,e.pattern,e.keyField,e.childrenField,P.value);Pe.value=u,tn(),xe(o,oe(o),{node:null,action:"filter"})}else Pe.value=new Set;else if(!n.length)Ee!==void 0&&(tn(),xe(Ee,oe(Ee),{node:null,action:"filter"}));else{l.length||(Ee=Q.value);const{expandedKeys:o}=x.value;o!==void 0&&(tn(),xe(o,oe(o),{node:null,action:"filter"}))}});function gn(n){return Rl(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:o}=c;if(!o.has(n.key)){o.add(n.key);try{(yield l(n.rawNode))===!1&&we()}catch(u){console.error(u),we()}o.delete(n.key)}})}Oe(()=>{var n;const{value:l}=K;if(!l)return;const{getNode:o}=l;(n=Q.value)===null||n===void 0||n.forEach(u=>{const h=o(u);h&&!h.shallowLoaded&&gn(h)})});const ke=W(!1),ge=W([]);Ke(F,(n,l)=>{if(!e.animated||nn){Ye(Ve);return}if(en)return;const o=Be(r.value.self.nodeHeight),u=new Set(l);let h=null,U=null;for(const I of n)if(!u.has(I)){if(h!==null)return;h=I}const ne=new Set(n);for(const I of l)if(!ne.has(I)){if(U!==null)return;U=I}if(h===null&&U===null)return;const{virtualScroll:ie}=e,Ne=(ie?m.value.listElRef:N.value).offsetHeight,Re=Math.ceil(Ne/o)+1;let re;if(h!==null&&(re=l),U!==null&&(re===void 0?re=n:re=re.filter(I=>I!==U)),ke.value=!0,ge.value=K.value.getFlattenedNodes(re),h!==null){const I=ge.value.findIndex(de=>de.key===h);if(~I){const de=ge.value[I].children;if(de){const se=Nn(de,n);ge.value.splice(I+1,0,{__motion:!0,mode:"expand",height:ie?se.length*o:void 0,nodes:ie?se.slice(0,Re):se})}}}if(U!==null){const I=ge.value.findIndex(de=>de.key===U);if(~I){const de=ge.value[I].children;if(!de)return;ke.value=!0;const se=Nn(de,n);ge.value.splice(I+1,0,{__motion:!0,mode:"collapse",height:ie?se.length*o:void 0,nodes:ie?se.slice(0,Re):se})}}});const qn=j(()=>Ht(ae.value)),Gn=j(()=>ke.value?ge.value:ae.value);function Ve(){const{value:n}=v;n&&n.sync()}function Wn(){ke.value=!1,e.virtualScroll&&Ye(Ve)}function oe(n){const{getNode:l}=f.value;return n.map(o=>{var u;return((u=l(o))===null||u===void 0?void 0:u.rawNode)||null})}function xe(n,l,o){const{"onUpdate:expandedKeys":u,onUpdateExpandedKeys:h}=e;le.value=n,u&&te(u,n,l,o),h&&te(h,n,l,o)}function vn(n,l,o){const{"onUpdate:checkedKeys":u,onUpdateCheckedKeys:h}=e;i.value=n,h&&te(h,n,l,o),u&&te(u,n,l,o)}function Yn(n,l){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:u}=e;o&&te(o,n,l),u&&te(u,n,l)}function ln(n,l,o){const{"onUpdate:selectedKeys":u,onUpdateSelectedKeys:h}=e;w.value=n,h&&te(h,n,l,o),u&&te(u,n,l,o)}function Xn(n){const{onDragenter:l}=e;l&&te(l,n)}function Jn(n){const{onDragleave:l}=e;l&&te(l,n)}function Qn(n){const{onDragend:l}=e;l&&te(l,n)}function Zn(n){const{onDragstart:l}=e;l&&te(l,n)}function et(n){const{onDragover:l}=e;l&&te(l,n)}function nt(n){const{onDrop:l}=e;l&&te(l,n)}function Fe(){tt(),be()}function tt(){V.value=null}function be(){He.value=0,Z.value=null,ze.value=null,je.value=null,we()}function we(){B&&(window.clearTimeout(B),B=null),he=null}function an(n,l){if(e.disabled||ve(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){on(n);return}const o=l?"check":"uncheck",{checkedKeys:u,indeterminateKeys:h}=f.value[o](n.key,J.value,{cascade:e.cascade,checkStrategy:q.value,allowNotLoaded:e.allowCheckingNotLoaded});vn(u,oe(u),{node:n.rawNode,action:o}),Yn(h,oe(h))}function lt(n){if(e.disabled)return;const{key:l}=n,{value:o}=Q,u=o.findIndex(h=>h===l);if(~u){const h=Array.from(o);h.splice(u,1),xe(h,oe(h),{node:n.rawNode,action:"collapse"})}else{const h=K.value.getNode(l);if(!h||h.isLeaf)return;let U;if(e.accordion){const ne=new Set(n.siblings.map(({key:ie})=>ie));U=o.filter(ie=>!ne.has(ie)),U.push(l)}else U=o.concat(l);xe(U,oe(U),{node:n.rawNode,action:"expand"})}}function mn(n){e.disabled||ke.value||lt(n)}function on(n){if(!(e.disabled||!e.selectable)){if(fe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:o}}=A;e.multiple?an(n,!(l.includes(n.key)||o.includes(n.key))):vn([n.key],oe([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(G.value),o=l.findIndex(u=>u===n.key);~o?e.cancelable&&l.splice(o,1):~o||l.push(n.key),ln(l,oe(l),{node:n.rawNode,action:~o?"unselect":"select"})}else G.value.includes(n.key)?e.cancelable&&ln([],[],{node:n.rawNode,action:"unselect"}):ln([n.key],oe([n.key]),{node:n.rawNode,action:"select"})}}function at(n){if(B&&(window.clearTimeout(B),B=null),n.isLeaf)return;he=n.key;const l=()=>{if(he!==n.key)return;const{value:o}=ze;if(o&&o.key===n.key&&!Q.value.includes(n.key)){const u=Q.value.concat(n.key);xe(u,oe(u),{node:n.rawNode,action:"expand"})}B=null,he=null};n.shallowLoaded?B=window.setTimeout(()=>{l()},1e3):B=window.setTimeout(()=>{gn(n).then(()=>{l()})},1e3)}function ot({event:n,node:l}){!e.draggable||e.disabled||ve(l,e.disabledField)||(bn({event:n,node:l},!1),Xn({event:n,node:l.rawNode}))}function it({event:n,node:l}){!e.draggable||e.disabled||ve(l,e.disabledField)||Jn({event:n,node:l.rawNode})}function rt(n){n.target===n.currentTarget&&be()}function dt({event:n,node:l}){Fe(),!(!e.draggable||e.disabled||ve(l,e.disabledField))&&Qn({event:n,node:l.rawNode})}function st({event:n,node:l}){!e.draggable||e.disabled||ve(l,e.disabledField)||(M=n.clientX,V.value=l,Zn({event:n,node:l.rawNode}))}function bn({event:n,node:l},o=!0){var u;if(!e.draggable||e.disabled||ve(l,e.disabledField))return;const{value:h}=V;if(!h)return;const{allowDrop:U,indent:ne}=e;o&&et({event:n,node:l.rawNode});const ie=n.currentTarget,{height:Ne,top:Re}=ie.getBoundingClientRect(),re=n.clientY-Re;let I;U({node:l.rawNode,dropPosition:"inside",phase:"drag"})?re<=8?I="before":re>=Ne-8?I="after":I="inside":re<=Ne/2?I="before":I="after";const{value:se}=qn;let O,X;const Ce=se(l.key);if(Ce===null){be();return}let qe=!1;I==="inside"?(O=l,X="inside"):I==="before"?l.isFirstChild?(O=l,X="before"):(O=ae.value[Ce-1],X="after"):(O=l,X="after"),!O.isLeaf&&Q.value.includes(O.key)&&(qe=!0,X==="after"&&(O=ae.value[Ce+1],O?X="before":(O=l,X="inside")));const pn=O;if(ze.value=pn,!qe&&h.isLastChild&&h.key===O.key&&(X="after"),X==="after"){let kn=M-n.clientX,rn=0;for(;kn>=ne/2&&O.parent!==null&&O.isLastChild&&rn<1;)kn-=ne,rn+=1,O=O.parent;He.value=rn}else He.value=0;if((h.contains(O)||X==="inside"&&((u=h.parent)===null||u===void 0?void 0:u.key)===O.key)&&!(h.key===pn.key&&h.key===O.key)){be();return}if(!U({node:O.rawNode,dropPosition:X,phase:"drag"})){be();return}if(h.key===O.key)we();else if(he!==O.key)if(X==="inside"){if(e.expandOnDragenter){if(at(O),!O.shallowLoaded&&he!==O.key){Fe();return}}else if(!O.shallowLoaded){Fe();return}}else we();else X!=="inside"&&we();je.value=X,Z.value=O}function ct({event:n,node:l,dropPosition:o}){if(!e.draggable||e.disabled||ve(l,e.disabledField))return;const{value:u}=V,{value:h}=Z,{value:U}=je;if(!(!u||!h||!U)&&e.allowDrop({node:h.rawNode,dropPosition:U,phase:"drag"})&&u.key!==h.key){if(U==="before"){const ne=u.getNext({includeDisabled:!0});if(ne&&ne.key===h.key){be();return}}if(U==="after"){const ne=u.getPrev({includeDisabled:!0});if(ne&&ne.key===h.key){be();return}}nt({event:n,node:h.rawNode,dragNode:u.rawNode,dropPosition:o}),Fe()}}function ut(){Ve()}function ft(){Ve()}function ht(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:o}=v;if(!((l=o==null?void 0:o.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;fe.value=null}else{const{value:o}=N;if(o!=null&&o.contains(n.relatedTarget))return;fe.value=null}}Ke(fe,n=>{var l,o;if(n!==null){if(e.virtualScroll)(l=m.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:u}=v;if(u===null)return;const h=(o=u.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${Un(n)}"]`);if(!h)return;u.scrollTo({el:h})}}}),Vt(Ue,{loadingKeysRef:c,highlightKeySetRef:Ze,displayedCheckedKeysRef:J,displayedIndeterminateKeysRef:T,mergedSelectedKeysRef:G,mergedExpandedKeysRef:Q,mergedThemeRef:r,mergedCheckStrategyRef:q,nodePropsRef:$(e,"nodeProps"),disabledRef:$(e,"disabled"),checkableRef:$(e,"checkable"),selectableRef:$(e,"selectable"),expandOnClickRef:$(e,"expandOnClick"),onLoadRef:$(e,"onLoad"),draggableRef:$(e,"draggable"),blockLineRef:$(e,"blockLine"),indentRef:$(e,"indent"),cascadeRef:$(e,"cascade"),checkOnClickRef:$(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:ze,droppingNodeParentRef:Vn,draggingNodeRef:V,droppingPositionRef:je,droppingOffsetLevelRef:He,fNodesRef:ae,pendingNodeKeyRef:fe,showLineRef:$(e,"showLine"),disabledFieldRef:$(e,"disabledField"),internalScrollableRef:$(e,"internalScrollable"),internalCheckboxFocusableRef:$(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:$(e,"renderLabel"),renderPrefixRef:$(e,"renderPrefix"),renderSuffixRef:$(e,"renderSuffix"),renderSwitcherIconRef:$(e,"renderSwitcherIcon"),labelFieldRef:$(e,"labelField"),multipleRef:$(e,"multiple"),overrideDefaultNodeClickBehaviorRef:$(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:mn,handleDragEnd:dt,handleDragEnter:ot,handleDragLeave:it,handleDragStart:st,handleDrop:ct,handleDragOver:bn,handleSelect:on,handleCheck:an});function gt(n,l){var o,u;typeof n=="number"?(o=m.value)===null||o===void 0||o.scrollTo(n,l||0):(u=m.value)===null||u===void 0||u.scrollTo(n)}const vt={handleKeydown:Ae,scrollTo:gt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=A.value;return{keys:n,options:oe(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=A.value;return{keys:n,options:oe(n)}}},yn=j(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:o,nodeColorHover:u,nodeColorPressed:h,nodeColorActive:U,arrowColor:ne,loadingColor:ie,nodeTextColor:Ne,nodeTextColorDisabled:Re,dropMarkColor:re,nodeWrapperPadding:I,nodeHeight:de,lineHeight:se,lineColor:O}}=r.value,X=sn(I,"top"),Ce=sn(I,"bottom"),qe=Pn(Be(de)-Be(X)-Be(Ce));return{"--n-arrow-color":ne,"--n-loading-color":ie,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":o,"--n-node-color-active":U,"--n-node-color-hover":u,"--n-node-color-pressed":h,"--n-node-text-color":Ne,"--n-node-text-color-disabled":Re,"--n-drop-mark-color":re,"--n-node-wrapper-padding":I,"--n-line-offset-top":`-${X}`,"--n-line-offset-bottom":`-${Ce}`,"--n-node-content-height":qe,"--n-line-height":se,"--n-line-color":O}}),_e=a?qt("tree",void 0,yn,e):void 0;return Object.assign(Object.assign({},vt),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:d,fNodes:Gn,aip:ke,selfElRef:N,virtualListInstRef:m,scrollbarInstRef:v,handleFocusout:ht,handleDragLeaveTree:rt,handleScroll:ut,getScrollContainer:k,getScrollContent:b,handleAfterEnter:Wn,handleResize:ft,cssVars:a?void 0:yn,themeClass:_e==null?void 0:_e.themeClass,onRender:_e==null?void 0:_e.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:a}=this;if(!t.length&&a)return a();const{mergedClsPrefix:s,blockNode:d,blockLine:r,draggable:N,disabled:v,internalFocusable:m,checkable:k,handleKeydown:b,rtlEnabled:P,handleFocusout:x,scrollbarProps:K}=this,D=m&&!v,f=D?"0":void 0,g=[`${s}-tree`,P&&`${s}-tree--rtl`,k&&`${s}-tree--checkable`,(r||d)&&`${s}-tree--block-node`,r&&`${s}-tree--block-line`],i=R=>"__motion"in R?S(_l,{height:R.height,nodes:R.nodes,clsPrefix:s,mode:R.mode,onAfterEnter:this.handleAfterEnter}):S(Hn,{key:R.key,tmNode:R,clsPrefix:s});if(this.virtualScroll){const{mergedTheme:R,internalScrollablePadding:A}=this,q=sn(A||"0");return S(Cn,Object.assign({},K,{ref:"scrollbarInstRef",onDragleave:N?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:g,theme:R.peers.Scrollbar,themeOverrides:R.peerOverrides.Scrollbar,tabindex:f,onKeydown:D?b:void 0,onFocusout:D?x:void 0}),{default:()=>{var J;return(J=this.onRender)===null||J===void 0||J.call(this),t.length?S(Gt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Be(R.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:q.top,paddingBottom:q.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:q.left,paddingRight:q.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:T})=>i(T)}):Rn(this.$slots.empty,()=>[S(Sn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:y}=this;return g.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),y?S(Cn,Object.assign({},K,{class:g,tabindex:f,onKeydown:D?b:void 0,onFocusout:D?x:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>S("div",{onDragleave:N?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(i))}):S("div",{class:g,tabindex:f,ref:"selfElRef",style:this.cssVars,onKeydown:D?b:void 0,onFocusout:D?x:void 0,onDragleave:N?this.handleDragLeaveTree:void 0},t.length?t.map(i):Rn(this.$slots.empty,()=>[S(Sn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Kl={class:"flex-y-center gap-16px pb-12px"},Tl=ue({name:"MenuAuthModal",__name:"menu-auth-modal",props:Je({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,a=fn(e,"visible");function s(){a.value=!1}const d=j(()=>C("common.edit")+C("page.manage.role.menuAuth")),r=Xe("");async function N(){console.log(t.roleId),r.value="home"}async function v(i){r.value=i}const m=Xe([]);async function k(){const{error:i,data:y}=await bt();i||(m.value=y)}const b=j(()=>m.value.map(y=>({label:y,value:y}))),P=Xe([]);async function x(){const{error:i,data:y}=await yt();i||(P.value=y)}const K=Xe([]);async function D(){const i={roleId:t.roleId},{error:y,data:R}=await pt(i);y||(K.value=R,x())}async function f(){var R,A;const i={roleId:t.roleId,menuIds:K.value},{error:y}=await mt(i);y||((A=(R=window.$message)==null?void 0:R.success)==null||A.call(R,C("common.modifySuccess")),s())}function g(){N(),k(),x(),D()}return Ke(a,i=>{i&&g()}),(i,y)=>{const R=Fn,A=Dl,q=Me,J=hn,T=Wt;return ye(),$e(T,{show:a.value,"onUpdate:show":y[1]||(y[1]=w=>a.value=w),title:d.value,preset:"card",class:"w-480px"},{footer:L(()=>[_(J,{justify:"end"},{default:L(()=>[_(q,{size:"small",class:"mt-16px",onClick:s},{default:L(()=>[pe(me(p(C)("common.cancel")),1)]),_:1}),_(q,{type:"primary",size:"small",class:"mt-16px",onClick:f},{default:L(()=>[pe(me(p(C)("common.confirm")),1)]),_:1})]),_:1})]),default:L(()=>[Dn("div",Kl,[Dn("div",null,me(p(C)("page.manage.menu.home")),1),_(R,{value:r.value,options:b.value,size:"small",class:"w-160px","onUpdate:value":v},null,8,["value","options"])]),_(A,{"checked-keys":K.value,"onUpdate:checkedKeys":y[0]||(y[0]=w=>K.value=w),data:P.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Ll=ue({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:Je({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Je(["submitted"],["update:visible"]),setup(e,{emit:t}){const a=e,s=t,d=fn(e,"visible"),{formRef:r,validate:N,restoreValidation:v}=il(),{defaultRequiredRule:m}=rl(),{bool:k,setTrue:b}=Yt(),{loading:P,startLoading:x,endLoading:K}=Xt(),D=j(()=>({add:C("page.manage.role.addRole"),edit:C("page.manage.role.editRole")})[a.operateType]),f=On(g());function g(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const i={roleName:m,roleCode:m,status:m},y=j(()=>{var T;return((T=a.rowData)==null?void 0:T.id)||-1}),R=j(()=>a.operateType==="edit");function A(){Object.assign(f,g()),a.operateType==="edit"&&a.rowData&&Object.assign(f,a.rowData)}function q(){d.value=!1}async function J(){var T,w,E;if(a.operateType==="add"){await N();const G={roleName:f.roleName,roleCode:f.roleCode,roleDesc:f.roleDesc,status:f.status};x();const{error:le}=await kt(G);le||((T=window.$message)==null||T.success(C("common.addSuccess")),s("submitted"),q()),K()}else if(a.operateType==="edit"){await N();const G={id:(w=a.rowData)==null?void 0:w.id,roleName:f.roleName,roleCode:f.roleCode,roleDesc:f.roleDesc,status:f.status};x();const{error:le}=await xt(G);le||((E=window.$message)==null||E.success(C("common.updateSuccess")),s("submitted"),q()),K()}}return Ke(d,()=>{d.value&&(A(),v())}),(T,w)=>{const E=In,G=dl,le=_t,Y=wt,Le=Mn,Q=Me,ae=hn,fe=el,Ae=nl;return ye(),$e(Ae,{show:d.value,"onUpdate:show":w[5]||(w[5]=B=>d.value=B),"display-directive":"show",width:360},{default:L(()=>[_(fe,{title:D.value,"native-scrollbar":!1,closable:""},{footer:L(()=>[_(ae,{size:16},{default:L(()=>[_(Q,{onClick:q},{default:L(()=>[pe(me(p(C)("common.cancel")),1)]),_:1}),_(Q,{loading:p(P),type:"primary",onClick:J},{default:L(()=>[pe(me(p(C)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:L(()=>[_(Le,{ref_key:"formRef",ref:r,model:f,rules:i},{default:L(()=>[_(G,{label:p(C)("page.manage.role.roleName"),path:"roleName"},{default:L(()=>[_(E,{value:f.roleName,"onUpdate:value":w[0]||(w[0]=B=>f.roleName=B),placeholder:p(C)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),_(G,{label:p(C)("page.manage.role.roleCode"),path:"roleCode"},{default:L(()=>[_(E,{value:f.roleCode,"onUpdate:value":w[1]||(w[1]=B=>f.roleCode=B),placeholder:p(C)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),_(G,{label:p(C)("page.manage.role.roleStatus"),path:"status"},{default:L(()=>[_(Y,{value:f.status,"onUpdate:value":w[2]||(w[2]=B=>f.status=B)},{default:L(()=>[(ye(!0),Bn(Qt,null,Jt(p(Ln),B=>(ye(),$e(le,{key:B.value,value:B.value,label:p(C)(B.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),_(G,{label:p(C)("page.manage.role.roleDesc"),path:"roleDesc"},{default:L(()=>[_(E,{value:f.roleDesc,"onUpdate:value":w[3]||(w[3]=B=>f.roleDesc=B),placeholder:p(C)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),R.value?(ye(),$e(ae,{key:0},{default:L(()=>[_(Q,{onClick:p(b)},{default:L(()=>[pe(me(p(C)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),_(Tl,{visible:p(k),"onUpdate:visible":w[4]||(w[4]=B=>Ie(k)?k.value=B:null),"role-id":y.value},null,8,["visible","role-id"])]),_:1})):Zt("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),Al=ue({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:Je(["reset","search"],["update:model"]),setup(e,{emit:t}){const a=t,s=fn(e,"model");function d(){a("reset")}function r(){a("search")}return(N,v)=>{const m=In,k=Nt,b=Fn,P=sl,x=Me,K=cl,D=hn,f=hl,g=Mn,i=ul,y=fl,R=$n;return ye(),$e(R,{bordered:!1,size:"small",class:"card-wrapper"},{default:L(()=>[_(y,{"default-expanded-names":["role-search"]},{default:L(()=>[_(i,{title:p(C)("common.search"),name:"role-search"},{default:L(()=>[_(g,{model:s.value,"label-placement":"left","label-width":80},{default:L(()=>[_(f,{responsive:"screen","item-responsive":""},{default:L(()=>[_(k,{span:"24 s:12 m:6",label:p(C)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:L(()=>[_(m,{value:s.value.roleName,"onUpdate:value":v[0]||(v[0]=A=>s.value.roleName=A),placeholder:p(C)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),_(k,{span:"24 s:12 m:6",label:p(C)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:L(()=>[_(m,{value:s.value.roleCode,"onUpdate:value":v[1]||(v[1]=A=>s.value.roleCode=A),placeholder:p(C)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),_(k,{span:"24 s:12 m:6",label:p(C)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:L(()=>[_(b,{value:s.value.status,"onUpdate:value":v[2]||(v[2]=A=>s.value.status=A),placeholder:p(C)("page.manage.role.form.roleStatus"),options:p(tl)(p(Ln)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),_(k,{span:"24 s:12 m:6"},{default:L(()=>[_(D,{class:"w-full",justify:"end"},{default:L(()=>[_(x,{onClick:d},{icon:L(()=>[_(P,{class:"text-icon"})]),default:L(()=>[pe(" "+me(p(C)("common.reset")),1)]),_:1}),_(x,{type:"primary",ghost:"",onClick:r},{icon:L(()=>[_(K,{class:"text-icon"})]),default:L(()=>[pe(" "+me(p(C)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1})]),_:1})}}}),Pl={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function un(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ol(e)}const Ml=ue({name:"manage_role",__name:"index",setup(e){const t=ll(),a=On({}),{columns:s,columnChecks:d,data:r,loading:N,getData:v,getDataByPage:m,mobilePagination:k,searchParams:b,resetSearchParams:P}=Rt({apiFn:St,apiParams:{current:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:C("common.index"),width:64,align:"center"},{key:"roleName",title:C("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:C("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:C("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:C("page.manage.role.roleStatus"),align:"center",width:100,render:T=>{if(T.status===null)return null;const w={1:"success",2:"warning"},E=C(Dt[T.status]);return _(al,{type:w[T.status]},un(E)?E:{default:()=>[E]})}},{key:"operate",title:C("common.operate"),align:"center",width:130,render:T=>{let w;return _("div",{class:"flex-center gap-8px"},[_(Me,{type:"primary",ghost:!0,size:"small",onClick:()=>J(T.id)},un(w=C("common.edit"))?w:{default:()=>[w]}),_(Kt,{onPositiveClick:()=>q(T.id)},{default:()=>C("common.confirmDelete"),trigger:()=>{let E;return _(Me,{loading:a[T.id],type:"error",ghost:!0,size:"small"},un(E=C("common.delete"))?E:{default:()=>[E]})}})])}}]}),{drawerVisible:x,operateType:K,editingData:D,handleAdd:f,handleEdit:g,checkedRowKeys:i,onBatchDeleted:y,onDeleted:R}=Ct(r,v);async function A(){const T=i.value.map(E=>Number.parseInt(E,10));T.forEach(E=>{a[E]=!0});const{error:w}=await xn(T);w||(T.forEach(E=>{a[E]=!1}),y())}async function q(T){const w=[T];a[T]=!0;const{error:E}=await xn(w);E||(a[T]=!1,R())}function J(T){g(T)}return(T,w)=>{const E=Tt,G=Lt,le=$n;return ye(),Bn("div",Pl,[_(Al,{model:p(b),"onUpdate:model":w[0]||(w[0]=Y=>Ie(b)?b.value=Y:null),onReset:p(P),onSearch:p(m)},null,8,["model","onReset","onSearch"]),_(le,{title:p(C)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":L(()=>[_(E,{columns:p(d),"onUpdate:columns":w[1]||(w[1]=Y=>Ie(d)?d.value=Y:null),"disabled-delete":p(i).length===0,loading:p(N),"add-auth":"manage:role:add",onAdd:p(f),onDelete:A,onRefresh:p(v)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:L(()=>[_(G,{"checked-row-keys":p(i),"onUpdate:checkedRowKeys":w[2]||(w[2]=Y=>Ie(i)?i.value=Y:null),columns:p(s),data:p(r),size:"small","flex-height":!p(t).isMobile,"scroll-x":702,loading:p(N),remote:"","row-key":Y=>Y.id,pagination:p(k),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),_(Ll,{visible:p(x),"onUpdate:visible":w[3]||(w[3]=Y=>Ie(x)?x.value=Y:null),"operate-type":p(K),"row-data":p(D),onSubmitted:p(m)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Ml as default};
