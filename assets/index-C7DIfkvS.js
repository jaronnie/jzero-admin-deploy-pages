import{A as He,m as Je,a as Xe,e as Qe,G as Ze,b as ea,_ as aa,c as ta,d as na,f as la,u as oa,g as ra,h as ua,i as sa,j as ia,N as da,k as ca,l as pa,n as ma}from"./business-h-SbUEBI.js";import{d as J,a1 as h,L as E,M as Ve,K as L,N as W,O as re,U as Me,ag as ga,a8 as Be,ah as fa,a6 as Se,ai as va,aj as ha,ak as ya,al as ba,am as _a,aa as Pa,ab as Te,v as de,an as Ia,r as ne,a9 as se,ao as Ta,V as Le,a as z,Y as ka,ap as Ra,B as q,aq as $e,ar as Ae,as as fe,at as ve,au as Na,av as le,aw as Ce,ax as wa,ay as he,az as Oa,ae as Va,o as w,b as oe,e as je,aA as R,aB as De,aC as $a,$ as l,p as Aa,f as a,_ as Ie,aD as xe,c as S,w as d,g as Ee,t as Ue,h as r,a3 as ye,a4 as be,aE as Z,aF as Ca,aG as Da,aH as xa,aI as Ea,A as Ua,aJ as Ma,aK as _e,a5 as Pe,J as Ba,aL as Sa}from"./index-CAXO7y6T.js";import{u as La,a as ja,b as Ka}from"./form-4Txvnxou.js";import{_ as Fa}from"./Space-DT8RddoM.js";import{a as za}from"./Grid-MZ71pvMH.js";const qa=J({name:"ArrowUp",render(){return h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},h("g",{fill:"none"},h("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),P="0!important",Ke="-1px!important";function ee(t){return W(`${t}-type`,[L("& +",[E("button",{},[W(`${t}-type`,[re("border",{borderLeftWidth:P}),re("state-border",{left:Ke})])])])])}function ae(t){return W(`${t}-type`,[L("& +",[E("button",[W(`${t}-type`,[re("border",{borderTopWidth:P}),re("state-border",{top:Ke})])])])])}const Ga=E("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Ve("vertical",{flexDirection:"row"},[Ve("rtl",[E("button",[L("&:first-child:not(:last-child)",`
 margin-right: ${P};
 border-top-right-radius: ${P};
 border-bottom-right-radius: ${P};
 `),L("&:last-child:not(:first-child)",`
 margin-left: ${P};
 border-top-left-radius: ${P};
 border-bottom-left-radius: ${P};
 `),L("&:not(:first-child):not(:last-child)",`
 margin-left: ${P};
 margin-right: ${P};
 border-radius: ${P};
 `),ee("default"),W("ghost",[ee("primary"),ee("info"),ee("success"),ee("warning"),ee("error")])])])]),W("vertical",{flexDirection:"column"},[E("button",[L("&:first-child:not(:last-child)",`
 margin-bottom: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-bottom-left-radius: ${P};
 border-bottom-right-radius: ${P};
 `),L("&:last-child:not(:first-child)",`
 margin-top: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-top-left-radius: ${P};
 border-top-right-radius: ${P};
 `),L("&:not(:first-child):not(:last-child)",`
 margin: ${P};
 border-radius: ${P};
 `),ae("default"),W("ghost",[ae("primary"),ae("info"),ae("success"),ae("warning"),ae("error")])])])]),Wa={size:{type:String,default:void 0},vertical:Boolean},Ya=J({name:"ButtonGroup",props:Wa,setup(t){const{mergedClsPrefixRef:f,mergedRtlRef:g}=Me(t);return ga("-button-group",Ga,f),Be(fa,t),{rtlEnabled:Se("ButtonGroup",g,f),mergedClsPrefix:f}},render(){const{mergedClsPrefix:t}=this;return h("div",{class:[`${t}-button-group`,this.rtlEnabled&&`${t}-button-group--rtl`,this.vertical&&`${t}-button-group--vertical`],role:"group"},this.$slots)}});function Ha(){return _a}const Ja=va({name:"DynamicInput",common:ha,peers:{Input:ya,Button:ba},self:Ha}),ke=Pa("n-dynamic-input"),Xa=J({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:t,placeholderRef:f}=Te(ke);return{mergedTheme:t,placeholder:f}},render(){const{mergedTheme:t,placeholder:f,value:g,clsPrefix:m,onUpdateValue:v,disabled:V}=this;return h("div",{class:`${m}-dynamic-input-preset-input`},h(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:g,placeholder:f,onUpdateValue:v,disabled:V}))}}),Qa=J({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(t){const{mergedThemeRef:f,keyPlaceholderRef:g,valuePlaceholderRef:m}=Te(ke);return{mergedTheme:f,keyPlaceholder:g,valuePlaceholder:m,handleKeyInput(v){t.onUpdateValue({key:v,value:t.value.value})},handleValueInput(v){t.onUpdateValue({key:t.value.key,value:v})}}},render(){const{mergedTheme:t,keyPlaceholder:f,valuePlaceholder:g,value:m,clsPrefix:v,disabled:V}=this;return h("div",{class:`${v}-dynamic-input-preset-pair`},h(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:m.key,class:`${v}-dynamic-input-pair-input`,placeholder:f,onUpdateValue:this.handleKeyInput,disabled:V}),h(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:m.value,class:`${v}-dynamic-input-pair-input`,placeholder:g,onUpdateValue:this.handleValueInput,disabled:V}))}}),Za=E("dynamic-input",{width:"100%"},[E("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[E("dynamic-input-preset-input",{flex:1,alignItems:"center"}),E("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[E("dynamic-input-pair-input",[L("&:first-child",{"margin-right":"12px"})])]),re("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[W("icon",{cursor:"pointer"})]),L("&:last-child",{marginBottom:0})]),E("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[E("form-item-blank",{paddingTop:"0 !important"})])]),ie=new WeakMap,et=Object.assign(Object.assign({},Le.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),at=J({name:"DynamicInput",props:et,setup(t,{slots:f}){const{mergedComponentPropsRef:g,mergedClsPrefixRef:m,mergedRtlRef:v,inlineThemeDisabled:V}=Me(),k=Te(Ia,null),$=ne(t.defaultValue),U=se(t,"value"),O=Ta(U,$),e=Le("DynamicInput","-dynamic-input",Za,Ja,t,m),T=z(()=>{const{value:n}=O;if(Array.isArray(n)){const{max:s}=t;return s!==void 0&&n.length>=s}return!1}),D=z(()=>{const{value:n}=O;return Array.isArray(n)?n.length<=t.min:!0}),G=z(()=>{var n,s;return(s=(n=g==null?void 0:g.value)===null||n===void 0?void 0:n.DynamicInput)===null||s===void 0?void 0:s.buttonSize});function A(n){const{onInput:s,"onUpdate:value":c,onUpdateValue:p}=t;s&&he(s,n),c&&he(c,n),p&&he(p,n),$.value=n}function M(n,s){if(n==null||typeof n!="object")return s;const c=fe(n)?ve(n):n;let p=ie.get(c);return p===void 0&&ie.set(c,p=Na()),p}function j(n,s){const{value:c}=O,p=Array.from(c??[]),i=p[n];if(p[n]=s,i&&s&&typeof i=="object"&&typeof s=="object"){const u=fe(i)?ve(i):i,_=fe(s)?ve(s):s,I=ie.get(u);I!==void 0&&ie.set(_,I)}A(p)}function K(){N(-1)}function N(n){const{value:s}=O,{onCreate:c}=t,p=Array.from(s??[]);if(c)p.splice(n+1,0,c(n+1)),A(p);else if(f.default)p.splice(n+1,0,null),A(p);else switch(t.preset){case"input":p.splice(n+1,0,""),A(p);break;case"pair":p.splice(n+1,0,{key:"",value:""}),A(p);break}}function x(n){const{value:s}=O;if(!Array.isArray(s))return;const{min:c}=t;if(s.length<=c)return;const{onRemove:p}=t;p&&p(n);const i=Array.from(s);i.splice(n,1),A(i)}function y(n,s,c){if(s<0||c<0||s>=n.length||c>=n.length||s===c)return;const p=n[s];n[s]=n[c],n[c]=p}function F(n,s){const{value:c}=O;if(!Array.isArray(c))return;const p=Array.from(c);n==="up"&&y(p,s,s-1),n==="down"&&y(p,s,s+1),A(p)}Be(ke,{mergedThemeRef:e,keyPlaceholderRef:se(t,"keyPlaceholder"),valuePlaceholderRef:se(t,"valuePlaceholder"),placeholderRef:se(t,"placeholder")});const X=Se("DynamicInput",v,m),Y=z(()=>{const{self:{actionMargin:n,actionMarginRtl:s}}=e.value;return{"--action-margin":n,"--action-margin-rtl":s}}),B=V?ka("dynamic-input",void 0,Y,t):void 0;return{locale:Ra("DynamicInput").localeRef,rtlEnabled:X,buttonSize:G,mergedClsPrefix:m,NFormItem:k,uncontrolledValue:$,mergedValue:O,insertionDisabled:T,removeDisabled:D,handleCreateClick:K,ensureKey:M,handleValueChange:j,remove:x,move:F,createItem:N,mergedTheme:e,cssVars:V?void 0:Y,themeClass:B==null?void 0:B.themeClass,onRender:B==null?void 0:B.onRender}},render(){const{$slots:t,itemClass:f,buttonSize:g,mergedClsPrefix:m,mergedValue:v,locale:V,mergedTheme:k,keyField:$,itemStyle:U,preset:O,showSortButton:e,NFormItem:T,ensureKey:D,handleValueChange:G,remove:A,createItem:M,move:j,onRender:K,disabled:N}=this;return K==null||K(),h("div",{class:[`${m}-dynamic-input`,this.rtlEnabled&&`${m}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(v)||v.length===0?h(q,Object.assign({block:!0,ghost:!0,dashed:!0,size:g},this.createButtonProps,{disabled:this.insertionDisabled||N,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>$e(t["create-button-default"],()=>[V.create]),icon:()=>$e(t["create-button-icon"],()=>[h(le,{clsPrefix:m},{default:()=>h(Ce,null)})])}):v.map((x,y)=>h("div",{key:$?x[$]:D(x,y),"data-key":$?x[$]:D(x,y),class:[`${m}-dynamic-input-item`,f],style:U},Ae(t.default,{value:v[y],index:y},()=>[O==="input"?h(Xa,{disabled:N,clsPrefix:m,value:v[y],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${y}]`:void 0,onUpdateValue:F=>{G(y,F)}}):O==="pair"?h(Qa,{disabled:N,clsPrefix:m,value:v[y],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${y}]`:void 0,onUpdateValue:F=>{G(y,F)}}):null]),Ae(t.action,{value:v[y],index:y,create:M,remove:A,move:j},()=>[h("div",{class:`${m}-dynamic-input-item__action`},h(Ya,{size:g},{default:()=>[h(q,{disabled:this.removeDisabled||N,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,circle:!0,onClick:()=>{A(y)}},{icon:()=>h(le,{clsPrefix:m},{default:()=>h(wa,null)})}),h(q,{disabled:this.insertionDisabled||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{M(y)}},{icon:()=>h(le,{clsPrefix:m},{default:()=>h(Ce,null)})}),e?h(q,{disabled:y===0||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{j("up",y)}},{icon:()=>h(le,{clsPrefix:m},{default:()=>h(qa,null)})}):null,e?h(q,{disabled:y===v.length-1||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{j("down",y)}},{icon:()=>h(le,{clsPrefix:m},{default:()=>h(He,null)})}):null]}))]))))}}),Fe={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};Oa(Fe);const tt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function nt(t,f){return w(),oe("svg",tt,f[0]||(f[0]=[je("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}const lt=Va({name:"ic-round-remove",render:nt});function ot(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>R(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>R(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>R(()=>import("./avatar-CQqEtg-V.js"),[]),"/src/assets/svg-icon/banner.svg":()=>R(()=>import("./banner-CFFAqDOx.js"),[]),"/src/assets/svg-icon/cast.svg":()=>R(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>R(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>R(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>R(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>R(()=>import("./empty-data-Df-AtTS4.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>R(()=>import("./expectation-BuEJD7SN.js"),[]),"/src/assets/svg-icon/heart.svg":()=>R(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>R(()=>import("./logo-BeLY4cv9.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>R(()=>import("./network-error-DDJxZniG.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>R(()=>import("./no-icon-lf9QfDPR.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>R(()=>import("./no-permission-CgHwmHj5.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>R(()=>import("./not-found-qgwLoIvx.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>R(()=>import("./service-error-BlNULCLM.js"),[]),"/src/assets/svg-icon/wind.svg":()=>R(()=>import("./wind-Dy5zdHKW.js"),[])})).map(g=>{var m;return((m=g.split("/").at(-1))==null?void 0:m.replace(".svg",""))||""}).filter(Boolean)}const ce="layout.",pe="view.",ze="$";function rt(t){let f="",g="";const[m="",v=""]=(t==null?void 0:t.split(ze))||[];return f=ut(m),g=st(v||m),{layout:f,page:g}}function ut(t){return t.startsWith(ce)?t.replace(ce,""):""}function st(t){return t.startsWith(pe)?t.replace(pe,""):""}function it(t,f){const g=!!t,m=!!f;return g&&m?`${ce}${t}${ze}${pe}${f}`:g?`${ce}${t}`:m?`${pe}${f}`:""}function dt(t){return`/${t.replace(/_/g,"/")}`}function ct(t){const[f,g=""]=t.split("/:");return{path:f,param:g}}function pt(t,f){return f.trim()?`${t}/:${f}`:t}const mt={class:"ml-8px flex-y-center flex-1 gap-12px"},gt=J({name:"MenuOperateModal",__name:"menu-operate-modal",props:De({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:De(["submitted"],["update:visible"]),setup(t,{emit:f}){const g=t,m=f,v=$a(t,"visible"),{formRef:V,validate:k,restoreValidation:$}=La(),{defaultRequiredRule:U}=ja(),O=z(()=>({add:l("page.manage.menu.addMenu"),addChild:l("page.manage.menu.addChildMenu"),edit:l("page.manage.menu.editMenu")})[g.operateType]),e=Aa(T());function T(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const D={menuName:U,status:U,routeName:U,routePath:U},G=z(()=>g.operateType==="edit"),M=ot().map(i=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(Ie,{localIcon:i,class:"text-icon"},null),a("span",null,[i])]),value:i})),j=z(()=>e.parentId===0),K=z(()=>e.menuType==="2"),N=z(()=>{const i=[...g.allPages];return e.routeName&&!i.includes(e.routeName)&&i.unshift(e.routeName),i.map(_=>({label:_,value:_}))}),x=[{label:"base",value:"base"},{label:"blank",value:"blank"}],y=ne([]);async function F(){const{error:i,data:u}=await Ze();if(!i){const _=u.map(I=>({label:I.roleName,value:I.roleCode}));y.value=[..._]}}function X(){if(Object.assign(e,T()),!!g.rowData){if(g.operateType==="addChild"){const{id:i}=g.rowData;Object.assign(e,{parentId:i})}if(g.operateType==="edit"){const{component:i,...u}=g.rowData,{layout:_,page:I}=rt(i),{path:b,param:C}=ct(u.routePath);Object.assign(e,u,{layout:_,page:I,routePath:b,pathParam:C})}e.query||(e.query=[]),e.buttons||(e.buttons=[])}}function Y(){v.value=!1}function B(){e.routeName?e.routePath=dt(e.routeName):e.routePath=""}function n(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function s(){return{code:"",desc:""}}function c(){const{layout:i,page:u,pathParam:_,...I}=e,b=it(i,u),C=pt(e.routePath,_);return I.component=b,I.routePath=C,I}async function p(){var I;await k();const i=c();console.log(i);const u={activeMenu:i.activeMenu,menuType:i.menuType,menuName:i.menuName,routeName:i.routeName,routePath:i.routePath,component:i.component,icon:i.icon,iconType:i.iconType,parentId:i.parentId,status:i.status,keepAlive:i.keepAlive,constant:i.constant,order:i.order,hideInMenu:i.hideInMenu,href:i.href,mutiTab:i.multiTab,fixedIndexInTab:i.fixedIndexInTab,query:i.query,buttons:i.buttons,i18nKey:i.i18nKey},{error:_}=await ea(u);_||((I=window.$message)==null||I.success(l("common.addSuccess")),Y(),m("submitted"))}return xe(v,()=>{v.value&&(X(),$(),F())}),xe(()=>e.routeName,()=>{B(),n()}),(i,u)=>{const _=aa,I=ta,b=na,C=de,ue=Ca,Re=Da,Ne=la,Q=q,we=lt,me=Fa,Oe=at,qe=za,Ge=Ka,We=xa,Ye=Ea;return w(),S(Ye,{show:v.value,"onUpdate:show":u[22]||(u[22]=o=>v.value=o),title:O.value,preset:"card",class:"w-800px"},{footer:d(()=>[a(me,{justify:"end",size:16},{default:d(()=>[a(Q,{onClick:Y},{default:d(()=>[Ee(Ue(r(l)("common.cancel")),1)]),_:1}),a(Q,{type:"primary",onClick:p},{default:d(()=>[Ee(Ue(r(l)("common.confirm")),1)]),_:1})]),_:1})]),default:d(()=>[a(We,{class:"h-480px pr-20px"},{default:d(()=>[a(Ge,{ref_key:"formRef",ref:V,model:e,rules:D,"label-placement":"left","label-width":100},{default:d(()=>[a(qe,{responsive:"screen","item-responsive":""},{default:d(()=>[a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuType"),path:"menuType"},{default:d(()=>[a(I,{value:e.menuType,"onUpdate:value":u[0]||(u[0]=o=>e.menuType=o),disabled:G.value},{default:d(()=>[(w(!0),oe(be,null,ye(r(Je),o=>(w(),S(_,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuName"),path:"menuName"},{default:d(()=>[a(C,{value:e.menuName,"onUpdate:value":u[1]||(u[1]=o=>e.menuName=o),placeholder:r(l)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.routeName"),path:"routeName"},{default:d(()=>[a(C,{value:e.routeName,"onUpdate:value":u[2]||(u[2]=o=>e.routeName=o),placeholder:r(l)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.routePath"),path:"routePath"},{default:d(()=>[a(C,{value:e.routePath,"onUpdate:value":u[3]||(u[3]=o=>e.routePath=o),disabled:"",placeholder:r(l)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.pathParam"),path:"pathParam"},{default:d(()=>[a(C,{value:e.pathParam,"onUpdate:value":u[4]||(u[4]=o=>e.pathParam=o),placeholder:r(l)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),j.value?(w(),S(b,{key:0,span:"24 m:12",label:r(l)("page.manage.menu.layout"),path:"layout"},{default:d(()=>[a(ue,{value:e.layout,"onUpdate:value":u[5]||(u[5]=o=>e.layout=o),options:x,placeholder:r(l)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):Z("",!0),K.value?(w(),S(b,{key:1,span:"24 m:12",label:r(l)("page.manage.menu.page"),path:"page"},{default:d(()=>[a(ue,{value:e.page,"onUpdate:value":u[6]||(u[6]=o=>e.page=o),options:N.value,placeholder:r(l)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:d(()=>[a(C,{value:e.i18nKey,"onUpdate:value":u[7]||(u[7]=o=>e.i18nKey=o),placeholder:r(l)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.order"),path:"order"},{default:d(()=>[a(Re,{value:e.order,"onUpdate:value":u[8]||(u[8]=o=>e.order=o),class:"w-full",placeholder:r(l)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:d(()=>[a(I,{value:e.iconType,"onUpdate:value":u[9]||(u[9]=o=>e.iconType=o)},{default:d(()=>[(w(!0),oe(be,null,ye(r(Xe),o=>(w(),S(_,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.icon"),path:"icon"},{default:d(()=>[e.iconType==="1"?(w(),S(C,{key:0,value:e.icon,"onUpdate:value":u[10]||(u[10]=o=>e.icon=o),placeholder:r(l)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:d(()=>[e.icon?(w(),S(Ie,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):Z("",!0)]),_:1},8,["value","placeholder"])):Z("",!0),e.iconType==="2"?(w(),S(ue,{key:1,value:e.icon,"onUpdate:value":u[11]||(u[11]=o=>e.icon=o),placeholder:r(l)("page.manage.menu.form.localIcon"),options:r(M)},null,8,["value","placeholder","options"])):Z("",!0)]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.menuStatus"),path:"status"},{default:d(()=>[a(I,{value:e.status,"onUpdate:value":u[12]||(u[12]=o=>e.status=o)},{default:d(()=>[(w(!0),oe(be,null,ye(r(Qe),o=>(w(),S(_,{key:o.value,value:o.value,label:r(l)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:d(()=>[a(I,{value:e.keepAlive,"onUpdate:value":u[13]||(u[13]=o=>e.keepAlive=o)},{default:d(()=>[a(_,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(_,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.constant"),path:"constant"},{default:d(()=>[a(I,{value:e.constant,"onUpdate:value":u[14]||(u[14]=o=>e.constant=o)},{default:d(()=>[a(_,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(_,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.href"),path:"href"},{default:d(()=>[a(C,{value:e.href,"onUpdate:value":u[15]||(u[15]=o=>e.href=o),placeholder:r(l)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:d(()=>[a(I,{value:e.hideInMenu,"onUpdate:value":u[16]||(u[16]=o=>e.hideInMenu=o)},{default:d(()=>[a(_,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(_,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.hideInMenu?(w(),S(b,{key:2,span:"24 m:12",label:r(l)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:d(()=>[a(ue,{value:e.activeMenu,"onUpdate:value":u[17]||(u[17]=o=>e.activeMenu=o),options:N.value,clearable:"",placeholder:r(l)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Z("",!0),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.multiTab"),path:"multiTab"},{default:d(()=>[a(I,{value:e.multiTab,"onUpdate:value":u[18]||(u[18]=o=>e.multiTab=o)},{default:d(()=>[a(_,{value:!0,label:r(l)("common.yesOrNo.yes")},null,8,["label"]),a(_,{value:!1,label:r(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(b,{span:"24 m:12",label:r(l)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:d(()=>[a(Re,{value:e.fixedIndexInTab,"onUpdate:value":u[19]||(u[19]=o=>e.fixedIndexInTab=o),class:"w-full",clearable:"",placeholder:r(l)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:r(l)("page.manage.menu.query")},{default:d(()=>[a(Oe,{value:e.query,"onUpdate:value":u[20]||(u[20]=o=>e.query=o),preset:"pair","key-placeholder":r(l)("page.manage.menu.form.queryKey"),"value-placeholder":r(l)("page.manage.menu.form.queryValue")},{action:d(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:d(()=>[a(Q,{size:"medium",onClick:()=>H(o)},{default:d(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Q,{size:"medium",onClick:()=>ge(o)},{default:d(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(b,{span:"24",label:r(l)("page.manage.menu.button")},{default:d(()=>[a(Oe,{value:e.buttons,"onUpdate:value":u[21]||(u[21]=o=>e.buttons=o),"on-create":s},{default:d(({value:o})=>[je("div",mt,[a(C,{value:o.code,"onUpdate:value":H=>o.code=H,placeholder:r(l)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(C,{value:o.desc,"onUpdate:value":H=>o.desc=H,placeholder:r(l)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:d(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:d(()=>[a(Q,{size:"medium",onClick:()=>H(o)},{default:d(()=>[a(Ne,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Q,{size:"medium",onClick:()=>ge(o)},{default:d(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function te(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Sa(t)}const _t=J({name:"manage_menu",__name:"index",setup(t){const f=Ua(),{bool:g,setTrue:m}=Ma(),v=ne(null),{columns:V,columnChecks:k,data:$,loading:U,pagination:O,getData:e,getDataByPage:T}=oa({apiFn:ua,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:l("page.manage.menu.id"),align:"center"},{key:"menuType",title:l("page.manage.menu.menuType"),align:"center",width:80,render:n=>{const s={1:"default",2:"primary"},c=l(sa[n.menuType]);return a(Pe,{type:s[n.menuType]},te(c)?c:{default:()=>[c]})}},{key:"menuName",title:l("page.manage.menu.menuName"),align:"center",minWidth:120,render:n=>{const{i18nKey:s,menuName:c}=n,p=s?l(s):c;return a("span",null,[p])}},{key:"icon",title:l("page.manage.menu.icon"),align:"center",width:60,render:n=>{const s=n.iconType==="1"?n.icon:void 0,c=n.iconType==="2"?n.icon:void 0;return a("div",{class:"flex-center"},[a(Ie,{icon:s,localIcon:c,class:"text-icon"},null)])}},{key:"routeName",title:l("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:l("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:l("page.manage.menu.menuStatus"),align:"center",width:80,render:n=>{if(n.status===null)return null;const s={1:"success",2:"warning"},c=l(ia[n.status]);return a(Pe,{type:s[n.status]},te(c)?c:{default:()=>[c]})}},{key:"hideInMenu",title:l("page.manage.menu.hideInMenu"),align:"center",width:80,render:n=>{const s=n.hideInMenu?"Y":"N",c={Y:"error",N:"default"},p=l(Fe[s]);return a(Pe,{type:c[s]},te(p)?p:{default:()=>[p]})}},{key:"parentId",title:l("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:l("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:l("common.operate"),align:"center",width:230,render:n=>{let s,c;return a("div",{class:"flex-center justify-end gap-8px"},[n.menuType==="1"&&a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>F(n)},te(s=l("page.manage.menu.addChildMenu"))?s:{default:()=>[s]}),a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>y(n)},te(c=l("common.edit"))?c:{default:()=>[c]}),a(da,{onPositiveClick:()=>N(n.id)},{default:()=>l("common.confirmDelete"),trigger:()=>{let p;return a(q,{type:"error",ghost:!0,size:"small"},te(p=l("common.delete"))?p:{default:()=>[p]})}})])}}]}),{checkedRowKeys:D,onBatchDeleted:G,onDeleted:A}=ra($,e),M=ne("add");function j(){M.value="add",m()}async function K(){console.log(D.value),G()}function N(n){console.log(n),A()}const x=ne(null);function y(n){M.value="edit",x.value={...n},m()}function F(n){M.value="addChild",x.value={...n},m()}const X=ne([]);async function Y(){const{data:n}=await ma();X.value=n||[]}function B(){Y()}return B(),(n,s)=>{const c=ca,p=pa,i=Ba;return w(),oe("div",{ref_key:"wrapperRef",ref:v,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(i,{title:r(l)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":d(()=>[a(c,{columns:r(k),"onUpdate:columns":s[0]||(s[0]=u=>_e(k)?k.value=u:null),"disabled-delete":r(D).length===0,loading:r(U),onAdd:j,onDelete:K,onRefresh:r(e)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:d(()=>[a(p,{"checked-row-keys":r(D),"onUpdate:checkedRowKeys":s[1]||(s[1]=u=>_e(D)?D.value=u:null),columns:r(V),data:r($),size:"small","flex-height":!r(f).isMobile,"scroll-x":1088,loading:r(U),"row-key":u=>u.id,remote:"",pagination:r(O),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(gt,{visible:r(g),"onUpdate:visible":s[2]||(s[2]=u=>_e(g)?g.value=u:null),"operate-type":M.value,"row-data":x.value,"all-pages":X.value,onSubmitted:r(T)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{_t as default};
