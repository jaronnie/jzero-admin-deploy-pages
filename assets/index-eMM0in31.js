import{A as Je,m as Xe,a as Qe,e as Ze,G as ea,b as aa,E as ta,_ as na,c as la,d as oa,f as ra,u as ua,g as sa,h as ia,i as da,j as ca,N as pa,D as ma,k as ga,l as fa,n as va}from"./business-C03AvebO.js";import{d as J,a1 as b,L as M,M as Ve,K as L,N as Y,O as re,U as Ue,ag as ha,a8 as Se,ah as ya,a6 as Be,ai as ba,aj as _a,ak as Ia,al as Pa,am as Ta,aa as ka,ab as Te,v as de,an as Na,r as te,a9 as se,ao as Ra,V as Le,a as z,Y as wa,ap as Oa,B as q,aq as $e,ar as De,as as fe,at as ve,au as Va,av as le,aw as xe,ax as $a,ay as he,az as Da,ae as xa,o as V,b as oe,e as Ke,aA as k,aB as Ae,aC as Aa,$ as n,p as je,f as a,_ as Pe,aD as Ce,c as B,w as p,g as Me,t as Ee,h as r,a3 as ye,a4 as be,aE as Q,aF as Ca,aG as Ma,aH as Ea,aI as Ua,A as Sa,aJ as Ba,aK as _e,a5 as Ie,J as La,aL as Ka}from"./index-CBj7qoDI.js";import{u as ja,a as Fa,b as za}from"./form-BupHiBMX.js";import{_ as qa}from"./Space--jFqj473.js";import{a as Ga}from"./Grid-T2nzqU8k.js";const Wa=J({name:"ArrowUp",render(){return b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},b("g",{fill:"none"},b("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),P="0!important",Fe="-1px!important";function Z(t){return Y(`${t}-type`,[L("& +",[M("button",{},[Y(`${t}-type`,[re("border",{borderLeftWidth:P}),re("state-border",{left:Fe})])])])])}function ee(t){return Y(`${t}-type`,[L("& +",[M("button",[Y(`${t}-type`,[re("border",{borderTopWidth:P}),re("state-border",{top:Fe})])])])])}const Ya=M("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[Ve("vertical",{flexDirection:"row"},[Ve("rtl",[M("button",[L("&:first-child:not(:last-child)",`
 margin-right: ${P};
 border-top-right-radius: ${P};
 border-bottom-right-radius: ${P};
 `),L("&:last-child:not(:first-child)",`
 margin-left: ${P};
 border-top-left-radius: ${P};
 border-bottom-left-radius: ${P};
 `),L("&:not(:first-child):not(:last-child)",`
 margin-left: ${P};
 margin-right: ${P};
 border-radius: ${P};
 `),Z("default"),Y("ghost",[Z("primary"),Z("info"),Z("success"),Z("warning"),Z("error")])])])]),Y("vertical",{flexDirection:"column"},[M("button",[L("&:first-child:not(:last-child)",`
 margin-bottom: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-bottom-left-radius: ${P};
 border-bottom-right-radius: ${P};
 `),L("&:last-child:not(:first-child)",`
 margin-top: ${P};
 margin-left: ${P};
 margin-right: ${P};
 border-top-left-radius: ${P};
 border-top-right-radius: ${P};
 `),L("&:not(:first-child):not(:last-child)",`
 margin: ${P};
 border-radius: ${P};
 `),ee("default"),Y("ghost",[ee("primary"),ee("info"),ee("success"),ee("warning"),ee("error")])])])]),Ha={size:{type:String,default:void 0},vertical:Boolean},Ja=J({name:"ButtonGroup",props:Ha,setup(t){const{mergedClsPrefixRef:v,mergedRtlRef:g}=Ue(t);return ha("-button-group",Ya,v),Se(ya,t),{rtlEnabled:Be("ButtonGroup",g,v),mergedClsPrefix:v}},render(){const{mergedClsPrefix:t}=this;return b("div",{class:[`${t}-button-group`,this.rtlEnabled&&`${t}-button-group--rtl`,this.vertical&&`${t}-button-group--vertical`],role:"group"},this.$slots)}});function Xa(){return Ta}const Qa=ba({name:"DynamicInput",common:_a,peers:{Input:Ia,Button:Pa},self:Xa}),ke=ka("n-dynamic-input"),Za=J({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:t,placeholderRef:v}=Te(ke);return{mergedTheme:t,placeholder:v}},render(){const{mergedTheme:t,placeholder:v,value:g,clsPrefix:f,onUpdateValue:y,disabled:D}=this;return b("div",{class:`${f}-dynamic-input-preset-input`},b(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:g,placeholder:v,onUpdateValue:y,disabled:D}))}}),et=J({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(t){const{mergedThemeRef:v,keyPlaceholderRef:g,valuePlaceholderRef:f}=Te(ke);return{mergedTheme:v,keyPlaceholder:g,valuePlaceholder:f,handleKeyInput(y){t.onUpdateValue({key:y,value:t.value.value})},handleValueInput(y){t.onUpdateValue({key:t.value.key,value:y})}}},render(){const{mergedTheme:t,keyPlaceholder:v,valuePlaceholder:g,value:f,clsPrefix:y,disabled:D}=this;return b("div",{class:`${y}-dynamic-input-preset-pair`},b(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:f.key,class:`${y}-dynamic-input-pair-input`,placeholder:v,onUpdateValue:this.handleKeyInput,disabled:D}),b(de,{theme:t.peers.Input,"theme-overrides":t.peerOverrides.Input,value:f.value,class:`${y}-dynamic-input-pair-input`,placeholder:g,onUpdateValue:this.handleValueInput,disabled:D}))}}),at=M("dynamic-input",{width:"100%"},[M("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[M("dynamic-input-preset-input",{flex:1,alignItems:"center"}),M("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[M("dynamic-input-pair-input",[L("&:first-child",{"margin-right":"12px"})])]),re("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Y("icon",{cursor:"pointer"})]),L("&:last-child",{marginBottom:0})]),M("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[M("form-item-blank",{paddingTop:"0 !important"})])]),ie=new WeakMap,tt=Object.assign(Object.assign({},Le.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),nt=J({name:"DynamicInput",props:tt,setup(t,{slots:v}){const{mergedComponentPropsRef:g,mergedClsPrefixRef:f,mergedRtlRef:y,inlineThemeDisabled:D}=Ue(),N=Te(Na,null),$=te(t.defaultValue),E=se(t,"value"),w=Ra(E,$),e=Le("DynamicInput","-dynamic-input",at,Qa,t,f),T=z(()=>{const{value:c}=w;if(Array.isArray(c)){const{max:l}=t;return l!==void 0&&c.length>=l}return!1}),G=z(()=>{const{value:c}=w;return Array.isArray(c)?c.length<=t.min:!0}),A=z(()=>{var c,l;return(l=(c=g==null?void 0:g.value)===null||c===void 0?void 0:c.DynamicInput)===null||l===void 0?void 0:l.buttonSize});function x(c){const{onInput:l,"onUpdate:value":d,onUpdateValue:i}=t;l&&he(l,c),d&&he(d,c),i&&he(i,c),$.value=c}function W(c,l){if(c==null||typeof c!="object")return l;const d=fe(c)?ve(c):c;let i=ie.get(d);return i===void 0&&ie.set(d,i=Va()),i}function C(c,l){const{value:d}=w,i=Array.from(d??[]),m=i[c];if(i[c]=l,m&&l&&typeof m=="object"&&typeof l=="object"){const u=fe(m)?ve(m):m,h=fe(l)?ve(l):l,s=ie.get(u);s!==void 0&&ie.set(h,s)}x(i)}function K(){O(-1)}function O(c){const{value:l}=w,{onCreate:d}=t,i=Array.from(l??[]);if(d)i.splice(c+1,0,d(c+1)),x(i);else if(v.default)i.splice(c+1,0,null),x(i);else switch(t.preset){case"input":i.splice(c+1,0,""),x(i);break;case"pair":i.splice(c+1,0,{key:"",value:""}),x(i);break}}function U(c){const{value:l}=w;if(!Array.isArray(l))return;const{min:d}=t;if(l.length<=d)return;const{onRemove:i}=t;i&&i(c);const m=Array.from(l);m.splice(c,1),x(m)}function I(c,l,d){if(l<0||d<0||l>=c.length||d>=c.length||l===d)return;const i=c[l];c[l]=c[d],c[d]=i}function j(c,l){const{value:d}=w;if(!Array.isArray(d))return;const i=Array.from(d);c==="up"&&I(i,l,l-1),c==="down"&&I(i,l,l+1),x(i)}Se(ke,{mergedThemeRef:e,keyPlaceholderRef:se(t,"keyPlaceholder"),valuePlaceholderRef:se(t,"valuePlaceholder"),placeholderRef:se(t,"placeholder")});const ne=Be("DynamicInput",y,f),F=z(()=>{const{self:{actionMargin:c,actionMarginRtl:l}}=e.value;return{"--action-margin":c,"--action-margin-rtl":l}}),S=D?wa("dynamic-input",void 0,F,t):void 0;return{locale:Oa("DynamicInput").localeRef,rtlEnabled:ne,buttonSize:A,mergedClsPrefix:f,NFormItem:N,uncontrolledValue:$,mergedValue:w,insertionDisabled:T,removeDisabled:G,handleCreateClick:K,ensureKey:W,handleValueChange:C,remove:U,move:j,createItem:O,mergedTheme:e,cssVars:D?void 0:F,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){const{$slots:t,itemClass:v,buttonSize:g,mergedClsPrefix:f,mergedValue:y,locale:D,mergedTheme:N,keyField:$,itemStyle:E,preset:w,showSortButton:e,NFormItem:T,ensureKey:G,handleValueChange:A,remove:x,createItem:W,move:C,onRender:K,disabled:O}=this;return K==null||K(),b("div",{class:[`${f}-dynamic-input`,this.rtlEnabled&&`${f}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(y)||y.length===0?b(q,Object.assign({block:!0,ghost:!0,dashed:!0,size:g},this.createButtonProps,{disabled:this.insertionDisabled||O,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>$e(t["create-button-default"],()=>[D.create]),icon:()=>$e(t["create-button-icon"],()=>[b(le,{clsPrefix:f},{default:()=>b(xe,null)})])}):y.map((U,I)=>b("div",{key:$?U[$]:G(U,I),"data-key":$?U[$]:G(U,I),class:[`${f}-dynamic-input-item`,v],style:E},De(t.default,{value:y[I],index:I},()=>[w==="input"?b(Za,{disabled:O,clsPrefix:f,value:y[I],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${I}]`:void 0,onUpdateValue:j=>{A(I,j)}}):w==="pair"?b(et,{disabled:O,clsPrefix:f,value:y[I],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${I}]`:void 0,onUpdateValue:j=>{A(I,j)}}):null]),De(t.action,{value:y[I],index:I,create:W,remove:x,move:C},()=>[b("div",{class:`${f}-dynamic-input-item__action`},b(Ja,{size:g},{default:()=>[b(q,{disabled:this.removeDisabled||O,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,circle:!0,onClick:()=>{x(I)}},{icon:()=>b(le,{clsPrefix:f},{default:()=>b($a,null)})}),b(q,{disabled:this.insertionDisabled||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{W(I)}},{icon:()=>b(le,{clsPrefix:f},{default:()=>b(xe,null)})}),e?b(q,{disabled:I===0||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{C("up",I)}},{icon:()=>b(le,{clsPrefix:f},{default:()=>b(Wa,null)})}):null,e?b(q,{disabled:I===y.length-1||O,circle:!0,theme:N.peers.Button,themeOverrides:N.peerOverrides.Button,onClick:()=>{C("down",I)}},{icon:()=>b(le,{clsPrefix:f},{default:()=>b(Je,null)})}):null]}))]))))}}),ze={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};Da(ze);const lt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function ot(t,v){return V(),oe("svg",lt,v[0]||(v[0]=[Ke("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}const rt=xa({name:"ic-round-remove",render:ot});function ut(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>k(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>k(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>k(()=>import("./avatar-CQqEtg-V.js"),[]),"/src/assets/svg-icon/banner.svg":()=>k(()=>import("./banner-CFFAqDOx.js"),[]),"/src/assets/svg-icon/cast.svg":()=>k(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>k(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>k(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>k(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>k(()=>import("./empty-data-Df-AtTS4.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>k(()=>import("./expectation-BuEJD7SN.js"),[]),"/src/assets/svg-icon/heart.svg":()=>k(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>k(()=>import("./logo-BeLY4cv9.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>k(()=>import("./network-error-DDJxZniG.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>k(()=>import("./no-icon-lf9QfDPR.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>k(()=>import("./no-permission-CgHwmHj5.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>k(()=>import("./not-found-qgwLoIvx.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>k(()=>import("./service-error-BlNULCLM.js"),[]),"/src/assets/svg-icon/wind.svg":()=>k(()=>import("./wind-Dy5zdHKW.js"),[])})).map(g=>{var f;return((f=g.split("/").at(-1))==null?void 0:f.replace(".svg",""))||""}).filter(Boolean)}const ce="layout.",pe="view.",qe="$";function st(t){let v="",g="";const[f="",y=""]=(t==null?void 0:t.split(qe))||[];return v=it(f),g=dt(y||f),{layout:v,page:g}}function it(t){return t.startsWith(ce)?t.replace(ce,""):""}function dt(t){return t.startsWith(pe)?t.replace(pe,""):""}function ct(t,v){const g=!!t,f=!!v;return g&&f?`${ce}${t}${qe}${pe}${v}`:g?`${ce}${t}`:f?`${pe}${v}`:""}function pt(t){return`/${t.replace(/_/g,"/")}`}function mt(t){const[v,g=""]=t.split("/:");return{path:v,param:g}}function gt(t,v){return v.trim()?`${t}/:${v}`:t}const ft={class:"ml-8px flex-y-center flex-1 gap-12px"},vt=J({name:"MenuOperateModal",__name:"menu-operate-modal",props:Ae({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Ae(["submitted"],["update:visible"]),setup(t,{emit:v}){const g=t,f=v,y=Aa(t,"visible"),{formRef:D,validate:N,restoreValidation:$}=ja(),{defaultRequiredRule:E}=Fa(),w=z(()=>({add:n("page.manage.menu.addMenu"),addChild:n("page.manage.menu.addChildMenu"),edit:n("page.manage.menu.editMenu")})[g.operateType]),e=je(T());function T(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,status:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const G={menuName:E,status:E,routeName:E,routePath:E},A=z(()=>g.operateType==="edit"),W=ut().map(m=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(Pe,{localIcon:m,class:"text-icon"},null),a("span",null,[m])]),value:m})),C=z(()=>e.parentId===0),K=z(()=>e.menuType==="2"),O=z(()=>{const m=[...g.allPages];return e.routeName&&!m.includes(e.routeName)&&m.unshift(e.routeName),m.map(h=>({label:h,value:h}))}),U=[{label:"base",value:"base"},{label:"blank",value:"blank"}],I=te([]);async function j(){const{error:m,data:u}=await ea();if(!m){const h=u.map(s=>({label:s.roleName,value:s.roleCode}));I.value=[...h]}}function ne(){if(Object.assign(e,T()),!!g.rowData){if(g.operateType==="addChild"){const{id:m}=g.rowData;Object.assign(e,{parentId:m})}if(g.operateType==="edit"){const{component:m,...u}=g.rowData,{layout:h,page:s}=st(m),{path:_,param:R}=mt(u.routePath);Object.assign(e,u,{layout:h,page:s,routePath:_,pathParam:R})}e.query||(e.query=[]),e.buttons||(e.buttons=[])}}function F(){y.value=!1}function S(){e.routeName?e.routePath=pt(e.routeName):e.routePath=""}function c(){e.routeName?e.i18nKey=`route.${e.routeName}`:e.i18nKey=null}function l(){return{code:"",desc:""}}function d(){const{layout:m,page:u,pathParam:h,...s}=e,_=ct(m,u),R=gt(e.routePath,h);return s.component=_,s.routePath=R,s}async function i(){var m,u,h;if(g.operateType==="add"){await N();const s=d(),_={activeMenu:s.activeMenu,menuType:s.menuType,menuName:s.menuName,routeName:s.routeName,routePath:s.routePath,component:s.component,icon:s.icon,iconType:s.iconType,parentId:s.parentId,status:s.status,keepAlive:s.keepAlive,constant:s.constant,order:s.order,hideInMenu:s.hideInMenu,href:s.href,mutiTab:s.multiTab,fixedIndexInTab:s.fixedIndexInTab,query:s.query,buttons:s.buttons,i18nKey:s.i18nKey},{error:R}=await aa(_);R||((m=window.$message)==null||m.success(n("common.addSuccess")),F(),f("submitted"))}else if(g.operateType==="edit"){await N();const s=d(),_={id:(u=g.rowData)==null?void 0:u.id,activeMenu:s.activeMenu,menuType:s.menuType,menuName:s.menuName,routeName:s.routeName,routePath:s.routePath,component:s.component,icon:s.icon,iconType:s.iconType,parentId:s.parentId,status:s.status,keepAlive:s.keepAlive,constant:s.constant,order:s.order,hideInMenu:s.hideInMenu,href:s.href,mutiTab:s.multiTab,fixedIndexInTab:s.fixedIndexInTab,query:s.query,buttons:s.buttons,i18nKey:s.i18nKey},{error:R}=await ta(_);R||((h=window.$message)==null||h.success(n("common.addSuccess")),F(),f("submitted"))}}return Ce(y,()=>{y.value&&(ne(),$(),j())}),Ce(()=>e.routeName,()=>{S(),c()}),(m,u)=>{const h=na,s=la,_=oa,R=de,ue=Ca,Ne=Ma,Re=ra,X=q,we=rt,me=qa,Oe=nt,Ge=Ga,We=za,Ye=Ea,He=Ua;return V(),B(He,{show:y.value,"onUpdate:show":u[22]||(u[22]=o=>y.value=o),title:w.value,preset:"card",class:"w-800px"},{footer:p(()=>[a(me,{justify:"end",size:16},{default:p(()=>[a(X,{onClick:F},{default:p(()=>[Me(Ee(r(n)("common.cancel")),1)]),_:1}),a(X,{type:"primary",onClick:i},{default:p(()=>[Me(Ee(r(n)("common.confirm")),1)]),_:1})]),_:1})]),default:p(()=>[a(Ye,{class:"h-480px pr-20px"},{default:p(()=>[a(We,{ref_key:"formRef",ref:D,model:e,rules:G,"label-placement":"left","label-width":100},{default:p(()=>[a(Ge,{responsive:"screen","item-responsive":""},{default:p(()=>[a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuType"),path:"menuType"},{default:p(()=>[a(s,{value:e.menuType,"onUpdate:value":u[0]||(u[0]=o=>e.menuType=o),disabled:A.value},{default:p(()=>[(V(!0),oe(be,null,ye(r(Xe),o=>(V(),B(h,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuName"),path:"menuName"},{default:p(()=>[a(R,{value:e.menuName,"onUpdate:value":u[1]||(u[1]=o=>e.menuName=o),placeholder:r(n)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.routeName"),path:"routeName"},{default:p(()=>[a(R,{value:e.routeName,"onUpdate:value":u[2]||(u[2]=o=>e.routeName=o),placeholder:r(n)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.routePath"),path:"routePath"},{default:p(()=>[a(R,{value:e.routePath,"onUpdate:value":u[3]||(u[3]=o=>e.routePath=o),disabled:"",placeholder:r(n)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.pathParam"),path:"pathParam"},{default:p(()=>[a(R,{value:e.pathParam,"onUpdate:value":u[4]||(u[4]=o=>e.pathParam=o),placeholder:r(n)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),C.value?(V(),B(_,{key:0,span:"24 m:12",label:r(n)("page.manage.menu.layout"),path:"layout"},{default:p(()=>[a(ue,{value:e.layout,"onUpdate:value":u[5]||(u[5]=o=>e.layout=o),options:U,placeholder:r(n)("page.manage.menu.form.layout")},null,8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0),K.value?(V(),B(_,{key:1,span:"24 m:12",label:r(n)("page.manage.menu.page"),path:"page"},{default:p(()=>[a(ue,{value:e.page,"onUpdate:value":u[6]||(u[6]=o=>e.page=o),options:O.value,placeholder:r(n)("page.manage.menu.form.page")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:p(()=>[a(R,{value:e.i18nKey,"onUpdate:value":u[7]||(u[7]=o=>e.i18nKey=o),placeholder:r(n)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.order"),path:"order"},{default:p(()=>[a(Ne,{value:e.order,"onUpdate:value":u[8]||(u[8]=o=>e.order=o),class:"w-full",placeholder:r(n)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:p(()=>[a(s,{value:e.iconType,"onUpdate:value":u[9]||(u[9]=o=>e.iconType=o)},{default:p(()=>[(V(!0),oe(be,null,ye(r(Qe),o=>(V(),B(h,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.icon"),path:"icon"},{default:p(()=>[e.iconType==="1"?(V(),B(R,{key:0,value:e.icon,"onUpdate:value":u[10]||(u[10]=o=>e.icon=o),placeholder:r(n)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:p(()=>[e.icon?(V(),B(Pe,{key:0,icon:e.icon,class:"text-icon"},null,8,["icon"])):Q("",!0)]),_:1},8,["value","placeholder"])):Q("",!0),e.iconType==="2"?(V(),B(ue,{key:1,value:e.icon,"onUpdate:value":u[11]||(u[11]=o=>e.icon=o),placeholder:r(n)("page.manage.menu.form.localIcon"),options:r(W)},null,8,["value","placeholder","options"])):Q("",!0)]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.menuStatus"),path:"status"},{default:p(()=>[a(s,{value:e.status,"onUpdate:value":u[12]||(u[12]=o=>e.status=o)},{default:p(()=>[(V(!0),oe(be,null,ye(r(Ze),o=>(V(),B(h,{key:o.value,value:o.value,label:r(n)(o.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:p(()=>[a(s,{value:e.keepAlive,"onUpdate:value":u[13]||(u[13]=o=>e.keepAlive=o)},{default:p(()=>[a(h,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(h,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.constant"),path:"constant"},{default:p(()=>[a(s,{value:e.constant,"onUpdate:value":u[14]||(u[14]=o=>e.constant=o)},{default:p(()=>[a(h,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(h,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.href"),path:"href"},{default:p(()=>[a(R,{value:e.href,"onUpdate:value":u[15]||(u[15]=o=>e.href=o),placeholder:r(n)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:p(()=>[a(s,{value:e.hideInMenu,"onUpdate:value":u[16]||(u[16]=o=>e.hideInMenu=o)},{default:p(()=>[a(h,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(h,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.hideInMenu?(V(),B(_,{key:2,span:"24 m:12",label:r(n)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:p(()=>[a(ue,{value:e.activeMenu,"onUpdate:value":u[17]||(u[17]=o=>e.activeMenu=o),options:O.value,clearable:"",placeholder:r(n)("page.manage.menu.form.activeMenu")},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.multiTab"),path:"multiTab"},{default:p(()=>[a(s,{value:e.multiTab,"onUpdate:value":u[18]||(u[18]=o=>e.multiTab=o)},{default:p(()=>[a(h,{value:!0,label:r(n)("common.yesOrNo.yes")},null,8,["label"]),a(h,{value:!1,label:r(n)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:r(n)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:p(()=>[a(Ne,{value:e.fixedIndexInTab,"onUpdate:value":u[19]||(u[19]=o=>e.fixedIndexInTab=o),class:"w-full",clearable:"",placeholder:r(n)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:r(n)("page.manage.menu.query")},{default:p(()=>[a(Oe,{value:e.query,"onUpdate:value":u[20]||(u[20]=o=>e.query=o),preset:"pair","key-placeholder":r(n)("page.manage.menu.form.queryKey"),"value-placeholder":r(n)("page.manage.menu.form.queryValue")},{action:p(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:p(()=>[a(X,{size:"medium",onClick:()=>H(o)},{default:p(()=>[a(Re,{class:"text-icon"})]),_:2},1032,["onClick"]),a(X,{size:"medium",onClick:()=>ge(o)},{default:p(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:r(n)("page.manage.menu.button")},{default:p(()=>[a(Oe,{value:e.buttons,"onUpdate:value":u[21]||(u[21]=o=>e.buttons=o),"on-create":l},{default:p(({value:o})=>[Ke("div",ft,[a(R,{value:o.code,"onUpdate:value":H=>o.code=H,placeholder:r(n)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(R,{value:o.desc,"onUpdate:value":H=>o.desc=H,placeholder:r(n)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:p(({index:o,create:H,remove:ge})=>[a(me,{class:"ml-12px"},{default:p(()=>[a(X,{size:"medium",onClick:()=>H(o)},{default:p(()=>[a(Re,{class:"text-icon"})]),_:2},1032,["onClick"]),a(X,{size:"medium",onClick:()=>ge(o)},{default:p(()=>[a(we,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function ae(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Ka(t)}const Pt=J({name:"manage_menu",__name:"index",setup(t){const v=Sa(),g=je({}),{bool:f,setTrue:y}=Ba(),D=te(null),{columns:N,columnChecks:$,data:E,loading:w,pagination:e,getData:T,getDataByPage:G}=ua({apiFn:ia,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:n("page.manage.menu.id"),align:"center"},{key:"menuType",title:n("page.manage.menu.menuType"),align:"center",width:80,render:l=>{const d={1:"default",2:"primary"},i=n(da[l.menuType]);return a(Ie,{type:d[l.menuType]},ae(i)?i:{default:()=>[i]})}},{key:"menuName",title:n("page.manage.menu.menuName"),align:"center",minWidth:120,render:l=>{const{i18nKey:d,menuName:i}=l,m=d?n(d):i;return a("span",null,[m])}},{key:"icon",title:n("page.manage.menu.icon"),align:"center",width:60,render:l=>{const d=l.iconType==="1"?l.icon:void 0,i=l.iconType==="2"?l.icon:void 0;return a("div",{class:"flex-center"},[a(Pe,{icon:d,localIcon:i,class:"text-icon"},null)])}},{key:"routeName",title:n("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:n("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"status",title:n("page.manage.menu.menuStatus"),align:"center",width:80,render:l=>{if(l.status===null)return null;const d={1:"success",2:"warning"},i=n(ca[l.status]);return a(Ie,{type:d[l.status]},ae(i)?i:{default:()=>[i]})}},{key:"hideInMenu",title:n("page.manage.menu.hideInMenu"),align:"center",width:80,render:l=>{const d=l.hideInMenu?"Y":"N",i={Y:"error",N:"default"},m=n(ze[d]);return a(Ie,{type:i[d]},ae(m)?m:{default:()=>[m]})}},{key:"parentId",title:n("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:n("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:n("common.operate"),align:"center",width:230,render:l=>{let d,i;return a("div",{class:"flex-center justify-end gap-8px"},[l.menuType==="1"&&a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>ne(l)},ae(d=n("page.manage.menu.addChildMenu"))?d:{default:()=>[d]}),a(q,{type:"primary",ghost:!0,size:"small",onClick:()=>j(l)},ae(i=n("common.edit"))?i:{default:()=>[i]}),a(pa,{onPositiveClick:()=>U(l.id)},{default:()=>n("common.confirmDelete"),trigger:()=>{let m;return a(q,{loading:g[l.id],type:"error",ghost:!0,size:"small"},ae(m=n("common.delete"))?m:{default:()=>[m]})}})])}}]}),{checkedRowKeys:A,onBatchDeleted:x,onDeleted:W}=sa(E,T),C=te("add");function K(){C.value="add",y()}async function O(){console.log(A.value),x()}async function U(l){const d=[l];g[l]=!0;const{error:i}=await ma(d);g[l]=!1,!i&&W()}const I=te(null);function j(l){C.value="edit",I.value={...l},y()}function ne(l){C.value="addChild",I.value={...l},y()}const F=te([]);async function S(){const{data:l}=await va();F.value=l||[]}function c(){S()}return c(),(l,d)=>{const i=ga,m=fa,u=La;return V(),oe("div",{ref_key:"wrapperRef",ref:D,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(u,{title:r(n)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":p(()=>[a(i,{columns:r($),"onUpdate:columns":d[0]||(d[0]=h=>_e($)?$.value=h:null),"disabled-delete":r(A).length===0,loading:r(w),onAdd:K,onDelete:O,onRefresh:r(T)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:p(()=>[a(m,{"checked-row-keys":r(A),"onUpdate:checkedRowKeys":d[1]||(d[1]=h=>_e(A)?A.value=h:null),columns:r(N),data:r(E),size:"small","flex-height":!r(v).isMobile,"scroll-x":1088,loading:r(w),"row-key":h=>h.id,remote:"",pagination:r(e),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(vt,{visible:r(f),"onUpdate:visible":d[2]||(d[2]=h=>_e(f)?f.value=h:null),"operate-type":C.value,"row-data":I.value,"all-pages":F.value,onSubmitted:r(G)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{Pt as default};
