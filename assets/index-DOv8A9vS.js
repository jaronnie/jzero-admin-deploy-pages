import{r as q,a as $,k as A,l as W,d as z,m as K,o as S,b as L,e as p,n as H,u as F,p as M,c as U,w as a,f as o,h as e,$ as s,g as k,t as v,q as R,s as B,v as E,x as Z,B as I,y as J,S as Q,z as X,A as Y,C as ee,D as oe,T as le,E as ne,F as te,G as ae,H as se,I as re,J as ie}from"./index-FJqBwoy_.js";import{u as G,a as T,_ as D,b as O,R as de,c as ce}from"./form-xPyKlAZw.js";import{_ as V}from"./Space-dhFrRzkT.js";function pe(C){const u=q(0),m=$(()=>Math.ceil(u.value/60)),h=$(()=>u.value>0),{pause:r,resume:x}=A(()=>{u.value>0?u.value-=1:r()},{immediate:!1});function y(t=C){u.value=60*t,x()}function i(){u.value=0,r()}return W(()=>{r()}),{count:m,isCounting:h,start:y,stop:i}}const ue={class:"absolute-lt z-1 size-full overflow-hidden"},me={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},fe={height:"1337",width:"1337"},ge={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},_e=["stop-color"],we=["stop-color"],ve={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},he={height:"896",width:"967.8852157128662"},ye={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},Ce=["stop-color"],xe=["stop-color"],be=z({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(C){const w=C,u=$(()=>K(w.themeColor,200)),m=$(()=>K(w.themeColor,500));return(h,r)=>(S(),L("div",ue,[p("div",me,[(S(),L("svg",fe,[p("defs",null,[r[0]||(r[0]=p("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),p("linearGradient",ge,[p("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,_e),p("stop",{offset:"1","stop-color":m.value,"stop-opacity":"1"},null,8,we)])]),r[1]||(r[1]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),p("div",ve,[(S(),L("svg",he,[p("defs",null,[r[2]||(r[2]=p("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),p("linearGradient",ye,[p("stop",{offset:"0","stop-color":m.value,"stop-opacity":"1"},null,8,Ce),p("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,xe)])]),r[3]||(r[3]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),ke={class:"flex-y-center justify-between"},Pe={class:"flex-y-center justify-between gap-12px"},$e=z({name:"PwdLogin",__name:"pwd-login",setup(C){const w=H(),{toggleLoginModule:u}=F(),{formRef:m,validate:h}=G(),r=M({username:"jzero",password:"123456"}),x=$(()=>{const{formRules:i}=T();return{username:i.username,password:i.pwd}});async function y(){await h(),await w.login(r.username,r.password)}return(i,t)=>{const b=E,f=D,n=Z,l=I,d=V,c=O;return S(),U(c,{ref_key:"formRef",ref:m,model:r,rules:x.value,size:"large","show-label":!1,onKeyup:B(y,["enter"])},{default:a(()=>[o(f,{path:"username"},{default:a(()=>[o(b,{value:r.username,"onUpdate:value":t[0]||(t[0]=g=>r.username=g),placeholder:e(s)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(f,{path:"password"},{default:a(()=>[o(b,{value:r.password,"onUpdate:value":t[1]||(t[1]=g=>r.password=g),type:"password","show-password-on":"click",placeholder:e(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(d,{vertical:"",size:24},{default:a(()=>[p("div",ke,[o(n,null,{default:a(()=>[k(v(e(s)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(l,{quaternary:"",onClick:t[2]||(t[2]=g=>e(u)("reset-pwd"))},{default:a(()=>[k(v(e(s)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),o(l,{type:"primary",size:"large",round:"",block:"",loading:e(w).loginLoading,onClick:y},{default:a(()=>[k(v(e(s)("common.confirm")),1)]),_:1},8,["loading"]),p("div",Pe,[o(l,{class:"flex-1",block:"",onClick:t[3]||(t[3]=g=>e(u)("code-login"))},{default:a(()=>[k(v(e(s)(e(R)["code-login"],{type:e(s)("page.login.codeLogin.emailType")})),1)]),_:1}),o(l,{class:"flex-1",block:"",onClick:t[4]||(t[4]=g=>e(u)("register"))},{default:a(()=>[k(v(e(s)(e(R).register)),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}});function j(){const{loading:C,startLoading:w,endLoading:u}=J(),{count:m,start:h,stop:r,isCounting:x}=pe(30),y=q(""),i=$(()=>{let n=s("page.login.codeLogin.getCode");const l=s("page.login.codeLogin.reGetCode",{time:m.value});return C.value&&(n=""),x.value&&(n=l),n});function t(n){var l,d,c,g;return n.trim()===""?((d=(l=window.$message)==null?void 0:l.error)==null||d.call(l,s("form.email.required")),!1):de.test(n)?!0:((g=(c=window.$message)==null?void 0:c.error)==null||g.call(c,s("form.email.invalid")),!1)}function b(n){var l,d,c,g;return n.trim()===""?((d=(l=window.$message)==null?void 0:l.error)==null||d.call(l,s("form.phone.required")),!1):ce.test(n)?!0:((g=(c=window.$message)==null?void 0:c.error)==null||g.call(c,s("form.phone.invalid")),!1)}async function f(n,l){var c,g;let d;if(n==="email"?d=t(l):d=b(l),!(!d||C.value)){w();try{const N={verificationType:n,email:l},{data:_,error:P}=await Q(N);P||((g=(c=window.$message)==null?void 0:c.success)==null||g.call(c,s("page.login.codeLogin.sendCodeSuccess")),y.value=_==null?void 0:_.verificationUuid)}finally{h(),u()}}}return{label:i,start:h,stop:r,isCounting:x,loading:C,getCaptcha:f,verificationUuid:y}}const Se={class:"w-full flex-y-center gap-16px"},Ne=z({name:"CodeLogin",__name:"code-login",setup(C){const{toggleLoginModule:w}=F(),{formRef:u,validate:m}=G(),{label:h,isCounting:r,loading:x,getCaptcha:y}=j(),i=M({email:"",code:""}),t=$(()=>{const{formRules:f}=T();return{email:f.email,code:f.code}});async function b(){var f;await m(),(f=window.$message)==null||f.success(s("page.login.common.validateSuccess"))}return(f,n)=>{const l=E,d=D,c=I,g=V,N=O;return S(),U(N,{ref_key:"formRef",ref:u,model:i,rules:t.value,size:"large","show-label":!1,onKeyup:B(b,["enter"])},{default:a(()=>[o(d,{path:"email"},{default:a(()=>[o(l,{value:i.email,"onUpdate:value":n[0]||(n[0]=_=>i.email=_),placeholder:e(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(d,{path:"code"},{default:a(()=>[p("div",Se,[o(l,{value:i.code,"onUpdate:value":n[1]||(n[1]=_=>i.code=_),placeholder:e(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(c,{size:"large",disabled:e(r),loading:e(x),onClick:n[2]||(n[2]=_=>e(y)("email",i.email))},{default:a(()=>[k(v(e(h)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(g,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(c,{type:"primary",size:"large",round:"",block:"",onClick:b},{default:a(()=>[k(v(e(s)("common.confirm")),1)]),_:1}),o(c,{size:"large",round:"",block:"",onClick:n[3]||(n[3]=_=>e(w)("pwd-login"))},{default:a(()=>[k(v(e(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Re={class:"w-full flex-y-center gap-16px"},ze=z({name:"Register",__name:"register",setup(C){const{toggleLoginModule:w}=F(),{formRef:u,validate:m}=G(),{label:h,isCounting:r,loading:x,getCaptcha:y,verificationUuid:i}=j(),t=M({email:"",code:"",username:"",password:"",confirmPassword:""}),b=$(()=>{const{formRules:n,createConfirmPwdRule:l}=T();return{email:n.email,code:n.code,username:n.username,password:n.pwd,confirmPassword:l(t.password)}});async function f(){var d;await m();const n={verificationCode:t.code,username:t.username,password:t.password,email:t.email,verificationUuid:i.value},{error:l}=await X(n);l||((d=window.$message)==null||d.success(s("page.login.common.registerSuccess")),await w("pwd-login"))}return(n,l)=>{const d=E,c=D,g=I,N=V,_=O;return S(),U(_,{ref_key:"formRef",ref:u,model:t,rules:b.value,size:"large","show-label":!1,onKeyup:B(f,["enter"])},{default:a(()=>[o(c,{path:"username"},{default:a(()=>[o(d,{value:t.username,"onUpdate:value":l[0]||(l[0]=P=>t.username=P),placeholder:e(s)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"password"},{default:a(()=>[o(d,{value:t.password,"onUpdate:value":l[1]||(l[1]=P=>t.password=P),type:"password","show-password-on":"click",placeholder:e(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"confirmPassword"},{default:a(()=>[o(d,{value:t.confirmPassword,"onUpdate:value":l[2]||(l[2]=P=>t.confirmPassword=P),type:"password","show-password-on":"click",placeholder:e(s)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"email"},{default:a(()=>[o(d,{value:t.email,"onUpdate:value":l[3]||(l[3]=P=>t.email=P),placeholder:e(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(c,{path:"code"},{default:a(()=>[p("div",Re,[o(d,{value:t.code,"onUpdate:value":l[4]||(l[4]=P=>t.code=P),placeholder:e(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(g,{size:"large",disabled:e(r),loading:e(x),onClick:l[5]||(l[5]=P=>e(y)("email",t.email))},{default:a(()=>[k(v(e(h)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(N,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(g,{type:"primary",size:"large",round:"",block:"",onClick:f},{default:a(()=>[k(v(e(s)("common.confirm")),1)]),_:1}),o(g,{size:"large",round:"",block:"",onClick:l[6]||(l[6]=P=>e(w)("pwd-login"))},{default:a(()=>[k(v(e(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Le={class:"w-full flex-y-center gap-16px"},Ue=z({name:"ResetPwd",__name:"reset-pwd",setup(C){const{toggleLoginModule:w}=F(),{formRef:u,validate:m}=G(),{label:h,isCounting:r,loading:x,getCaptcha:y}=j(),i=M({email:"",code:"",password:"",confirmPassword:""}),t=$(()=>{const{formRules:f,createConfirmPwdRule:n}=T();return{phone:f.phone,password:f.pwd,confirmPassword:n(i.password)}});async function b(){var f;await m(),(f=window.$message)==null||f.success(s("page.login.common.validateSuccess"))}return(f,n)=>{const l=E,d=D,c=I,g=V,N=O;return S(),U(N,{ref_key:"formRef",ref:u,model:i,rules:t.value,size:"large","show-label":!1,onKeyup:B(b,["enter"])},{default:a(()=>[o(d,{path:"email"},{default:a(()=>[o(l,{value:i.email,"onUpdate:value":n[0]||(n[0]=_=>i.email=_),placeholder:e(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(d,{path:"code"},{default:a(()=>[p("div",Le,[o(l,{value:i.code,"onUpdate:value":n[1]||(n[1]=_=>i.code=_),placeholder:e(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(c,{size:"large",disabled:e(r),loading:e(x),onClick:n[2]||(n[2]=_=>e(y)("email",i.email))},{default:a(()=>[k(v(e(h)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(d,{path:"password"},{default:a(()=>[o(l,{value:i.password,"onUpdate:value":n[3]||(n[3]=_=>i.password=_),type:"password","show-password-on":"click",placeholder:e(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(d,{path:"confirmPassword"},{default:a(()=>[o(l,{value:i.confirmPassword,"onUpdate:value":n[4]||(n[4]=_=>i.confirmPassword=_),type:"password","show-password-on":"click",placeholder:e(s)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(g,{vertical:"",size:18,class:"w-full"},{default:a(()=>[o(c,{type:"primary",size:"large",round:"",block:"",onClick:b},{default:a(()=>[k(v(e(s)("common.confirm")),1)]),_:1}),o(c,{size:"large",round:"",block:"",onClick:n[5]||(n[5]=_=>e(w)("pwd-login"))},{default:a(()=>[k(v(e(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Fe=z({name:"BindWechat",__name:"bind-wechat",setup(C){return(w,u)=>(S(),L("div"))}}),Me={class:"w-400px lt-sm:w-300px"},Be={class:"flex-y-center justify-between"},Ee={class:"text-28px text-primary font-500 lt-sm:text-22px"},Ie={class:"i-flex-col"},Ge={class:"pt-24px"},Te={class:"text-18px text-primary font-medium"},De={class:"pt-24px"},je=z({name:"login",__name:"index",props:{module:{}},setup(C){const w=C,u=Y(),m=ee(),h={"pwd-login":{label:R["pwd-login"],component:$e},"code-login":{label:R["code-login"],component:Ne},register:{label:R.register,component:ze},"reset-pwd":{label:R["reset-pwd"],component:Ue},"bind-wechat":{label:R["bind-wechat"],component:Fe}},r=$(()=>h[w.module||"pwd-login"]),x=$(()=>m.darkMode?K(m.themeColor,600):m.themeColor),y=$(()=>{const i="#ffffff",t=m.darkMode?.5:.2;return oe(i,m.themeColor,t)});return(i,t)=>{const b=be,f=ae,n=se,l=re,d=ie;return S(),L("div",{class:"relative size-full flex-center overflow-hidden",style:te({backgroundColor:y.value})},[o(b,{"theme-color":x.value},null,8,["theme-color"]),o(d,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:a(()=>[p("div",Me,[p("header",Be,[o(f,{class:"text-64px text-primary lt-sm:text-48px"}),p("h3",Ee,v(e(s)("system.title")),1),p("div",Ie,[o(n,{"theme-schema":e(m).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(m).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),o(l,{lang:e(u).locale,"lang-options":e(u).localeOptions,"show-tooltip":!1,onChangeLang:e(u).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),p("main",Ge,[p("h3",Te,v(e(s)(r.value.label)),1),p("div",De,[o(le,{name:e(m).page.animateMode,mode:"out-in",appear:""},{default:a(()=>[(S(),U(ne(r.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{je as default};
