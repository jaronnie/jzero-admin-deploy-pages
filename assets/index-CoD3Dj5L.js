import{r as j,a as P,k as q,l as A,d as N,m as K,o as $,b as R,e as d,n as W,u as L,p as F,c as z,w as s,f as o,h as e,$ as t,g as b,t as y,q as S,s as M,v as B,x as H,B as E,y as Z,z as J,A as Q,C as X,D as Y,T as ee,E as oe,F as ne,G as le,H as te,I as ae,J as se}from"./index-DUjIfuo9.js";import{u as U,a as I,_ as G,b as T,R as re,c as ie}from"./form-B4CYpud8.js";import{_ as D}from"./Space-BvmAntqD.js";function ce(C){const p=j(0),f=P(()=>Math.ceil(p.value/60)),m=P(()=>p.value>0),{pause:i,resume:x}=q(()=>{p.value>0?p.value-=1:i()},{immediate:!1});function g(u=C){p.value=60*u,x()}function n(){p.value=0,i()}return A(()=>{i()}),{count:f,isCounting:m,start:g,stop:n}}const de={class:"absolute-lt z-1 size-full overflow-hidden"},pe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ue={height:"1337",width:"1337"},me={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},fe=["stop-color"],ge=["stop-color"],_e={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},we={height:"896",width:"967.8852157128662"},he={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},ve=["stop-color"],xe=["stop-color"],ye=N({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(C){const _=C,p=P(()=>K(_.themeColor,200)),f=P(()=>K(_.themeColor,500));return(m,i)=>($(),R("div",de,[d("div",pe,[($(),R("svg",ue,[d("defs",null,[i[0]||(i[0]=d("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),d("linearGradient",me,[d("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,fe),d("stop",{offset:"1","stop-color":f.value,"stop-opacity":"1"},null,8,ge)])]),i[1]||(i[1]=d("g",{opacity:"1"},[d("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),d("div",_e,[($(),R("svg",we,[d("defs",null,[i[2]||(i[2]=d("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),d("linearGradient",he,[d("stop",{offset:"0","stop-color":f.value,"stop-opacity":"1"},null,8,ve),d("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,xe)])]),i[3]||(i[3]=d("g",{opacity:"1"},[d("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Ce={class:"flex-y-center justify-between"},be={class:"flex-y-center justify-between gap-12px"},ke=N({name:"PwdLogin",__name:"pwd-login",setup(C){const _=W(),{toggleLoginModule:p}=L(),{formRef:f,validate:m}=U(),i=F({username:"jzero",password:"123456"}),x=P(()=>{const{formRules:n}=I();return{username:n.username,password:n.pwd}});async function g(){await m(),await _.login(i.username,i.password)}return(n,u)=>{const h=B,r=G,l=H,c=E,a=D,w=T;return $(),z(w,{ref_key:"formRef",ref:f,model:i,rules:x.value,size:"large","show-label":!1,onKeyup:M(g,["enter"])},{default:s(()=>[o(r,{path:"username"},{default:s(()=>[o(h,{value:i.username,"onUpdate:value":u[0]||(u[0]=k=>i.username=k),placeholder:e(t)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"password"},{default:s(()=>[o(h,{value:i.password,"onUpdate:value":u[1]||(u[1]=k=>i.password=k),type:"password","show-password-on":"click",placeholder:e(t)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{vertical:"",size:24},{default:s(()=>[d("div",Ce,[o(l,null,{default:s(()=>[b(y(e(t)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(c,{quaternary:"",onClick:u[2]||(u[2]=k=>e(p)("reset-pwd"))},{default:s(()=>[b(y(e(t)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),o(c,{type:"primary",size:"large",round:"",block:"",loading:e(_).loginLoading,onClick:g},{default:s(()=>[b(y(e(t)("common.confirm")),1)]),_:1},8,["loading"]),d("div",be,[o(c,{class:"flex-1",block:"",onClick:u[3]||(u[3]=k=>e(p)("code-login"))},{default:s(()=>[b(y(e(t)(e(S)["code-login"],{type:e(t)("page.login.codeLogin.emailType")})),1)]),_:1}),o(c,{class:"flex-1",block:"",onClick:u[4]||(u[4]=k=>e(p)("register"))},{default:s(()=>[b(y(e(t)(e(S).register)),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}});function V(){const{loading:C,startLoading:_,endLoading:p}=Z(),{count:f,start:m,stop:i,isCounting:x}=ce(30),g=P(()=>{let r=t("page.login.codeLogin.getCode");const l=t("page.login.codeLogin.reGetCode",{time:f.value});return C.value&&(r=""),x.value&&(r=l),r});function n(r){var l,c,a,w;return r.trim()===""?((c=(l=window.$message)==null?void 0:l.error)==null||c.call(l,t("form.email.required")),!1):re.test(r)?!0:((w=(a=window.$message)==null?void 0:a.error)==null||w.call(a,t("form.email.invalid")),!1)}function u(r){var l,c,a,w;return r.trim()===""?((c=(l=window.$message)==null?void 0:l.error)==null||c.call(l,t("form.phone.required")),!1):ie.test(r)?!0:((w=(a=window.$message)==null?void 0:a.error)==null||w.call(a,t("form.phone.invalid")),!1)}async function h(r,l){var a,w;let c;r==="email"?c=n(l):c=u(l),!(!c||C.value)&&(_(),await new Promise(k=>{setTimeout(k,500)}),(w=(a=window.$message)==null?void 0:a.success)==null||w.call(a,t("page.login.codeLogin.sendCodeSuccess")),m(),p())}return{label:g,start:m,stop:i,isCounting:x,loading:C,getCaptcha:h}}const Pe={class:"w-full flex-y-center gap-16px"},$e=N({name:"CodeLogin",__name:"code-login",setup(C){const{toggleLoginModule:_}=L(),{formRef:p,validate:f}=U(),{label:m,isCounting:i,loading:x,getCaptcha:g}=V(),n=F({email:"",code:""}),u=P(()=>{const{formRules:r}=I();return{email:r.email,code:r.code}});async function h(){var r;await f(),(r=window.$message)==null||r.success(t("page.login.common.validateSuccess"))}return(r,l)=>{const c=B,a=G,w=E,k=D,O=T;return $(),z(O,{ref_key:"formRef",ref:p,model:n,rules:u.value,size:"large","show-label":!1,onKeyup:M(h,["enter"])},{default:s(()=>[o(a,{path:"email"},{default:s(()=>[o(c,{value:n.email,"onUpdate:value":l[0]||(l[0]=v=>n.email=v),placeholder:e(t)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{path:"code"},{default:s(()=>[d("div",Pe,[o(c,{value:n.code,"onUpdate:value":l[1]||(l[1]=v=>n.code=v),placeholder:e(t)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(w,{size:"large",disabled:e(i),loading:e(x),onClick:l[2]||(l[2]=v=>e(g)("email",n.email))},{default:s(()=>[b(y(e(m)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(k,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(w,{type:"primary",size:"large",round:"",block:"",onClick:h},{default:s(()=>[b(y(e(t)("common.confirm")),1)]),_:1}),o(w,{size:"large",round:"",block:"",onClick:l[3]||(l[3]=v=>e(_)("pwd-login"))},{default:s(()=>[b(y(e(t)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Se={class:"w-full flex-y-center gap-16px"},Ne=N({name:"Register",__name:"register",setup(C){const{toggleLoginModule:_}=L(),{formRef:p,validate:f}=U(),{label:m,isCounting:i,loading:x,getCaptcha:g}=V(),n=F({email:"",code:"",username:"",password:"",confirmPassword:""}),u=P(()=>{const{formRules:r,createConfirmPwdRule:l}=I();return{email:r.email,code:r.code,username:r.username,password:r.pwd,confirmPassword:l(n.password)}});async function h(){var c;await f();const r={code:n.code,username:n.username,password:n.password,email:n.email},{error:l}=await J(r);l||((c=window.$message)==null||c.success(t("page.login.common.registerSuccess")),await _("pwd-login"))}return(r,l)=>{const c=B,a=G,w=E,k=D,O=T;return $(),z(O,{ref_key:"formRef",ref:p,model:n,rules:u.value,size:"large","show-label":!1,onKeyup:M(h,["enter"])},{default:s(()=>[o(a,{path:"username"},{default:s(()=>[o(c,{value:n.username,"onUpdate:value":l[0]||(l[0]=v=>n.username=v),placeholder:e(t)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{path:"password"},{default:s(()=>[o(c,{value:n.password,"onUpdate:value":l[1]||(l[1]=v=>n.password=v),type:"password","show-password-on":"click",placeholder:e(t)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{path:"confirmPassword"},{default:s(()=>[o(c,{value:n.confirmPassword,"onUpdate:value":l[2]||(l[2]=v=>n.confirmPassword=v),type:"password","show-password-on":"click",placeholder:e(t)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{path:"email"},{default:s(()=>[o(c,{value:n.email,"onUpdate:value":l[3]||(l[3]=v=>n.email=v),placeholder:e(t)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(a,{path:"code"},{default:s(()=>[d("div",Se,[o(c,{value:n.code,"onUpdate:value":l[4]||(l[4]=v=>n.code=v),placeholder:e(t)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(w,{size:"large",disabled:e(i),loading:e(x),onClick:l[5]||(l[5]=v=>e(g)("email",n.email))},{default:s(()=>[b(y(e(m)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(k,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(w,{type:"primary",size:"large",round:"",block:"",onClick:h},{default:s(()=>[b(y(e(t)("common.confirm")),1)]),_:1}),o(w,{size:"large",round:"",block:"",onClick:l[6]||(l[6]=v=>e(_)("pwd-login"))},{default:s(()=>[b(y(e(t)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Re=N({name:"ResetPwd",__name:"reset-pwd",setup(C){const{toggleLoginModule:_}=L(),{formRef:p,validate:f}=U(),m=F({phone:"",code:"",password:"",confirmPassword:""}),i=P(()=>{const{formRules:g,createConfirmPwdRule:n}=I();return{phone:g.phone,password:g.pwd,confirmPassword:n(m.password)}});async function x(){var g;await f(),(g=window.$message)==null||g.success(t("page.login.common.validateSuccess"))}return(g,n)=>{const u=B,h=G,r=E,l=D,c=T;return $(),z(c,{ref_key:"formRef",ref:p,model:m,rules:i.value,size:"large","show-label":!1,onKeyup:M(x,["enter"])},{default:s(()=>[o(h,{path:"phone"},{default:s(()=>[o(u,{value:m.phone,"onUpdate:value":n[0]||(n[0]=a=>m.phone=a),placeholder:e(t)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(h,{path:"code"},{default:s(()=>[o(u,{value:m.code,"onUpdate:value":n[1]||(n[1]=a=>m.code=a),placeholder:e(t)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(h,{path:"password"},{default:s(()=>[o(u,{value:m.password,"onUpdate:value":n[2]||(n[2]=a=>m.password=a),type:"password","show-password-on":"click",placeholder:e(t)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(h,{path:"confirmPassword"},{default:s(()=>[o(u,{value:m.confirmPassword,"onUpdate:value":n[3]||(n[3]=a=>m.confirmPassword=a),type:"password","show-password-on":"click",placeholder:e(t)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(l,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(r,{type:"primary",size:"large",round:"",block:"",onClick:x},{default:s(()=>[b(y(e(t)("common.confirm")),1)]),_:1}),o(r,{size:"large",round:"",block:"",onClick:n[4]||(n[4]=a=>e(_)("pwd-login"))},{default:s(()=>[b(y(e(t)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ze=N({name:"BindWechat",__name:"bind-wechat",setup(C){return(_,p)=>($(),R("div"))}}),Le={class:"w-400px lt-sm:w-300px"},Fe={class:"flex-y-center justify-between"},Me={class:"text-28px text-primary font-500 lt-sm:text-22px"},Be={class:"i-flex-col"},Ee={class:"pt-24px"},Ue={class:"text-18px text-primary font-medium"},Ie={class:"pt-24px"},Oe=N({name:"login",__name:"index",props:{module:{}},setup(C){const _=C,p=Q(),f=X(),m={"pwd-login":{label:S["pwd-login"],component:ke},"code-login":{label:S["code-login"],component:$e},register:{label:S.register,component:Ne},"reset-pwd":{label:S["reset-pwd"],component:Re},"bind-wechat":{label:S["bind-wechat"],component:ze}},i=P(()=>m[_.module||"pwd-login"]),x=P(()=>f.darkMode?K(f.themeColor,600):f.themeColor),g=P(()=>{const n="#ffffff",u=f.darkMode?.5:.2;return Y(n,f.themeColor,u)});return(n,u)=>{const h=ye,r=le,l=te,c=ae,a=se;return $(),R("div",{class:"relative size-full flex-center overflow-hidden",style:ne({backgroundColor:g.value})},[o(h,{"theme-color":x.value},null,8,["theme-color"]),o(a,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:s(()=>[d("div",Le,[d("header",Fe,[o(r,{class:"text-64px text-primary lt-sm:text-48px"}),d("h3",Me,y(e(t)("system.title")),1),d("div",Be,[o(l,{"theme-schema":e(f).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(f).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),o(c,{lang:e(p).locale,"lang-options":e(p).localeOptions,"show-tooltip":!1,onChangeLang:e(p).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),d("main",Ee,[d("h3",Ue,y(e(t)(i.value.label)),1),d("div",Ie,[o(ee,{name:e(f).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[($(),z(oe(i.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Oe as default};
