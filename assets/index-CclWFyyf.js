import{n as bt,o as pt,e as An,b as yt,_ as kt,c as xt,u as _t,g as wt,p as Nt,j as Ct,N as Rt,k as St,l as Dt}from"./business-CuCiueLv.js";import{d as re,Z as D,a8 as Ln,a9 as Oe,aK as Kt,aL as Tt,at as At,x as Lt,r as q,aM as cn,a as z,aN as Pt,aO as Q,i as Bt,a0 as Ft,aP as Xe,aQ as Pn,aR as Ot,L as M,K as ue,N as H,aS as xn,O as Ke,M as Te,aT as Et,R as It,a4 as $t,S as Bn,aU as Ut,aV as _n,aW as Ue,a7 as E,am as Ye,aB as Ae,aX as Je,aY as Me,aZ as wn,a_ as Mt,aw as ee,a6 as zt,a$ as un,W as jt,ao as Nn,b0 as Ht,b1 as Cn,b2 as Rn,az as ze,aA as Qe,$ as N,b3 as Le,o as ye,c as Be,w as R,f as m,g as ge,t as fe,h as v,e as Sn,aD as Fn,B as Fe,aG as On,aH as Dn,p as Vt,b as En,a1 as qt,a2 as Gt,aI as Pe,aC as Wt,v as In,b4 as Xt,b5 as Yt,b6 as Jt,J as $n,A as Qt,a3 as Zt,aJ as el}from"./index-D2ib0FuK.js";import{u as nl,a as tl,_ as ll,b as Un}from"./form-DNMjjoZD.js";import{_ as Ze}from"./Space-DI1sCiak.js";import{_ as ol,a as al,b as il,c as rl}from"./round-refresh-YQDwzfvD.js";import{a as dl}from"./Grid-DpCe1YJx.js";function Mn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const sl=re({name:"Switcher",render(){return D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},D("path",{d:"M12 8l10 8l-10 8z"}))}}),zn=Ln("n-tree-select"),je=Ln("n-tree"),cl=re({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Oe(je,null);return()=>{const{clsPrefix:i,expanded:d,hide:s,indent:r,onClick:w}=e;return D("span",{"data-switcher":!0,class:[`${i}-tree-node-switcher`,d&&`${i}-tree-node-switcher--expanded`,s&&`${i}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:w},D("div",{class:`${i}-tree-node-switcher__icon`},D(Kt,null,{default:()=>{if(e.loading)return D(Tt,{clsPrefix:i,key:"loading",radius:85,strokeWidth:20});const{value:h}=t;return h?h({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):D(At,{clsPrefix:i,key:"switcher"},{default:()=>D(sl,null)})}})))}}}),ul=re({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Oe(je);function i(s){const{onCheck:r}=e;r&&r(s)}function d(s){i(s)}return{handleUpdateValue:d,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:i,indeterminate:d,disabled:s,focusable:r,indent:w,handleUpdateValue:h}=this;return D("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${w}px`},"data-checkbox":!0},D(Lt,{focusable:r,disabled:s,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:i,indeterminate:d,onUpdateChecked:h}))}}),fl=re({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:i,renderSuffixRef:d,labelFieldRef:s}=Oe(je),r=q(null);function w(b){const{onClick:p}=e;p&&p(b)}function h(b){w(b)}return{selfRef:r,renderLabel:t,renderPrefix:i,renderSuffix:d,labelField:s,handleClick:h}},render(){const{clsPrefix:e,labelField:t,nodeProps:i,checked:d=!1,selected:s=!1,renderLabel:r,renderPrefix:w,renderSuffix:h,handleClick:b,onDragstart:p,tmNode:{rawNode:x,rawNode:{prefix:S,suffix:y,[t]:T}}}=this;return D("span",Object.assign({},i,{ref:"selfRef",class:[`${e}-tree-node-content`,i==null?void 0:i.class],onClick:b,draggable:p===void 0?void 0:!0,onDragstart:p}),w||S?D("div",{class:`${e}-tree-node-content__prefix`},w?w({option:x,selected:s,checked:d}):cn(S)):null,D("div",{class:`${e}-tree-node-content__text`},r?r({option:x,selected:s,checked:d}):cn(T)),h||y?D("div",{class:`${e}-tree-node-content__suffix`},h?h({option:x,selected:s,checked:d}):cn(y)):null)}});function Kn({position:e,offsetLevel:t,indent:i,el:d}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";s[r]=0,s.left=`${d.offsetLeft+6-t*i}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=r,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return D("div",{style:s})}function hl({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function gl(e){return z(()=>e.leafOnly?"child":e.checkStrategy)}function pe(e,t){return!!e.rawNode[t]}function jn(e,t,i,d){e==null||e.forEach(s=>{i(s),jn(s[t],t,i,d),d(s)})}function vl(e,t,i,d,s){const r=new Set,w=new Set,h=[];return jn(e,d,b=>{if(h.push(b),s(t,b)){w.add(b[i]);for(let p=h.length-2;p>=0;--p)if(!r.has(h[p][i]))r.add(h[p][i]);else return}},()=>{h.pop()}),{expandedKeys:Array.from(r),highlightKeySet:w}}if(Pt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function ml(e,t,i,d,s){const r=new Set,w=new Set,h=new Set,b=[],p=[],x=[];function S(T){T.forEach(k=>{if(x.push(k),t(i,k)){r.add(k[d]),h.add(k[d]);for(let c=x.length-2;c>=0;--c){const a=x[c][d];if(!w.has(a))w.add(a),r.has(a)&&r.delete(a);else break}}const C=k[s];C&&S(C),x.pop()})}S(e);function y(T,k){T.forEach(C=>{const c=C[d],a=r.has(c),_=w.has(c);if(!a&&!_)return;const A=C[s];if(A)if(a)k.push(C);else{b.push(c);const B=Object.assign(Object.assign({},C),{[s]:[]});k.push(B),y(A,B[s])}else k.push(C)})}return y(e,p),{filteredTree:p,highlightKeySet:h,expandedKeys:b}}const Hn=re({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Oe(je),{droppingNodeParentRef:i,droppingMouseNodeRef:d,draggingNodeRef:s,droppingPositionRef:r,droppingOffsetLevelRef:w,nodePropsRef:h,indentRef:b,blockLineRef:p,checkboxPlacementRef:x,checkOnClickRef:S,disabledFieldRef:y,showLineRef:T,renderSwitcherIconRef:k,overrideDefaultNodeClickBehaviorRef:C}=t,c=Q(()=>!!e.tmNode.rawNode.checkboxDisabled),a=Q(()=>pe(e.tmNode,y.value)),_=Q(()=>t.disabledRef.value||a.value),A=z(()=>{const{value:u}=h;if(u)return u({option:e.tmNode.rawNode})}),B=q(null),G={value:null};Bt(()=>{G.value=B.value.$el});function L(){const u=()=>{const{tmNode:P}=e;if(!P.isLeaf&&!P.shallowLoaded){if(!t.loadingKeysRef.value.has(P.key))t.loadingKeysRef.value.add(P.key);else return;const{onLoadRef:{value:$}}=t;$&&$(P.rawNode).then(V=>{V!==!1&&t.handleSwitcherClick(P)}).finally(()=>{t.loadingKeysRef.value.delete(P.key)})}else t.handleSwitcherClick(P)};k.value?setTimeout(u,0):u()}const K=Q(()=>!a.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),I=Q(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),le=Q(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),de=Q(()=>{const{value:u}=I;if(!u)return!1;const{value:P}=S,{tmNode:$}=e;return typeof P=="boolean"?!$.disabled&&P:P(e.tmNode.rawNode)});function W(u){const{value:P}=t.expandOnClickRef,{value:$}=K,{value:V}=de;if(!$&&!P&&!V||Xe(u,"checkbox")||Xe(u,"switcher"))return;const{tmNode:J}=e;$&&t.handleSelect(J),P&&!J.isLeaf&&L(),V&&oe(!le.value)}function ke(u){var P,$;if(!(Xe(u,"checkbox")||Xe(u,"switcher"))){if(!_.value){const V=C.value;let J=!1;if(V)switch(V({option:e.tmNode.rawNode})){case"toggleCheck":J=!0,oe(!le.value);break;case"toggleSelect":J=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":J=!0,L(),J=!0;break;case"none":J=!0,J=!0;return}J||W(u)}($=(P=A.value)===null||P===void 0?void 0:P.onClick)===null||$===void 0||$.call(P,u)}}function ve(u){p.value||ke(u)}function Y(u){p.value&&ke(u)}function oe(u){t.handleCheck(e.tmNode,u)}function he(u){t.handleDragStart({event:u,node:e.tmNode})}function j(u){u.currentTarget===u.target&&t.handleDragEnter({event:u,node:e.tmNode})}function se(u){u.preventDefault(),t.handleDragOver({event:u,node:e.tmNode})}function me(u){t.handleDragEnd({event:u,node:e.tmNode})}function Ee(u){u.currentTarget===u.target&&t.handleDragLeave({event:u,node:e.tmNode})}function en(u){u.preventDefault(),r.value!==null&&t.handleDrop({event:u,node:e.tmNode,dropPosition:r.value})}const nn=z(()=>{const{clsPrefix:u}=e,{value:P}=b;if(T.value){const $=[];let V=e.tmNode.parent;for(;V;)V.isLastChild?$.push(D("div",{class:`${u}-tree-node-indent`},D("div",{style:{width:`${P}px`}}))):$.push(D("div",{class:[`${u}-tree-node-indent`,`${u}-tree-node-indent--show-line`]},D("div",{style:{width:`${P}px`}}))),V=V.parent;return $.reverse()}else return Ft(e.tmNode.level,D("div",{class:`${e.clsPrefix}-tree-node-indent`},D("div",{style:{width:`${P}px`}})))});return{showDropMark:Q(()=>{const{value:u}=s;if(!u)return;const{value:P}=r;if(!P)return;const{value:$}=d;if(!$)return;const{tmNode:V}=e;return V.key===$.key}),showDropMarkAsParent:Q(()=>{const{value:u}=i;if(!u)return!1;const{tmNode:P}=e,{value:$}=r;return $==="before"||$==="after"?u.key===P.key:!1}),pending:Q(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Q(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Q(()=>{var u;return(u=t.highlightKeySetRef.value)===null||u===void 0?void 0:u.has(e.tmNode.key)}),checked:le,indeterminate:Q(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Q(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Q(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:_,checkable:I,mergedCheckOnClick:de,checkboxDisabled:c,selectable:K,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:p,nodeProps:A,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:w,indent:b,checkboxPlacement:x,showLine:T,contentInstRef:B,contentElRef:G,indentNodes:nn,handleCheck:oe,handleDrop:en,handleDragStart:he,handleDragEnter:j,handleDragOver:se,handleDragEnd:me,handleDragLeave:Ee,handleLineClick:Y,handleContentClick:ve,handleSwitcherClick:L}},render(){const{tmNode:e,clsPrefix:t,checkable:i,expandOnClick:d,selectable:s,selected:r,checked:w,highlight:h,draggable:b,blockLine:p,indent:x,indentNodes:S,disabled:y,pending:T,internalScrollable:k,nodeProps:C,checkboxPlacement:c}=this,a=b&&!y?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,_=k?Mn(e.key):void 0,A=c==="right",B=i?D(ul,{indent:x,right:A,focusable:this.checkboxFocusable,disabled:y||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return D("div",Object.assign({class:`${t}-tree-node-wrapper`},a),D("div",Object.assign({},p?C:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:i,[`${t}-tree-node--highlight`]:h,[`${t}-tree-node--pending`]:T,[`${t}-tree-node--disabled`]:y,[`${t}-tree-node--selectable`]:s,[`${t}-tree-node--clickable`]:s||d||this.mergedCheckOnClick},C==null?void 0:C.class],"data-key":_,draggable:b&&p,onClick:this.handleLineClick,onDragstart:b&&p&&!y?this.handleDragStart:void 0}),S,e.isLeaf&&this.showLine?D("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},D("div",{style:{width:`${x}px`}})):D(cl,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:x,onClick:this.handleSwitcherClick}),A?null:B,D(fl,{ref:"contentInstRef",clsPrefix:t,checked:w,selected:r,onClick:this.handleContentClick,nodeProps:p?void 0:C,onDragstart:b&&!p&&!y?this.handleDragStart:void 0,tmNode:e}),b?this.showDropMark?Kn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:x}):this.showDropMarkAsParent?Kn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:x}):null:null,A?B:null))}});function bl({props:e,fNodesRef:t,mergedExpandedKeysRef:i,mergedSelectedKeysRef:d,mergedCheckedKeysRef:s,handleCheck:r,handleSelect:w,handleSwitcherClick:h}){const{value:b}=d,p=Oe(zn,null),x=p?p.pendingNodeKeyRef:q(b.length?b[b.length-1]:null);function S(y){var T;if(!e.keyboard)return{enterBehavior:null};const{value:k}=x;let C=null;if(k===null){if((y.key==="ArrowDown"||y.key==="ArrowUp")&&y.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(y.key)&&k===null){const{value:c}=t;let a=0;for(;a<c.length;){if(!c[a].disabled){x.value=c[a].key;break}a+=1}}}else{const{value:c}=t;let a=c.findIndex(_=>_.key===k);if(!~a)return{enterBehavior:null};if(y.key==="Enter"){const _=c[a];switch(C=((T=e.overrideDefaultNodeClickBehavior)===null||T===void 0?void 0:T.call(e,{option:_.rawNode}))||null,C){case"toggleCheck":r(_,!s.value.includes(_.key));break;case"toggleSelect":w(_);break;case"toggleExpand":h(_);break;case"none":break;case"default":default:C="default",w(_)}}else if(y.key==="ArrowDown")for(y.preventDefault(),a+=1;a<c.length;){if(!c[a].disabled){x.value=c[a].key;break}a+=1}else if(y.key==="ArrowUp")for(y.preventDefault(),a-=1;a>=0;){if(!c[a].disabled){x.value=c[a].key;break}a-=1}else if(y.key==="ArrowLeft"){const _=c[a];if(_.isLeaf||!i.value.includes(k)){const A=_.getParent();A&&(x.value=A.key)}else h(_)}else if(y.key==="ArrowRight"){const _=c[a];if(_.isLeaf)return{enterBehavior:null};if(!i.value.includes(k))h(_);else for(a+=1;a<c.length;){if(!c[a].disabled){x.value=c[a].key;break}a+=1}}}return{enterBehavior:C}}return{pendingNodeKeyRef:x,handleKeydown:S}}const pl=re({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return D(Ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>D("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Pn(this.height)}},this.nodes.map(t=>D(Hn,{clsPrefix:e,tmNode:t})))})}}),fn=Et(),yl=M("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ue("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ue(">",[M("tree-node",[ue("&:first-child","margin-top: 0;")])]),M("tree-motion-wrapper",[H("expand",[xn({duration:"0.2s"})]),H("collapse",[xn({duration:"0.2s",reverse:!0})])]),M("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),M("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[H("highlight",[M("tree-node-content",[Ke("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),H("disabled",[M("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Te("disabled",[H("clickable",[M("tree-node-content",`
 cursor: pointer;
 `)])])]),H("block-node",[M("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Te("block-line",[M("tree-node",[Te("disabled",[M("tree-node-content",[ue("&:hover","background: var(--n-node-color-hover);")]),H("selectable",[M("tree-node-content",[ue("&:active","background: var(--n-node-color-pressed);")])]),H("pending",[M("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),H("selected",[M("tree-node-content","background: var(--n-node-color-active);")])]),H("selected",[M("tree-node-content","background: var(--n-node-color-active);")])])]),H("block-line",[M("tree-node",[Te("disabled",[ue("&:hover","background: var(--n-node-color-hover);"),H("pending",`
 background: var(--n-node-color-hover);
 `),H("selectable",[Te("selected",[ue("&:active","background: var(--n-node-color-pressed);")])]),H("selected","background: var(--n-node-color-active);")]),H("selected","background: var(--n-node-color-active);"),H("disabled",`
 cursor: not-allowed;
 `)])]),M("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[H("show-line","position: relative",[ue("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),H("last-child",[ue("&::before",`
 bottom: 50%;
 `)]),H("is-leaf",[ue("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Te("show-line","height: 0;")]),M("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Ke("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[M("icon",[fn]),M("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[fn]),M("base-icon",[fn])]),H("hide","visibility: hidden;"),H("expanded","transform: rotate(90deg);")]),M("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),M("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ue("&:last-child","margin-bottom: 0;"),Ke("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Ke("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Ke("suffix",`
 display: inline-flex;
 `)]),Ke("empty","margin: auto;")]);var kl=function(e,t,i,d){function s(r){return r instanceof i?r:new i(function(w){w(r)})}return new(i||(i=Promise))(function(r,w){function h(x){try{p(d.next(x))}catch(S){w(S)}}function b(x){try{p(d.throw(x))}catch(S){w(S)}}function p(x){x.done?r(x.value):s(x.value).then(h,b)}p((d=d.apply(e,[])).next())})};function Tn(e,t,i,d){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:d||(r=>r[t]),getDisabled(r){return!!(r[i]||r.checkboxDisabled)}}}const xl={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},_l=Object.assign(Object.assign(Object.assign(Object.assign({},Bn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:hl},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),xl),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Vn=re({name:"Tree",props:_l,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:i,mergedRtlRef:d}=It(e),s=$t("Tree",d,t),r=Bn("Tree","-tree",yl,Ut,e,t),w=q(null),h=q(null),b=q(null);function p(){var n;return(n=b.value)===null||n===void 0?void 0:n.listElRef}function x(){var n;return(n=b.value)===null||n===void 0?void 0:n.itemsElRef}const S=z(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(o,f)=>{if(!o.length)return!0;const g=f[l];return typeof g=="string"?g.toLowerCase().includes(o.toLowerCase()):!1}}),y=z(()=>{const{pattern:n}=e;return n?!n.length||!S.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:ml(e.data,S.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),T=z(()=>_n(e.showIrrelevantNodes?e.data:y.value.filteredTree,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),k=Oe(zn,null),C=e.internalTreeSelect?k.dataTreeMate:z(()=>e.showIrrelevantNodes?T.value:_n(e.data,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:c}=e,a=q([]);c!=null&&c.includes("defaultCheckedKeys")?Ue(()=>{a.value=e.defaultCheckedKeys}):a.value=e.defaultCheckedKeys;const _=E(e,"checkedKeys"),A=Ye(_,a),B=z(()=>C.value.getCheckedKeys(A.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),G=gl(e),L=z(()=>B.value.checkedKeys),K=z(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:B.value.indeterminateKeys}),I=q([]);c!=null&&c.includes("defaultSelectedKeys")?Ue(()=>{I.value=e.defaultSelectedKeys}):I.value=e.defaultSelectedKeys;const le=E(e,"selectedKeys"),de=Ye(le,I),W=q([]),ke=n=>{W.value=e.defaultExpandAll?C.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};c!=null&&c.includes("defaultExpandedKeys")?Ue(()=>{ke(void 0)}):Ue(()=>{ke(e.defaultExpandedKeys)});const ve=E(e,"expandedKeys"),Y=Ye(ve,W),oe=z(()=>T.value.getFlattenedNodes(Y.value)),{pendingNodeKeyRef:he,handleKeydown:j}=bl({props:e,mergedCheckedKeysRef:A,mergedSelectedKeysRef:de,fNodesRef:oe,mergedExpandedKeysRef:Y,handleCheck:rn,handleSelect:dn,handleSwitcherClick:mn});let se=null,me=null;const Ee=q(new Set),en=z(()=>e.internalHighlightKeySet||y.value.highlightKeySet),nn=Ye(en,Ee),u=q(new Set),P=z(()=>Y.value.filter(n=>!u.value.has(n)));let $=0;const V=q(null),J=q(null),He=q(null),Ve=q(null),qe=q(0),qn=z(()=>{const{value:n}=J;return n?n.parent:null});let tn=!1;Ae(E(e,"data"),()=>{tn=!0,Je(()=>{tn=!1}),u.value.clear(),he.value=null,$e()},{deep:!1});let ln=!1;const on=()=>{ln=!0,Je(()=>{ln=!1})};let Ie;Ae(E(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ie=void 0,n){const{expandedKeys:o,highlightKeySet:f}=vl(e.data,e.pattern,e.keyField,e.childrenField,S.value);Ee.value=f,on(),we(o,ne(o),{node:null,action:"filter"})}else Ee.value=new Set;else if(!n.length)Ie!==void 0&&(on(),we(Ie,ne(Ie),{node:null,action:"filter"}));else{l.length||(Ie=Y.value);const{expandedKeys:o}=y.value;o!==void 0&&(on(),we(o,ne(o),{node:null,action:"filter"}))}});function gn(n){return kl(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:o}=u;if(!o.has(n.key)){o.add(n.key);try{(yield l(n.rawNode))===!1&&Ne()}catch(f){console.error(f),Ne()}o.delete(n.key)}})}Ue(()=>{var n;const{value:l}=T;if(!l)return;const{getNode:o}=l;(n=Y.value)===null||n===void 0||n.forEach(f=>{const g=o(f);g&&!g.shallowLoaded&&gn(g)})});const _e=q(!1),be=q([]);Ae(P,(n,l)=>{if(!e.animated||ln){Je(Ge);return}if(tn)return;const o=Me(r.value.self.nodeHeight),f=new Set(l);let g=null,U=null;for(const O of n)if(!f.has(O)){if(g!==null)return;g=O}const Z=new Set(n);for(const O of l)if(!Z.has(O)){if(U!==null)return;U=O}if(g===null&&U===null)return;const{virtualScroll:te}=e,Re=(te?b.value.listElRef:w.value).offsetHeight,Se=Math.ceil(Re/o)+1;let ae;if(g!==null&&(ae=l),U!==null&&(ae===void 0?ae=n:ae=ae.filter(O=>O!==U)),_e.value=!0,be.value=T.value.getFlattenedNodes(ae),g!==null){const O=be.value.findIndex(ie=>ie.key===g);if(~O){const ie=be.value[O].children;if(ie){const ce=wn(ie,n);be.value.splice(O+1,0,{__motion:!0,mode:"expand",height:te?ce.length*o:void 0,nodes:te?ce.slice(0,Se):ce})}}}if(U!==null){const O=be.value.findIndex(ie=>ie.key===U);if(~O){const ie=be.value[O].children;if(!ie)return;_e.value=!0;const ce=wn(ie,n);be.value.splice(O+1,0,{__motion:!0,mode:"collapse",height:te?ce.length*o:void 0,nodes:te?ce.slice(0,Se):ce})}}});const Gn=z(()=>Mt(oe.value)),Wn=z(()=>_e.value?be.value:oe.value);function Ge(){const{value:n}=h;n&&n.sync()}function Xn(){_e.value=!1,e.virtualScroll&&Je(Ge)}function ne(n){const{getNode:l}=C.value;return n.map(o=>{var f;return((f=l(o))===null||f===void 0?void 0:f.rawNode)||null})}function we(n,l,o){const{"onUpdate:expandedKeys":f,onUpdateExpandedKeys:g}=e;W.value=n,f&&ee(f,n,l,o),g&&ee(g,n,l,o)}function vn(n,l,o){const{"onUpdate:checkedKeys":f,onUpdateCheckedKeys:g}=e;a.value=n,g&&ee(g,n,l,o),f&&ee(f,n,l,o)}function Yn(n,l){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:f}=e;o&&ee(o,n,l),f&&ee(f,n,l)}function an(n,l,o){const{"onUpdate:selectedKeys":f,onUpdateSelectedKeys:g}=e;I.value=n,g&&ee(g,n,l,o),f&&ee(f,n,l,o)}function Jn(n){const{onDragenter:l}=e;l&&ee(l,n)}function Qn(n){const{onDragleave:l}=e;l&&ee(l,n)}function Zn(n){const{onDragend:l}=e;l&&ee(l,n)}function et(n){const{onDragstart:l}=e;l&&ee(l,n)}function nt(n){const{onDragover:l}=e;l&&ee(l,n)}function tt(n){const{onDrop:l}=e;l&&ee(l,n)}function $e(){lt(),xe()}function lt(){V.value=null}function xe(){qe.value=0,J.value=null,He.value=null,Ve.value=null,Ne()}function Ne(){se&&(window.clearTimeout(se),se=null),me=null}function rn(n,l){if(e.disabled||pe(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){dn(n);return}const o=l?"check":"uncheck",{checkedKeys:f,indeterminateKeys:g}=C.value[o](n.key,L.value,{cascade:e.cascade,checkStrategy:G.value,allowNotLoaded:e.allowCheckingNotLoaded});vn(f,ne(f),{node:n.rawNode,action:o}),Yn(g,ne(g))}function ot(n){if(e.disabled)return;const{key:l}=n,{value:o}=Y,f=o.findIndex(g=>g===l);if(~f){const g=Array.from(o);g.splice(f,1),we(g,ne(g),{node:n.rawNode,action:"collapse"})}else{const g=T.value.getNode(l);if(!g||g.isLeaf)return;let U;if(e.accordion){const Z=new Set(n.siblings.map(({key:te})=>te));U=o.filter(te=>!Z.has(te)),U.push(l)}else U=o.concat(l);we(U,ne(U),{node:n.rawNode,action:"expand"})}}function mn(n){e.disabled||_e.value||ot(n)}function dn(n){if(!(e.disabled||!e.selectable)){if(he.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:o}}=B;e.multiple?rn(n,!(l.includes(n.key)||o.includes(n.key))):vn([n.key],ne([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(de.value),o=l.findIndex(f=>f===n.key);~o?e.cancelable&&l.splice(o,1):~o||l.push(n.key),an(l,ne(l),{node:n.rawNode,action:~o?"unselect":"select"})}else de.value.includes(n.key)?e.cancelable&&an([],[],{node:n.rawNode,action:"unselect"}):an([n.key],ne([n.key]),{node:n.rawNode,action:"select"})}}function at(n){if(se&&(window.clearTimeout(se),se=null),n.isLeaf)return;me=n.key;const l=()=>{if(me!==n.key)return;const{value:o}=He;if(o&&o.key===n.key&&!Y.value.includes(n.key)){const f=Y.value.concat(n.key);we(f,ne(f),{node:n.rawNode,action:"expand"})}se=null,me=null};n.shallowLoaded?se=window.setTimeout(()=>{l()},1e3):se=window.setTimeout(()=>{gn(n).then(()=>{l()})},1e3)}function it({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||(bn({event:n,node:l},!1),Jn({event:n,node:l.rawNode}))}function rt({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||Qn({event:n,node:l.rawNode})}function dt(n){n.target===n.currentTarget&&xe()}function st({event:n,node:l}){$e(),!(!e.draggable||e.disabled||pe(l,e.disabledField))&&Zn({event:n,node:l.rawNode})}function ct({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||($=n.clientX,V.value=l,et({event:n,node:l.rawNode}))}function bn({event:n,node:l},o=!0){var f;if(!e.draggable||e.disabled||pe(l,e.disabledField))return;const{value:g}=V;if(!g)return;const{allowDrop:U,indent:Z}=e;o&&nt({event:n,node:l.rawNode});const te=n.currentTarget,{height:Re,top:Se}=te.getBoundingClientRect(),ae=n.clientY-Se;let O;U({node:l.rawNode,dropPosition:"inside",phase:"drag"})?ae<=8?O="before":ae>=Re-8?O="after":O="inside":ae<=Re/2?O="before":O="after";const{value:ce}=Gn;let F,X;const De=ce(l.key);if(De===null){xe();return}let We=!1;O==="inside"?(F=l,X="inside"):O==="before"?l.isFirstChild?(F=l,X="before"):(F=oe.value[De-1],X="after"):(F=l,X="after"),!F.isLeaf&&Y.value.includes(F.key)&&(We=!0,X==="after"&&(F=oe.value[De+1],F?X="before":(F=l,X="inside")));const yn=F;if(He.value=yn,!We&&g.isLastChild&&g.key===F.key&&(X="after"),X==="after"){let kn=$-n.clientX,sn=0;for(;kn>=Z/2&&F.parent!==null&&F.isLastChild&&sn<1;)kn-=Z,sn+=1,F=F.parent;qe.value=sn}else qe.value=0;if((g.contains(F)||X==="inside"&&((f=g.parent)===null||f===void 0?void 0:f.key)===F.key)&&!(g.key===yn.key&&g.key===F.key)){xe();return}if(!U({node:F.rawNode,dropPosition:X,phase:"drag"})){xe();return}if(g.key===F.key)Ne();else if(me!==F.key)if(X==="inside"){if(e.expandOnDragenter){if(at(F),!F.shallowLoaded&&me!==F.key){$e();return}}else if(!F.shallowLoaded){$e();return}}else Ne();else X!=="inside"&&Ne();Ve.value=X,J.value=F}function ut({event:n,node:l,dropPosition:o}){if(!e.draggable||e.disabled||pe(l,e.disabledField))return;const{value:f}=V,{value:g}=J,{value:U}=Ve;if(!(!f||!g||!U)&&e.allowDrop({node:g.rawNode,dropPosition:U,phase:"drag"})&&f.key!==g.key){if(U==="before"){const Z=f.getNext({includeDisabled:!0});if(Z&&Z.key===g.key){xe();return}}if(U==="after"){const Z=f.getPrev({includeDisabled:!0});if(Z&&Z.key===g.key){xe();return}}tt({event:n,node:g.rawNode,dragNode:f.rawNode,dropPosition:o}),$e()}}function ft(){Ge()}function ht(){Ge()}function gt(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:o}=h;if(!((l=o==null?void 0:o.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;he.value=null}else{const{value:o}=w;if(o!=null&&o.contains(n.relatedTarget))return;he.value=null}}Ae(he,n=>{var l,o;if(n!==null){if(e.virtualScroll)(l=b.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:f}=h;if(f===null)return;const g=(o=f.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${Mn(n)}"]`);if(!g)return;f.scrollTo({el:g})}}}),zt(je,{loadingKeysRef:u,highlightKeySetRef:nn,displayedCheckedKeysRef:L,displayedIndeterminateKeysRef:K,mergedSelectedKeysRef:de,mergedExpandedKeysRef:Y,mergedThemeRef:r,mergedCheckStrategyRef:G,nodePropsRef:E(e,"nodeProps"),disabledRef:E(e,"disabled"),checkableRef:E(e,"checkable"),selectableRef:E(e,"selectable"),expandOnClickRef:E(e,"expandOnClick"),onLoadRef:E(e,"onLoad"),draggableRef:E(e,"draggable"),blockLineRef:E(e,"blockLine"),indentRef:E(e,"indent"),cascadeRef:E(e,"cascade"),checkOnClickRef:E(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:He,droppingNodeParentRef:qn,draggingNodeRef:V,droppingPositionRef:Ve,droppingOffsetLevelRef:qe,fNodesRef:oe,pendingNodeKeyRef:he,showLineRef:E(e,"showLine"),disabledFieldRef:E(e,"disabledField"),internalScrollableRef:E(e,"internalScrollable"),internalCheckboxFocusableRef:E(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:E(e,"renderLabel"),renderPrefixRef:E(e,"renderPrefix"),renderSuffixRef:E(e,"renderSuffix"),renderSwitcherIconRef:E(e,"renderSwitcherIcon"),labelFieldRef:E(e,"labelField"),multipleRef:E(e,"multiple"),overrideDefaultNodeClickBehaviorRef:E(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:mn,handleDragEnd:st,handleDragEnter:it,handleDragLeave:rt,handleDragStart:ct,handleDrop:ut,handleDragOver:bn,handleSelect:dn,handleCheck:rn});function vt(n,l){var o,f;typeof n=="number"?(o=b.value)===null||o===void 0||o.scrollTo(n,l||0):(f=b.value)===null||f===void 0||f.scrollTo(n)}const mt={handleKeydown:j,scrollTo:vt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=B.value;return{keys:n,options:ne(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=B.value;return{keys:n,options:ne(n)}}},pn=z(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:o,nodeColorHover:f,nodeColorPressed:g,nodeColorActive:U,arrowColor:Z,loadingColor:te,nodeTextColor:Re,nodeTextColorDisabled:Se,dropMarkColor:ae,nodeWrapperPadding:O,nodeHeight:ie,lineHeight:ce,lineColor:F}}=r.value,X=un(O,"top"),De=un(O,"bottom"),We=Pn(Me(ie)-Me(X)-Me(De));return{"--n-arrow-color":Z,"--n-loading-color":te,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":o,"--n-node-color-active":U,"--n-node-color-hover":f,"--n-node-color-pressed":g,"--n-node-text-color":Re,"--n-node-text-color-disabled":Se,"--n-drop-mark-color":ae,"--n-node-wrapper-padding":O,"--n-line-offset-top":`-${X}`,"--n-line-offset-bottom":`-${De}`,"--n-node-content-height":We,"--n-line-height":ce,"--n-line-color":F}}),Ce=i?jt("tree",void 0,pn,e):void 0;return Object.assign(Object.assign({},mt),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:s,fNodes:Wn,aip:_e,selfElRef:w,virtualListInstRef:b,scrollbarInstRef:h,handleFocusout:gt,handleDragLeaveTree:dt,handleScroll:ft,getScrollContainer:p,getScrollContent:x,handleAfterEnter:Xn,handleResize:ht,cssVars:i?void 0:pn,themeClass:Ce==null?void 0:Ce.themeClass,onRender:Ce==null?void 0:Ce.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:i}=this;if(!t.length&&i)return i();const{mergedClsPrefix:d,blockNode:s,blockLine:r,draggable:w,disabled:h,internalFocusable:b,checkable:p,handleKeydown:x,rtlEnabled:S,handleFocusout:y,scrollbarProps:T}=this,k=b&&!h,C=k?"0":void 0,c=[`${d}-tree`,S&&`${d}-tree--rtl`,p&&`${d}-tree--checkable`,(r||s)&&`${d}-tree--block-node`,r&&`${d}-tree--block-line`],a=A=>"__motion"in A?D(pl,{height:A.height,nodes:A.nodes,clsPrefix:d,mode:A.mode,onAfterEnter:this.handleAfterEnter}):D(Hn,{key:A.key,tmNode:A,clsPrefix:d});if(this.virtualScroll){const{mergedTheme:A,internalScrollablePadding:B}=this,G=un(B||"0");return D(Cn,Object.assign({},T,{ref:"scrollbarInstRef",onDragleave:w?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:c,theme:A.peers.Scrollbar,themeOverrides:A.peerOverrides.Scrollbar,tabindex:C,onKeydown:k?x:void 0,onFocusout:k?y:void 0}),{default:()=>{var L;return(L=this.onRender)===null||L===void 0||L.call(this),t.length?D(Ht,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Me(A.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:G.top,paddingBottom:G.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:G.left,paddingRight:G.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:K})=>a(K)}):Nn(this.$slots.empty,()=>[D(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:_}=this;return c.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),_?D(Cn,Object.assign({},T,{class:c,tabindex:C,onKeydown:k?x:void 0,onFocusout:k?y:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>D("div",{onDragleave:w?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(a))}):D("div",{class:c,tabindex:C,ref:"selfElRef",style:this.cssVars,onKeydown:k?x:void 0,onFocusout:k?y:void 0,onDragleave:w?this.handleDragLeaveTree:void 0},t.length?t.map(a):Nn(this.$slots.empty,()=>[D(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),wl={class:"flex-y-center gap-16px pb-12px"},Nl=re({name:"MenuAuthModal",__name:"menu-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Qe(e,"visible");function d(){i.value=!1}const s=z(()=>N("common.edit")+N("page.manage.role.menuAuth")),r=Le("");async function w(){console.log(t.roleId),r.value="home"}async function h(a){r.value=a}const b=Le([]);async function p(){const{error:a,data:_}=await bt();a||(b.value=_)}const x=z(()=>b.value.map(_=>({label:_,value:_}))),S=Le([]);async function y(){const{error:a,data:_}=await pt();a||(S.value=_)}const T=Le([]);async function k(){console.log(t.roleId),T.value=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}function C(){var a,_;console.log(T.value,t.roleId),(_=(a=window.$message)==null?void 0:a.success)==null||_.call(a,N("common.modifySuccess")),d()}function c(){w(),p(),y(),k()}return Ae(i,a=>{a&&c()}),(a,_)=>{const A=Fn,B=Vn,G=Fe,L=Ze,K=On;return ye(),Be(K,{show:i.value,"onUpdate:show":_[1]||(_[1]=I=>i.value=I),title:s.value,preset:"card",class:"w-480px"},{footer:R(()=>[m(L,{justify:"end"},{default:R(()=>[m(G,{size:"small",class:"mt-16px",onClick:d},{default:R(()=>[ge(fe(v(N)("common.cancel")),1)]),_:1}),m(G,{type:"primary",size:"small",class:"mt-16px",onClick:C},{default:R(()=>[ge(fe(v(N)("common.confirm")),1)]),_:1})]),_:1})]),default:R(()=>[Sn("div",wl,[Sn("div",null,fe(v(N)("page.manage.menu.home")),1),m(A,{value:r.value,options:x.value,size:"small",class:"w-160px","onUpdate:value":h},null,8,["value","options"])]),m(B,{"checked-keys":T.value,"onUpdate:checkedKeys":_[0]||(_[0]=I=>T.value=I),data:S.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Cl=re({name:"ButtonAuthModal",__name:"button-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Qe(e,"visible");function d(){i.value=!1}const s=z(()=>N("common.edit")+N("page.manage.role.buttonAuth")),r=Le([]);async function w(){r.value=[{id:1,label:"button1",code:"code1"},{id:2,label:"button2",code:"code2"},{id:3,label:"button3",code:"code3"},{id:4,label:"button4",code:"code4"},{id:5,label:"button5",code:"code5"},{id:6,label:"button6",code:"code6"},{id:7,label:"button7",code:"code7"},{id:8,label:"button8",code:"code8"},{id:9,label:"button9",code:"code9"},{id:10,label:"button10",code:"code10"}]}const h=Le([]);async function b(){console.log(t.roleId),h.value=[1,2,3,4,5]}function p(){var S,y;console.log(h.value,t.roleId),(y=(S=window.$message)==null?void 0:S.success)==null||y.call(S,N("common.modifySuccess")),d()}function x(){w(),b()}return x(),(S,y)=>{const T=Vn,k=Fe,C=Ze,c=On;return ye(),Be(c,{show:i.value,"onUpdate:show":y[1]||(y[1]=a=>i.value=a),title:s.value,preset:"card",class:"w-480px"},{footer:R(()=>[m(C,{justify:"end"},{default:R(()=>[m(k,{size:"small",class:"mt-16px",onClick:d},{default:R(()=>[ge(fe(v(N)("common.cancel")),1)]),_:1}),m(k,{type:"primary",size:"small",class:"mt-16px",onClick:p},{default:R(()=>[ge(fe(v(N)("common.confirm")),1)]),_:1})]),_:1})]),default:R(()=>[m(T,{"checked-keys":h.value,"onUpdate:checkedKeys":y[0]||(y[0]=a=>h.value=a),data:r.value,"key-field":"id","block-line":"",checkable:"","expand-on-click":"","virtual-scroll":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Rl=re({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:ze({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ze(["submitted"],["update:visible"]),setup(e,{emit:t}){const i=e,d=t,s=Qe(e,"visible"),{formRef:r,validate:w,restoreValidation:h}=nl(),{defaultRequiredRule:b}=tl(),{bool:p,setTrue:x}=Dn(),{bool:S,setTrue:y}=Dn(),T=z(()=>({add:N("page.manage.role.addRole"),edit:N("page.manage.role.editRole")})[i.operateType]),k=Vt(C());function C(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const c={roleName:b,roleCode:b,status:b},a=z(()=>{var L;return((L=i.rowData)==null?void 0:L.id)||-1}),_=z(()=>i.operateType==="edit");function A(){Object.assign(k,C()),i.operateType==="edit"&&i.rowData&&Object.assign(k,i.rowData)}function B(){s.value=!1}async function G(){var L;await w(),(L=window.$message)==null||L.success(N("common.updateSuccess")),B(),d("submitted")}return Ae(s,()=>{s.value&&(A(),h())}),(L,K)=>{const I=In,le=ll,de=kt,W=yt,ke=Un,ve=Fe,Y=Ze,oe=Xt,he=Yt;return ye(),Be(he,{show:s.value,"onUpdate:show":K[6]||(K[6]=j=>s.value=j),"display-directive":"show",width:360},{default:R(()=>[m(oe,{title:T.value,"native-scrollbar":!1,closable:""},{footer:R(()=>[m(Y,{size:16},{default:R(()=>[m(ve,{onClick:B},{default:R(()=>[ge(fe(v(N)("common.cancel")),1)]),_:1}),m(ve,{type:"primary",onClick:G},{default:R(()=>[ge(fe(v(N)("common.confirm")),1)]),_:1})]),_:1})]),default:R(()=>[m(ke,{ref_key:"formRef",ref:r,model:k,rules:c},{default:R(()=>[m(le,{label:v(N)("page.manage.role.roleName"),path:"roleName"},{default:R(()=>[m(I,{value:k.roleName,"onUpdate:value":K[0]||(K[0]=j=>k.roleName=j),placeholder:v(N)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(le,{label:v(N)("page.manage.role.roleCode"),path:"roleCode"},{default:R(()=>[m(I,{value:k.roleCode,"onUpdate:value":K[1]||(K[1]=j=>k.roleCode=j),placeholder:v(N)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(le,{label:v(N)("page.manage.role.roleStatus"),path:"status"},{default:R(()=>[m(W,{value:k.status,"onUpdate:value":K[2]||(K[2]=j=>k.status=j)},{default:R(()=>[(ye(!0),En(Gt,null,qt(v(An),j=>(ye(),Be(de,{key:j.value,value:j.value,label:v(N)(j.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),m(le,{label:v(N)("page.manage.role.roleDesc"),path:"roleDesc"},{default:R(()=>[m(I,{value:k.roleDesc,"onUpdate:value":K[3]||(K[3]=j=>k.roleDesc=j),placeholder:v(N)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),_.value?(ye(),Be(Y,{key:0},{default:R(()=>[m(ve,{onClick:v(x)},{default:R(()=>[ge(fe(v(N)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),m(Nl,{visible:v(p),"onUpdate:visible":K[4]||(K[4]=j=>Pe(p)?p.value=j:null),"role-id":a.value},null,8,["visible","role-id"]),m(ve,{onClick:v(y)},{default:R(()=>[ge(fe(v(N)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),m(Cl,{visible:v(S),"onUpdate:visible":K[5]||(K[5]=j=>Pe(S)?S.value=j:null),"role-id":a.value},null,8,["visible","role-id"])]),_:1})):Wt("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),Sl=re({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:ze(["reset","search"],["update:model"]),setup(e,{emit:t}){const i=t,d=Qe(e,"model");function s(){i("reset")}function r(){i("search")}return(w,h)=>{const b=In,p=xt,x=Fn,S=ol,y=Fe,T=al,k=Ze,C=dl,c=Un,a=il,_=rl,A=$n;return ye(),Be(A,{bordered:!1,size:"small",class:"card-wrapper"},{default:R(()=>[m(_,{"default-expanded-names":["role-search"]},{default:R(()=>[m(a,{title:v(N)("common.search"),name:"role-search"},{default:R(()=>[m(c,{model:d.value,"label-placement":"left","label-width":80},{default:R(()=>[m(C,{responsive:"screen","item-responsive":""},{default:R(()=>[m(p,{span:"24 s:12 m:6",label:v(N)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:R(()=>[m(b,{value:d.value.roleName,"onUpdate:value":h[0]||(h[0]=B=>d.value.roleName=B),placeholder:v(N)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6",label:v(N)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:R(()=>[m(b,{value:d.value.roleCode,"onUpdate:value":h[1]||(h[1]=B=>d.value.roleCode=B),placeholder:v(N)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6",label:v(N)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:R(()=>[m(x,{value:d.value.status,"onUpdate:value":h[2]||(h[2]=B=>d.value.status=B),placeholder:v(N)("page.manage.role.form.roleStatus"),options:v(Jt)(v(An)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6"},{default:R(()=>[m(k,{class:"w-full",justify:"end"},{default:R(()=>[m(y,{onClick:s},{icon:R(()=>[m(S,{class:"text-icon"})]),default:R(()=>[ge(" "+fe(v(N)("common.reset")),1)]),_:1}),m(y,{type:"primary",ghost:"",onClick:r},{icon:R(()=>[m(T,{class:"text-icon"})]),default:R(()=>[ge(" "+fe(v(N)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1})]),_:1})}}}),Dl={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!el(e)}const Fl=re({name:"manage_role",__name:"index",setup(e){const t=Qt(),{columns:i,columnChecks:d,data:s,loading:r,getData:w,getDataByPage:h,mobilePagination:b,searchParams:p,resetSearchParams:x}=_t({apiFn:Nt,apiParams:{current:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:N("common.index"),width:64,align:"center"},{key:"roleName",title:N("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:N("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:N("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:N("page.manage.role.roleStatus"),align:"center",width:100,render:L=>{if(L.status===null)return null;const K={1:"success",2:"warning"},I=N(Ct[L.status]);return m(Zt,{type:K[L.status]},hn(I)?I:{default:()=>[I]})}},{key:"operate",title:N("common.operate"),align:"center",width:130,render:L=>{let K;return m("div",{class:"flex-center gap-8px"},[m(Fe,{type:"primary",ghost:!0,size:"small",onClick:()=>G(L.id)},hn(K=N("common.edit"))?K:{default:()=>[K]}),m(Rt,{onPositiveClick:()=>B(L.id)},{default:()=>N("common.confirmDelete"),trigger:()=>{let I;return m(Fe,{type:"error",ghost:!0,size:"small"},hn(I=N("common.delete"))?I:{default:()=>[I]})}})])}}]}),{drawerVisible:S,operateType:y,editingData:T,handleAdd:k,handleEdit:C,checkedRowKeys:c,onBatchDeleted:a,onDeleted:_}=wt(s,w);async function A(){console.log(c.value),a()}function B(L){console.log(L),_()}function G(L){C(L)}return(L,K)=>{const I=St,le=Dt,de=$n;return ye(),En("div",Dl,[m(Sl,{model:v(p),"onUpdate:model":K[0]||(K[0]=W=>Pe(p)?p.value=W:null),onReset:v(x),onSearch:v(h)},null,8,["model","onReset","onSearch"]),m(de,{title:v(N)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":R(()=>[m(I,{columns:v(d),"onUpdate:columns":K[1]||(K[1]=W=>Pe(d)?d.value=W:null),"disabled-delete":v(c).length===0,loading:v(r),onAdd:v(k),onDelete:A,onRefresh:v(w)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:R(()=>[m(le,{"checked-row-keys":v(c),"onUpdate:checkedRowKeys":K[2]||(K[2]=W=>Pe(c)?c.value=W:null),columns:v(i),data:v(s),size:"small","flex-height":!v(t).isMobile,"scroll-x":702,loading:v(r),remote:"","row-key":W=>W.id,pagination:v(b),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),m(Rl,{visible:v(S),"onUpdate:visible":K[3]||(K[3]=W=>Pe(S)?S.value=W:null),"operate-type":v(y),"row-data":v(T),onSubmitted:v(h)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Fl as default};
