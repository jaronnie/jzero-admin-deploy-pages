import{r as A,a as P,k as H,l as Z,d as z,m as j,o as $,b as U,e as c,n as W,u as F,p as M,c as B,w as a,f as t,h as o,$ as s,g as k,t as v,q as R,s as E,v as D,x as J,B as I,y as Q,S as X,z as Y,A as ee,C as oe,D as ne,E as te,T as le,F as ae,G as se,H as re,I as ie,J as de,K as ce}from"./index-DRO09bc5.js";import{u as G,a as T,_ as O,b as K,R as pe,c as ue}from"./form-BrkdLaAD.js";import{_ as V}from"./Space-tk-75eGd.js";function me(C){const p=A(0),f=P(()=>Math.ceil(p.value/60)),h=P(()=>p.value>0),{pause:i,resume:x}=H(()=>{p.value>0?p.value-=1:i()},{immediate:!1});function y(n=C){p.value=60*n,x()}function w(){p.value=0,i()}return Z(()=>{i()}),{count:f,isCounting:h,start:y,stop:w}}const fe={class:"absolute-lt z-1 size-full overflow-hidden"},ge={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},_e={height:"1337",width:"1337"},we={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},ve=["stop-color"],he=["stop-color"],ye={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Ce={height:"896",width:"967.8852157128662"},xe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},be=["stop-color"],ke=["stop-color"],Pe=z({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(C){const g=C,p=P(()=>j(g.themeColor,200)),f=P(()=>j(g.themeColor,500));return(h,i)=>($(),U("div",fe,[c("div",ge,[($(),U("svg",_e,[c("defs",null,[i[0]||(i[0]=c("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),c("linearGradient",we,[c("stop",{offset:"0","stop-color":p.value,"stop-opacity":"1"},null,8,ve),c("stop",{offset:"1","stop-color":f.value,"stop-opacity":"1"},null,8,he)])]),i[1]||(i[1]=c("g",{opacity:"1"},[c("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),c("div",ye,[($(),U("svg",Ce,[c("defs",null,[i[2]||(i[2]=c("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),c("linearGradient",xe,[c("stop",{offset:"0","stop-color":f.value,"stop-opacity":"1"},null,8,be),c("stop",{offset:"1","stop-color":p.value,"stop-opacity":"1"},null,8,ke)])]),i[3]||(i[3]=c("g",{opacity:"1"},[c("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),$e={class:"flex-y-center justify-between"},Se={class:"flex-y-center justify-between gap-12px"},Ne=z({name:"PwdLogin",__name:"pwd-login",setup(C){const g=W(),{toggleLoginModule:p}=F(),{formRef:f,validate:h}=G(),i=M({username:"jzero",password:"123456"}),x=P(()=>{const{formRules:w}=T();return{username:w.username,password:w.pwd}});async function y(){await h(),await g.loginByPwd(i.username,i.password)}return(w,n)=>{const _=D,b=O,r=J,e=I,l=V,d=K;return $(),B(d,{ref_key:"formRef",ref:f,model:i,rules:x.value,size:"large","show-label":!1,onKeyup:E(y,["enter"])},{default:a(()=>[t(b,{path:"username"},{default:a(()=>[t(_,{value:i.username,"onUpdate:value":n[0]||(n[0]=u=>i.username=u),placeholder:o(s)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),t(b,{path:"password"},{default:a(()=>[t(_,{value:i.password,"onUpdate:value":n[1]||(n[1]=u=>i.password=u),type:"password","show-password-on":"click",placeholder:o(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(l,{vertical:"",size:24},{default:a(()=>[c("div",$e,[t(r,null,{default:a(()=>[k(v(o(s)("page.login.pwdLogin.rememberMe")),1)]),_:1}),t(e,{quaternary:"",onClick:n[2]||(n[2]=u=>o(p)("reset-pwd"))},{default:a(()=>[k(v(o(s)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),t(e,{type:"primary",size:"large",round:"",block:"",loading:o(g).loginLoading,onClick:y},{default:a(()=>[k(v(o(s)("common.confirm")),1)]),_:1},8,["loading"]),c("div",Se,[t(e,{class:"flex-1",block:"",onClick:n[3]||(n[3]=u=>o(p)("code-login"))},{default:a(()=>[k(v(o(s)(o(R)["code-login"],{type:o(s)("page.login.codeLogin.emailType")})),1)]),_:1}),t(e,{class:"flex-1",block:"",onClick:n[4]||(n[4]=u=>o(p)("register"))},{default:a(()=>[k(v(o(s)(o(R).register)),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}});function q(){const{loading:C,startLoading:g,endLoading:p}=Q(),{count:f,start:h,stop:i,isCounting:x}=me(30),y=A(""),w=P(()=>{let r=s("page.login.codeLogin.getCode");const e=s("page.login.codeLogin.reGetCode",{time:f.value});return C.value&&(r=""),x.value&&(r=e),r});function n(r){var e,l,d,u;return r.trim()===""?((l=(e=window.$message)==null?void 0:e.error)==null||l.call(e,s("form.email.required")),!1):pe.test(r)?!0:((u=(d=window.$message)==null?void 0:d.error)==null||u.call(d,s("form.email.invalid")),!1)}function _(r){var e,l,d,u;return r.trim()===""?((l=(e=window.$message)==null?void 0:e.error)==null||l.call(e,s("form.phone.required")),!1):ue.test(r)?!0:((u=(d=window.$message)==null?void 0:d.error)==null||u.call(d,s("form.phone.invalid")),!1)}async function b(r,e){var d,u;let l;if(r==="email"?l=n(e):l=_(e),!(!l||C.value)){g();try{const S={verificationType:r,email:e},{data:N,error:m}=await X(S);m||((u=(d=window.$message)==null?void 0:d.success)==null||u.call(d,s("page.login.codeLogin.sendCodeSuccess")),y.value=N==null?void 0:N.verificationUuid)}finally{h(),p()}}}return{label:w,start:h,stop:i,isCounting:x,loading:C,getCaptcha:b,verificationUuid:y}}const Re={class:"w-full flex-y-center gap-16px"},ze=z({name:"CodeLogin",__name:"code-login",setup(C){const g=W(),{toggleLoginModule:p}=F(),{formRef:f,validate:h}=G(),{label:i,isCounting:x,loading:y,getCaptcha:w,verificationUuid:n}=q(),_=M({email:"",code:""}),b=P(()=>{const{formRules:e}=T();return{email:e.email,code:e.code}});async function r(){await h();const e={verificationCode:_.code,email:_.email,verificationUuid:n.value};await g.loginByCode(e)}return(e,l)=>{const d=D,u=O,S=I,N=V,m=K;return $(),B(m,{ref_key:"formRef",ref:f,model:_,rules:b.value,size:"large","show-label":!1,onKeyup:E(r,["enter"])},{default:a(()=>[t(u,{path:"email"},{default:a(()=>[t(d,{value:_.email,"onUpdate:value":l[0]||(l[0]=L=>_.email=L),placeholder:o(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(u,{path:"code"},{default:a(()=>[c("div",Re,[t(d,{value:_.code,"onUpdate:value":l[1]||(l[1]=L=>_.code=L),placeholder:o(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(S,{size:"large",disabled:o(x),loading:o(y),onClick:l[2]||(l[2]=L=>o(w)("email",_.email))},{default:a(()=>[k(v(o(i)),1)]),_:1},8,["disabled","loading"])])]),_:1}),t(N,{vertical:"",size:18,class:"w-full"},{default:a(()=>[t(S,{type:"primary",size:"large",round:"",block:"",onClick:r},{default:a(()=>[k(v(o(s)("common.confirm")),1)]),_:1}),t(S,{size:"large",round:"",block:"",onClick:l[3]||(l[3]=L=>o(p)("pwd-login"))},{default:a(()=>[k(v(o(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Le={class:"w-full flex-y-center gap-16px"},Ue=z({name:"Register",__name:"register",setup(C){const{toggleLoginModule:g}=F(),{formRef:p,validate:f}=G(),{label:h,isCounting:i,loading:x,getCaptcha:y,verificationUuid:w}=q(),n=M({email:"",code:"",username:"",password:"",confirmPassword:""}),_=P(()=>{const{formRules:r,createConfirmPwdRule:e}=T();return{email:r.email,code:r.code,username:r.username,password:r.pwd,confirmPassword:e(n.password)}});async function b(){var l;await f();const r={verificationCode:n.code,username:n.username,password:n.password,email:n.email,verificationUuid:w.value},{error:e}=await Y(r);e||((l=window.$message)==null||l.success(s("page.login.common.registerSuccess")),await g("pwd-login"))}return(r,e)=>{const l=D,d=O,u=I,S=V,N=K;return $(),B(N,{ref_key:"formRef",ref:p,model:n,rules:_.value,size:"large","show-label":!1,onKeyup:E(b,["enter"])},{default:a(()=>[t(d,{path:"username"},{default:a(()=>[t(l,{value:n.username,"onUpdate:value":e[0]||(e[0]=m=>n.username=m),placeholder:o(s)("page.login.common.usernamePlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"password"},{default:a(()=>[t(l,{value:n.password,"onUpdate:value":e[1]||(e[1]=m=>n.password=m),type:"password","show-password-on":"click",placeholder:o(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"confirmPassword"},{default:a(()=>[t(l,{value:n.confirmPassword,"onUpdate:value":e[2]||(e[2]=m=>n.confirmPassword=m),type:"password","show-password-on":"click",placeholder:o(s)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"email"},{default:a(()=>[t(l,{value:n.email,"onUpdate:value":e[3]||(e[3]=m=>n.email=m),placeholder:o(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"code"},{default:a(()=>[c("div",Le,[t(l,{value:n.code,"onUpdate:value":e[4]||(e[4]=m=>n.code=m),placeholder:o(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(u,{size:"large",disabled:o(i),loading:o(x),onClick:e[5]||(e[5]=m=>o(y)("email",n.email))},{default:a(()=>[k(v(o(h)),1)]),_:1},8,["disabled","loading"])])]),_:1}),t(S,{vertical:"",size:18,class:"w-full"},{default:a(()=>[t(u,{type:"primary",size:"large",round:"",block:"",onClick:b},{default:a(()=>[k(v(o(s)("common.confirm")),1)]),_:1}),t(u,{size:"large",round:"",block:"",onClick:e[6]||(e[6]=m=>o(g)("pwd-login"))},{default:a(()=>[k(v(o(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Be={class:"w-full flex-y-center gap-16px"},Fe=z({name:"ResetPwd",__name:"reset-pwd",setup(C){const{toggleLoginModule:g}=F(),{formRef:p,validate:f}=G(),{label:h,isCounting:i,loading:x,getCaptcha:y,verificationUuid:w}=q(),n=M({email:"",code:"",password:"",confirmPassword:""}),_=P(()=>{const{formRules:r,createConfirmPwdRule:e}=T();return{phone:r.phone,password:r.pwd,confirmPassword:e(n.password)}});async function b(){var l;await f();const r={verificationCode:n.code,email:n.email,verificationUuid:w.value,password:n.password},{error:e}=await ee(r);e||((l=window.$message)==null||l.success(s("common.modifySuccess")),await g("pwd-login"))}return(r,e)=>{const l=D,d=O,u=I,S=V,N=K;return $(),B(N,{ref_key:"formRef",ref:p,model:n,rules:_.value,size:"large","show-label":!1,onKeyup:E(b,["enter"])},{default:a(()=>[t(d,{path:"email"},{default:a(()=>[t(l,{value:n.email,"onUpdate:value":e[0]||(e[0]=m=>n.email=m),placeholder:o(s)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"code"},{default:a(()=>[c("div",Be,[t(l,{value:n.code,"onUpdate:value":e[1]||(e[1]=m=>n.code=m),placeholder:o(s)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),t(u,{size:"large",disabled:o(i),loading:o(x),onClick:e[2]||(e[2]=m=>o(y)("email",n.email))},{default:a(()=>[k(v(o(h)),1)]),_:1},8,["disabled","loading"])])]),_:1}),t(d,{path:"password"},{default:a(()=>[t(l,{value:n.password,"onUpdate:value":e[3]||(e[3]=m=>n.password=m),type:"password","show-password-on":"click",placeholder:o(s)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(d,{path:"confirmPassword"},{default:a(()=>[t(l,{value:n.confirmPassword,"onUpdate:value":e[4]||(e[4]=m=>n.confirmPassword=m),type:"password","show-password-on":"click",placeholder:o(s)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(S,{vertical:"",size:18,class:"w-full"},{default:a(()=>[t(u,{type:"primary",size:"large",round:"",block:"",onClick:b},{default:a(()=>[k(v(o(s)("common.confirm")),1)]),_:1}),t(u,{size:"large",round:"",block:"",onClick:e[5]||(e[5]=m=>o(g)("pwd-login"))},{default:a(()=>[k(v(o(s)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Me=z({name:"BindWechat",__name:"bind-wechat",setup(C){return(g,p)=>($(),U("div"))}}),Ee={class:"w-400px lt-sm:w-300px"},De={class:"flex-y-center justify-between"},Ie={class:"text-28px text-primary font-500 lt-sm:text-22px"},Ge={class:"i-flex-col"},Te={class:"pt-24px"},Oe={class:"text-18px text-primary font-medium"},Ke={class:"pt-24px"},Ae=z({name:"login",__name:"index",props:{module:{}},setup(C){const g=C,p=oe(),f=ne(),h={"pwd-login":{label:R["pwd-login"],component:Ne},"code-login":{label:R["code-login"],component:ze},register:{label:R.register,component:Ue},"reset-pwd":{label:R["reset-pwd"],component:Fe},"bind-wechat":{label:R["bind-wechat"],component:Me}},i=P(()=>h[g.module||"pwd-login"]),x=P(()=>f.darkMode?j(f.themeColor,600):f.themeColor),y=P(()=>{const w="#ffffff",n=f.darkMode?.5:.2;return te(w,f.themeColor,n)});return(w,n)=>{const _=Pe,b=re,r=ie,e=de,l=ce;return $(),U("div",{class:"relative size-full flex-center overflow-hidden",style:se({backgroundColor:y.value})},[t(_,{"theme-color":x.value},null,8,["theme-color"]),t(l,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:a(()=>[c("div",Ee,[c("header",De,[t(b,{class:"text-64px text-primary lt-sm:text-48px"}),c("h3",Ie,v(o(s)("system.title")),1),c("div",Ge,[t(r,{"theme-schema":o(f).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:o(f).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),t(e,{lang:o(p).locale,"lang-options":o(p).localeOptions,"show-tooltip":!1,onChangeLang:o(p).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),c("main",Te,[c("h3",Oe,v(o(s)(i.value.label)),1),c("div",Ke,[t(le,{name:o(f).page.animateMode,mode:"out-in",appear:""},{default:a(()=>[($(),B(ae(i.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Ae as default};
