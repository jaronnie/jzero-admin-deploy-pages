import{l as bt,n as pt,e as Ln,o as yt,b as kt,_ as xt,c as _t,u as wt,f as Nt,p as Ct,i as Rt,N as St,j as Dt,k as Kt}from"./business-Sqt55thM.js";import{d as ce,a1 as D,aa as An,ab as Ee,aM as Tt,aN as Lt,av as At,x as Pt,r as W,aO as cn,a as H,aP as Ft,aQ as Z,i as Bt,a2 as Et,aR as Ye,aS as Pn,aT as Ot,L as j,K as fe,N as q,aU as xn,O as Ke,M as Te,aV as It,U as $t,a6 as Ut,V as Fn,aW as Mt,aX as _n,aY as Ue,a9 as B,ao as Xe,aD as Le,aZ as Je,a_ as Me,a$ as wn,b0 as zt,ay as te,a8 as jt,b1 as un,Y as Ht,aq as Nn,b2 as Vt,b3 as Cn,b4 as Rn,aB as ze,aC as Qe,$ as w,b5 as Ae,o as ye,c as Fe,w as N,f as m,g as me,t as he,h as v,e as Sn,aF as Bn,B as Be,aI as En,aJ as Dn,y as qt,p as Gt,b as On,a3 as Wt,a4 as Yt,aK as Pe,aE as Xt,v as In,b6 as Jt,b7 as Qt,b8 as Zt,J as $n,A as el,a5 as nl,aL as tl}from"./index-DIqQuXKd.js";import{u as ll,a as ol,_ as al,b as Un}from"./form-C53fGYBJ.js";import{_ as Ze}from"./Space-BVQeD63l.js";import{_ as il,a as rl,b as dl,c as sl}from"./round-refresh-w1wqz3PV.js";import{a as cl}from"./Grid-Ho0TjECJ.js";function Mn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const ul=ce({name:"Switcher",render(){return D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},D("path",{d:"M12 8l10 8l-10 8z"}))}}),zn=An("n-tree-select"),je=An("n-tree"),fl=ce({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Ee(je,null);return()=>{const{clsPrefix:i,expanded:d,hide:s,indent:r,onClick:_}=e;return D("span",{"data-switcher":!0,class:[`${i}-tree-node-switcher`,d&&`${i}-tree-node-switcher--expanded`,s&&`${i}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:_},D("div",{class:`${i}-tree-node-switcher__icon`},D(Tt,null,{default:()=>{if(e.loading)return D(Lt,{clsPrefix:i,key:"loading",radius:85,strokeWidth:20});const{value:h}=t;return h?h({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):D(At,{clsPrefix:i,key:"switcher"},{default:()=>D(ul,null)})}})))}}}),hl=ce({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ee(je);function i(s){const{onCheck:r}=e;r&&r(s)}function d(s){i(s)}return{handleUpdateValue:d,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:i,indeterminate:d,disabled:s,focusable:r,indent:_,handleUpdateValue:h}=this;return D("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${_}px`},"data-checkbox":!0},D(Pt,{focusable:r,disabled:s,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:i,indeterminate:d,onUpdateChecked:h}))}}),gl=ce({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:i,renderSuffixRef:d,labelFieldRef:s}=Ee(je),r=W(null);function _(b){const{onClick:p}=e;p&&p(b)}function h(b){_(b)}return{selfRef:r,renderLabel:t,renderPrefix:i,renderSuffix:d,labelField:s,handleClick:h}},render(){const{clsPrefix:e,labelField:t,nodeProps:i,checked:d=!1,selected:s=!1,renderLabel:r,renderPrefix:_,renderSuffix:h,handleClick:b,onDragstart:p,tmNode:{rawNode:k,rawNode:{prefix:C,suffix:y,[t]:K}}}=this;return D("span",Object.assign({},i,{ref:"selfRef",class:[`${e}-tree-node-content`,i==null?void 0:i.class],onClick:b,draggable:p===void 0?void 0:!0,onDragstart:p}),_||C?D("div",{class:`${e}-tree-node-content__prefix`},_?_({option:k,selected:s,checked:d}):cn(C)):null,D("div",{class:`${e}-tree-node-content__text`},r?r({option:k,selected:s,checked:d}):cn(K)),h||y?D("div",{class:`${e}-tree-node-content__suffix`},h?h({option:k,selected:s,checked:d}):cn(y)):null)}});function Kn({position:e,offsetLevel:t,indent:i,el:d}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";s[r]=0,s.left=`${d.offsetLeft+6-t*i}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=r,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return D("div",{style:s})}function vl({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function ml(e){return H(()=>e.leafOnly?"child":e.checkStrategy)}function pe(e,t){return!!e.rawNode[t]}function jn(e,t,i,d){e==null||e.forEach(s=>{i(s),jn(s[t],t,i,d),d(s)})}function bl(e,t,i,d,s){const r=new Set,_=new Set,h=[];return jn(e,d,b=>{if(h.push(b),s(t,b)){_.add(b[i]);for(let p=h.length-2;p>=0;--p)if(!r.has(h[p][i]))r.add(h[p][i]);else return}},()=>{h.pop()}),{expandedKeys:Array.from(r),highlightKeySet:_}}if(Ft&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function pl(e,t,i,d,s){const r=new Set,_=new Set,h=new Set,b=[],p=[],k=[];function C(K){K.forEach(R=>{if(k.push(R),t(i,R)){r.add(R[d]),h.add(R[d]);for(let c=k.length-2;c>=0;--c){const o=k[c][d];if(!_.has(o))_.add(o),r.has(o)&&r.delete(o);else break}}const S=R[s];S&&C(S),k.pop()})}C(e);function y(K,R){K.forEach(S=>{const c=S[d],o=r.has(c),x=_.has(c);if(!o&&!x)return;const T=S[s];if(T)if(o)R.push(S);else{b.push(c);const A=Object.assign(Object.assign({},S),{[s]:[]});R.push(A),y(T,A[s])}else R.push(S)})}return y(e,p),{filteredTree:p,highlightKeySet:h,expandedKeys:b}}const Hn=ce({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ee(je),{droppingNodeParentRef:i,droppingMouseNodeRef:d,draggingNodeRef:s,droppingPositionRef:r,droppingOffsetLevelRef:_,nodePropsRef:h,indentRef:b,blockLineRef:p,checkboxPlacementRef:k,checkOnClickRef:C,disabledFieldRef:y,showLineRef:K,renderSwitcherIconRef:R,overrideDefaultNodeClickBehaviorRef:S}=t,c=Z(()=>!!e.tmNode.rawNode.checkboxDisabled),o=Z(()=>pe(e.tmNode,y.value)),x=Z(()=>t.disabledRef.value||o.value),T=H(()=>{const{value:u}=h;if(u)return u({option:e.tmNode.rawNode})}),A=W(null),Y={value:null};Bt(()=>{Y.value=A.value.$el});function E(){const u=()=>{const{tmNode:L}=e;if(!L.isLeaf&&!L.shallowLoaded){if(!t.loadingKeysRef.value.has(L.key))t.loadingKeysRef.value.add(L.key);else return;const{onLoadRef:{value:$}}=t;$&&$(L.rawNode).then(G=>{G!==!1&&t.handleSwitcherClick(L)}).finally(()=>{t.loadingKeysRef.value.delete(L.key)})}else t.handleSwitcherClick(L)};R.value?setTimeout(u,0):u()}const O=Z(()=>!o.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),U=Z(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),J=Z(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),I=Z(()=>{const{value:u}=U;if(!u)return!1;const{value:L}=C,{tmNode:$}=e;return typeof L=="boolean"?!$.disabled&&L:L(e.tmNode.rawNode)});function V(u){const{value:L}=t.expandOnClickRef,{value:$}=O,{value:G}=I;if(!$&&!L&&!G||Ye(u,"checkbox")||Ye(u,"switcher"))return;const{tmNode:Q}=e;$&&t.handleSelect(Q),L&&!Q.isLeaf&&E(),G&&re(!J.value)}function ge(u){var L,$;if(!(Ye(u,"checkbox")||Ye(u,"switcher"))){if(!x.value){const G=S.value;let Q=!1;if(G)switch(G({option:e.tmNode.rawNode})){case"toggleCheck":Q=!0,re(!J.value);break;case"toggleSelect":Q=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":Q=!0,E(),Q=!0;break;case"none":Q=!0,Q=!0;return}Q||V(u)}($=(L=T.value)===null||L===void 0?void 0:L.onClick)===null||$===void 0||$.call(L,u)}}function Oe(u){p.value||ge(u)}function ee(u){p.value&&ge(u)}function re(u){t.handleCheck(e.tmNode,u)}function le(u){t.handleDragStart({event:u,node:e.tmNode})}function xe(u){u.currentTarget===u.target&&t.handleDragEnter({event:u,node:e.tmNode})}function oe(u){u.preventDefault(),t.handleDragOver({event:u,node:e.tmNode})}function ve(u){t.handleDragEnd({event:u,node:e.tmNode})}function M(u){u.currentTarget===u.target&&t.handleDragLeave({event:u,node:e.tmNode})}function en(u){u.preventDefault(),r.value!==null&&t.handleDrop({event:u,node:e.tmNode,dropPosition:r.value})}const nn=H(()=>{const{clsPrefix:u}=e,{value:L}=b;if(K.value){const $=[];let G=e.tmNode.parent;for(;G;)G.isLastChild?$.push(D("div",{class:`${u}-tree-node-indent`},D("div",{style:{width:`${L}px`}}))):$.push(D("div",{class:[`${u}-tree-node-indent`,`${u}-tree-node-indent--show-line`]},D("div",{style:{width:`${L}px`}}))),G=G.parent;return $.reverse()}else return Et(e.tmNode.level,D("div",{class:`${e.clsPrefix}-tree-node-indent`},D("div",{style:{width:`${L}px`}})))});return{showDropMark:Z(()=>{const{value:u}=s;if(!u)return;const{value:L}=r;if(!L)return;const{value:$}=d;if(!$)return;const{tmNode:G}=e;return G.key===$.key}),showDropMarkAsParent:Z(()=>{const{value:u}=i;if(!u)return!1;const{tmNode:L}=e,{value:$}=r;return $==="before"||$==="after"?u.key===L.key:!1}),pending:Z(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Z(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Z(()=>{var u;return(u=t.highlightKeySetRef.value)===null||u===void 0?void 0:u.has(e.tmNode.key)}),checked:J,indeterminate:Z(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Z(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Z(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:x,checkable:U,mergedCheckOnClick:I,checkboxDisabled:c,selectable:O,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:p,nodeProps:T,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:_,indent:b,checkboxPlacement:k,showLine:K,contentInstRef:A,contentElRef:Y,indentNodes:nn,handleCheck:re,handleDrop:en,handleDragStart:le,handleDragEnter:xe,handleDragOver:oe,handleDragEnd:ve,handleDragLeave:M,handleLineClick:ee,handleContentClick:Oe,handleSwitcherClick:E}},render(){const{tmNode:e,clsPrefix:t,checkable:i,expandOnClick:d,selectable:s,selected:r,checked:_,highlight:h,draggable:b,blockLine:p,indent:k,indentNodes:C,disabled:y,pending:K,internalScrollable:R,nodeProps:S,checkboxPlacement:c}=this,o=b&&!y?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,x=R?Mn(e.key):void 0,T=c==="right",A=i?D(hl,{indent:k,right:T,focusable:this.checkboxFocusable,disabled:y||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return D("div",Object.assign({class:`${t}-tree-node-wrapper`},o),D("div",Object.assign({},p?S:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:i,[`${t}-tree-node--highlight`]:h,[`${t}-tree-node--pending`]:K,[`${t}-tree-node--disabled`]:y,[`${t}-tree-node--selectable`]:s,[`${t}-tree-node--clickable`]:s||d||this.mergedCheckOnClick},S==null?void 0:S.class],"data-key":x,draggable:b&&p,onClick:this.handleLineClick,onDragstart:b&&p&&!y?this.handleDragStart:void 0}),C,e.isLeaf&&this.showLine?D("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},D("div",{style:{width:`${k}px`}})):D(fl,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:k,onClick:this.handleSwitcherClick}),T?null:A,D(gl,{ref:"contentInstRef",clsPrefix:t,checked:_,selected:r,onClick:this.handleContentClick,nodeProps:p?void 0:S,onDragstart:b&&!p&&!y?this.handleDragStart:void 0,tmNode:e}),b?this.showDropMark?Kn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:k}):this.showDropMarkAsParent?Kn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:k}):null:null,T?A:null))}});function yl({props:e,fNodesRef:t,mergedExpandedKeysRef:i,mergedSelectedKeysRef:d,mergedCheckedKeysRef:s,handleCheck:r,handleSelect:_,handleSwitcherClick:h}){const{value:b}=d,p=Ee(zn,null),k=p?p.pendingNodeKeyRef:W(b.length?b[b.length-1]:null);function C(y){var K;if(!e.keyboard)return{enterBehavior:null};const{value:R}=k;let S=null;if(R===null){if((y.key==="ArrowDown"||y.key==="ArrowUp")&&y.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(y.key)&&R===null){const{value:c}=t;let o=0;for(;o<c.length;){if(!c[o].disabled){k.value=c[o].key;break}o+=1}}}else{const{value:c}=t;let o=c.findIndex(x=>x.key===R);if(!~o)return{enterBehavior:null};if(y.key==="Enter"){const x=c[o];switch(S=((K=e.overrideDefaultNodeClickBehavior)===null||K===void 0?void 0:K.call(e,{option:x.rawNode}))||null,S){case"toggleCheck":r(x,!s.value.includes(x.key));break;case"toggleSelect":_(x);break;case"toggleExpand":h(x);break;case"none":break;case"default":default:S="default",_(x)}}else if(y.key==="ArrowDown")for(y.preventDefault(),o+=1;o<c.length;){if(!c[o].disabled){k.value=c[o].key;break}o+=1}else if(y.key==="ArrowUp")for(y.preventDefault(),o-=1;o>=0;){if(!c[o].disabled){k.value=c[o].key;break}o-=1}else if(y.key==="ArrowLeft"){const x=c[o];if(x.isLeaf||!i.value.includes(R)){const T=x.getParent();T&&(k.value=T.key)}else h(x)}else if(y.key==="ArrowRight"){const x=c[o];if(x.isLeaf)return{enterBehavior:null};if(!i.value.includes(R))h(x);else for(o+=1;o<c.length;){if(!c[o].disabled){k.value=c[o].key;break}o+=1}}}return{enterBehavior:S}}return{pendingNodeKeyRef:k,handleKeydown:C}}const kl=ce({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return D(Ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>D("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Pn(this.height)}},this.nodes.map(t=>D(Hn,{clsPrefix:e,tmNode:t})))})}}),fn=It(),xl=j("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[fe("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),fe(">",[j("tree-node",[fe("&:first-child","margin-top: 0;")])]),j("tree-motion-wrapper",[q("expand",[xn({duration:"0.2s"})]),q("collapse",[xn({duration:"0.2s",reverse:!0})])]),j("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),j("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[q("highlight",[j("tree-node-content",[Ke("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),q("disabled",[j("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Te("disabled",[q("clickable",[j("tree-node-content",`
 cursor: pointer;
 `)])])]),q("block-node",[j("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Te("block-line",[j("tree-node",[Te("disabled",[j("tree-node-content",[fe("&:hover","background: var(--n-node-color-hover);")]),q("selectable",[j("tree-node-content",[fe("&:active","background: var(--n-node-color-pressed);")])]),q("pending",[j("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),q("selected",[j("tree-node-content","background: var(--n-node-color-active);")])]),q("selected",[j("tree-node-content","background: var(--n-node-color-active);")])])]),q("block-line",[j("tree-node",[Te("disabled",[fe("&:hover","background: var(--n-node-color-hover);"),q("pending",`
 background: var(--n-node-color-hover);
 `),q("selectable",[Te("selected",[fe("&:active","background: var(--n-node-color-pressed);")])]),q("selected","background: var(--n-node-color-active);")]),q("selected","background: var(--n-node-color-active);"),q("disabled",`
 cursor: not-allowed;
 `)])]),j("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[q("show-line","position: relative",[fe("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),q("last-child",[fe("&::before",`
 bottom: 50%;
 `)]),q("is-leaf",[fe("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Te("show-line","height: 0;")]),j("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Ke("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[j("icon",[fn]),j("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[fn]),j("base-icon",[fn])]),q("hide","visibility: hidden;"),q("expanded","transform: rotate(90deg);")]),j("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),j("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[fe("&:last-child","margin-bottom: 0;"),Ke("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Ke("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Ke("suffix",`
 display: inline-flex;
 `)]),Ke("empty","margin: auto;")]);var _l=function(e,t,i,d){function s(r){return r instanceof i?r:new i(function(_){_(r)})}return new(i||(i=Promise))(function(r,_){function h(k){try{p(d.next(k))}catch(C){_(C)}}function b(k){try{p(d.throw(k))}catch(C){_(C)}}function p(k){k.done?r(k.value):s(k.value).then(h,b)}p((d=d.apply(e,[])).next())})};function Tn(e,t,i,d){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:d||(r=>r[t]),getDisabled(r){return!!(r[i]||r.checkboxDisabled)}}}const wl={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Nl=Object.assign(Object.assign(Object.assign(Object.assign({},Fn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:vl},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),wl),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Vn=ce({name:"Tree",props:Nl,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:i,mergedRtlRef:d}=$t(e),s=Ut("Tree",d,t),r=Fn("Tree","-tree",xl,Mt,e,t),_=W(null),h=W(null),b=W(null);function p(){var n;return(n=b.value)===null||n===void 0?void 0:n.listElRef}function k(){var n;return(n=b.value)===null||n===void 0?void 0:n.itemsElRef}const C=H(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(a,f)=>{if(!a.length)return!0;const g=f[l];return typeof g=="string"?g.toLowerCase().includes(a.toLowerCase()):!1}}),y=H(()=>{const{pattern:n}=e;return n?!n.length||!C.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:pl(e.data,C.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),K=H(()=>_n(e.showIrrelevantNodes?e.data:y.value.filteredTree,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),R=Ee(zn,null),S=e.internalTreeSelect?R.dataTreeMate:H(()=>e.showIrrelevantNodes?K.value:_n(e.data,Tn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:c}=e,o=W([]);c!=null&&c.includes("defaultCheckedKeys")?Ue(()=>{o.value=e.defaultCheckedKeys}):o.value=e.defaultCheckedKeys;const x=B(e,"checkedKeys"),T=Xe(x,o),A=H(()=>S.value.getCheckedKeys(T.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),Y=ml(e),E=H(()=>A.value.checkedKeys),O=H(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:A.value.indeterminateKeys}),U=W([]);c!=null&&c.includes("defaultSelectedKeys")?Ue(()=>{U.value=e.defaultSelectedKeys}):U.value=e.defaultSelectedKeys;const J=B(e,"selectedKeys"),I=Xe(J,U),V=W([]),ge=n=>{V.value=e.defaultExpandAll?S.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};c!=null&&c.includes("defaultExpandedKeys")?Ue(()=>{ge(void 0)}):Ue(()=>{ge(e.defaultExpandedKeys)});const Oe=B(e,"expandedKeys"),ee=Xe(Oe,V),re=H(()=>K.value.getFlattenedNodes(ee.value)),{pendingNodeKeyRef:le,handleKeydown:xe}=yl({props:e,mergedCheckedKeysRef:T,mergedSelectedKeysRef:I,fNodesRef:re,mergedExpandedKeysRef:ee,handleCheck:rn,handleSelect:dn,handleSwitcherClick:mn});let oe=null,ve=null;const M=W(new Set),en=H(()=>e.internalHighlightKeySet||y.value.highlightKeySet),nn=Xe(en,M),u=W(new Set),L=H(()=>ee.value.filter(n=>!u.value.has(n)));let $=0;const G=W(null),Q=W(null),He=W(null),Ve=W(null),qe=W(0),qn=H(()=>{const{value:n}=Q;return n?n.parent:null});let tn=!1;Le(B(e,"data"),()=>{tn=!0,Je(()=>{tn=!1}),u.value.clear(),le.value=null,$e()},{deep:!1});let ln=!1;const on=()=>{ln=!0,Je(()=>{ln=!1})};let Ie;Le(B(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ie=void 0,n){const{expandedKeys:a,highlightKeySet:f}=bl(e.data,e.pattern,e.keyField,e.childrenField,C.value);M.value=f,on(),we(a,ae(a),{node:null,action:"filter"})}else M.value=new Set;else if(!n.length)Ie!==void 0&&(on(),we(Ie,ae(Ie),{node:null,action:"filter"}));else{l.length||(Ie=ee.value);const{expandedKeys:a}=y.value;a!==void 0&&(on(),we(a,ae(a),{node:null,action:"filter"}))}});function gn(n){return _l(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:a}=u;if(!a.has(n.key)){a.add(n.key);try{(yield l(n.rawNode))===!1&&Ne()}catch(f){console.error(f),Ne()}a.delete(n.key)}})}Ue(()=>{var n;const{value:l}=K;if(!l)return;const{getNode:a}=l;(n=ee.value)===null||n===void 0||n.forEach(f=>{const g=a(f);g&&!g.shallowLoaded&&gn(g)})});const _e=W(!1),be=W([]);Le(L,(n,l)=>{if(!e.animated||ln){Je(Ge);return}if(tn)return;const a=Me(r.value.self.nodeHeight),f=new Set(l);let g=null,z=null;for(const F of n)if(!f.has(F)){if(g!==null)return;g=F}const ne=new Set(n);for(const F of l)if(!ne.has(F)){if(z!==null)return;z=F}if(g===null&&z===null)return;const{virtualScroll:ie}=e,Re=(ie?b.value.listElRef:_.value).offsetHeight,Se=Math.ceil(Re/a)+1;let de;if(g!==null&&(de=l),z!==null&&(de===void 0?de=n:de=de.filter(F=>F!==z)),_e.value=!0,be.value=K.value.getFlattenedNodes(de),g!==null){const F=be.value.findIndex(se=>se.key===g);if(~F){const se=be.value[F].children;if(se){const ue=wn(se,n);be.value.splice(F+1,0,{__motion:!0,mode:"expand",height:ie?ue.length*a:void 0,nodes:ie?ue.slice(0,Se):ue})}}}if(z!==null){const F=be.value.findIndex(se=>se.key===z);if(~F){const se=be.value[F].children;if(!se)return;_e.value=!0;const ue=wn(se,n);be.value.splice(F+1,0,{__motion:!0,mode:"collapse",height:ie?ue.length*a:void 0,nodes:ie?ue.slice(0,Se):ue})}}});const Gn=H(()=>zt(re.value)),Wn=H(()=>_e.value?be.value:re.value);function Ge(){const{value:n}=h;n&&n.sync()}function Yn(){_e.value=!1,e.virtualScroll&&Je(Ge)}function ae(n){const{getNode:l}=S.value;return n.map(a=>{var f;return((f=l(a))===null||f===void 0?void 0:f.rawNode)||null})}function we(n,l,a){const{"onUpdate:expandedKeys":f,onUpdateExpandedKeys:g}=e;V.value=n,f&&te(f,n,l,a),g&&te(g,n,l,a)}function vn(n,l,a){const{"onUpdate:checkedKeys":f,onUpdateCheckedKeys:g}=e;o.value=n,g&&te(g,n,l,a),f&&te(f,n,l,a)}function Xn(n,l){const{"onUpdate:indeterminateKeys":a,onUpdateIndeterminateKeys:f}=e;a&&te(a,n,l),f&&te(f,n,l)}function an(n,l,a){const{"onUpdate:selectedKeys":f,onUpdateSelectedKeys:g}=e;U.value=n,g&&te(g,n,l,a),f&&te(f,n,l,a)}function Jn(n){const{onDragenter:l}=e;l&&te(l,n)}function Qn(n){const{onDragleave:l}=e;l&&te(l,n)}function Zn(n){const{onDragend:l}=e;l&&te(l,n)}function et(n){const{onDragstart:l}=e;l&&te(l,n)}function nt(n){const{onDragover:l}=e;l&&te(l,n)}function tt(n){const{onDrop:l}=e;l&&te(l,n)}function $e(){lt(),ke()}function lt(){G.value=null}function ke(){qe.value=0,Q.value=null,He.value=null,Ve.value=null,Ne()}function Ne(){oe&&(window.clearTimeout(oe),oe=null),ve=null}function rn(n,l){if(e.disabled||pe(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){dn(n);return}const a=l?"check":"uncheck",{checkedKeys:f,indeterminateKeys:g}=S.value[a](n.key,E.value,{cascade:e.cascade,checkStrategy:Y.value,allowNotLoaded:e.allowCheckingNotLoaded});vn(f,ae(f),{node:n.rawNode,action:a}),Xn(g,ae(g))}function ot(n){if(e.disabled)return;const{key:l}=n,{value:a}=ee,f=a.findIndex(g=>g===l);if(~f){const g=Array.from(a);g.splice(f,1),we(g,ae(g),{node:n.rawNode,action:"collapse"})}else{const g=K.value.getNode(l);if(!g||g.isLeaf)return;let z;if(e.accordion){const ne=new Set(n.siblings.map(({key:ie})=>ie));z=a.filter(ie=>!ne.has(ie)),z.push(l)}else z=a.concat(l);we(z,ae(z),{node:n.rawNode,action:"expand"})}}function mn(n){e.disabled||_e.value||ot(n)}function dn(n){if(!(e.disabled||!e.selectable)){if(le.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:a}}=A;e.multiple?rn(n,!(l.includes(n.key)||a.includes(n.key))):vn([n.key],ae([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(I.value),a=l.findIndex(f=>f===n.key);~a?e.cancelable&&l.splice(a,1):~a||l.push(n.key),an(l,ae(l),{node:n.rawNode,action:~a?"unselect":"select"})}else I.value.includes(n.key)?e.cancelable&&an([],[],{node:n.rawNode,action:"unselect"}):an([n.key],ae([n.key]),{node:n.rawNode,action:"select"})}}function at(n){if(oe&&(window.clearTimeout(oe),oe=null),n.isLeaf)return;ve=n.key;const l=()=>{if(ve!==n.key)return;const{value:a}=He;if(a&&a.key===n.key&&!ee.value.includes(n.key)){const f=ee.value.concat(n.key);we(f,ae(f),{node:n.rawNode,action:"expand"})}oe=null,ve=null};n.shallowLoaded?oe=window.setTimeout(()=>{l()},1e3):oe=window.setTimeout(()=>{gn(n).then(()=>{l()})},1e3)}function it({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||(bn({event:n,node:l},!1),Jn({event:n,node:l.rawNode}))}function rt({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||Qn({event:n,node:l.rawNode})}function dt(n){n.target===n.currentTarget&&ke()}function st({event:n,node:l}){$e(),!(!e.draggable||e.disabled||pe(l,e.disabledField))&&Zn({event:n,node:l.rawNode})}function ct({event:n,node:l}){!e.draggable||e.disabled||pe(l,e.disabledField)||($=n.clientX,G.value=l,et({event:n,node:l.rawNode}))}function bn({event:n,node:l},a=!0){var f;if(!e.draggable||e.disabled||pe(l,e.disabledField))return;const{value:g}=G;if(!g)return;const{allowDrop:z,indent:ne}=e;a&&nt({event:n,node:l.rawNode});const ie=n.currentTarget,{height:Re,top:Se}=ie.getBoundingClientRect(),de=n.clientY-Se;let F;z({node:l.rawNode,dropPosition:"inside",phase:"drag"})?de<=8?F="before":de>=Re-8?F="after":F="inside":de<=Re/2?F="before":F="after";const{value:ue}=Gn;let P,X;const De=ue(l.key);if(De===null){ke();return}let We=!1;F==="inside"?(P=l,X="inside"):F==="before"?l.isFirstChild?(P=l,X="before"):(P=re.value[De-1],X="after"):(P=l,X="after"),!P.isLeaf&&ee.value.includes(P.key)&&(We=!0,X==="after"&&(P=re.value[De+1],P?X="before":(P=l,X="inside")));const yn=P;if(He.value=yn,!We&&g.isLastChild&&g.key===P.key&&(X="after"),X==="after"){let kn=$-n.clientX,sn=0;for(;kn>=ne/2&&P.parent!==null&&P.isLastChild&&sn<1;)kn-=ne,sn+=1,P=P.parent;qe.value=sn}else qe.value=0;if((g.contains(P)||X==="inside"&&((f=g.parent)===null||f===void 0?void 0:f.key)===P.key)&&!(g.key===yn.key&&g.key===P.key)){ke();return}if(!z({node:P.rawNode,dropPosition:X,phase:"drag"})){ke();return}if(g.key===P.key)Ne();else if(ve!==P.key)if(X==="inside"){if(e.expandOnDragenter){if(at(P),!P.shallowLoaded&&ve!==P.key){$e();return}}else if(!P.shallowLoaded){$e();return}}else Ne();else X!=="inside"&&Ne();Ve.value=X,Q.value=P}function ut({event:n,node:l,dropPosition:a}){if(!e.draggable||e.disabled||pe(l,e.disabledField))return;const{value:f}=G,{value:g}=Q,{value:z}=Ve;if(!(!f||!g||!z)&&e.allowDrop({node:g.rawNode,dropPosition:z,phase:"drag"})&&f.key!==g.key){if(z==="before"){const ne=f.getNext({includeDisabled:!0});if(ne&&ne.key===g.key){ke();return}}if(z==="after"){const ne=f.getPrev({includeDisabled:!0});if(ne&&ne.key===g.key){ke();return}}tt({event:n,node:g.rawNode,dragNode:f.rawNode,dropPosition:a}),$e()}}function ft(){Ge()}function ht(){Ge()}function gt(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:a}=h;if(!((l=a==null?void 0:a.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;le.value=null}else{const{value:a}=_;if(a!=null&&a.contains(n.relatedTarget))return;le.value=null}}Le(le,n=>{var l,a;if(n!==null){if(e.virtualScroll)(l=b.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:f}=h;if(f===null)return;const g=(a=f.contentRef)===null||a===void 0?void 0:a.querySelector(`[data-key="${Mn(n)}"]`);if(!g)return;f.scrollTo({el:g})}}}),jt(je,{loadingKeysRef:u,highlightKeySetRef:nn,displayedCheckedKeysRef:E,displayedIndeterminateKeysRef:O,mergedSelectedKeysRef:I,mergedExpandedKeysRef:ee,mergedThemeRef:r,mergedCheckStrategyRef:Y,nodePropsRef:B(e,"nodeProps"),disabledRef:B(e,"disabled"),checkableRef:B(e,"checkable"),selectableRef:B(e,"selectable"),expandOnClickRef:B(e,"expandOnClick"),onLoadRef:B(e,"onLoad"),draggableRef:B(e,"draggable"),blockLineRef:B(e,"blockLine"),indentRef:B(e,"indent"),cascadeRef:B(e,"cascade"),checkOnClickRef:B(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:He,droppingNodeParentRef:qn,draggingNodeRef:G,droppingPositionRef:Ve,droppingOffsetLevelRef:qe,fNodesRef:re,pendingNodeKeyRef:le,showLineRef:B(e,"showLine"),disabledFieldRef:B(e,"disabledField"),internalScrollableRef:B(e,"internalScrollable"),internalCheckboxFocusableRef:B(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:B(e,"renderLabel"),renderPrefixRef:B(e,"renderPrefix"),renderSuffixRef:B(e,"renderSuffix"),renderSwitcherIconRef:B(e,"renderSwitcherIcon"),labelFieldRef:B(e,"labelField"),multipleRef:B(e,"multiple"),overrideDefaultNodeClickBehaviorRef:B(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:mn,handleDragEnd:st,handleDragEnter:it,handleDragLeave:rt,handleDragStart:ct,handleDrop:ut,handleDragOver:bn,handleSelect:dn,handleCheck:rn});function vt(n,l){var a,f;typeof n=="number"?(a=b.value)===null||a===void 0||a.scrollTo(n,l||0):(f=b.value)===null||f===void 0||f.scrollTo(n)}const mt={handleKeydown:xe,scrollTo:vt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=A.value;return{keys:n,options:ae(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=A.value;return{keys:n,options:ae(n)}}},pn=H(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:a,nodeColorHover:f,nodeColorPressed:g,nodeColorActive:z,arrowColor:ne,loadingColor:ie,nodeTextColor:Re,nodeTextColorDisabled:Se,dropMarkColor:de,nodeWrapperPadding:F,nodeHeight:se,lineHeight:ue,lineColor:P}}=r.value,X=un(F,"top"),De=un(F,"bottom"),We=Pn(Me(se)-Me(X)-Me(De));return{"--n-arrow-color":ne,"--n-loading-color":ie,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":a,"--n-node-color-active":z,"--n-node-color-hover":f,"--n-node-color-pressed":g,"--n-node-text-color":Re,"--n-node-text-color-disabled":Se,"--n-drop-mark-color":de,"--n-node-wrapper-padding":F,"--n-line-offset-top":`-${X}`,"--n-line-offset-bottom":`-${De}`,"--n-node-content-height":We,"--n-line-height":ue,"--n-line-color":P}}),Ce=i?Ht("tree",void 0,pn,e):void 0;return Object.assign(Object.assign({},mt),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:s,fNodes:Wn,aip:_e,selfElRef:_,virtualListInstRef:b,scrollbarInstRef:h,handleFocusout:gt,handleDragLeaveTree:dt,handleScroll:ft,getScrollContainer:p,getScrollContent:k,handleAfterEnter:Yn,handleResize:ht,cssVars:i?void 0:pn,themeClass:Ce==null?void 0:Ce.themeClass,onRender:Ce==null?void 0:Ce.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:i}=this;if(!t.length&&i)return i();const{mergedClsPrefix:d,blockNode:s,blockLine:r,draggable:_,disabled:h,internalFocusable:b,checkable:p,handleKeydown:k,rtlEnabled:C,handleFocusout:y,scrollbarProps:K}=this,R=b&&!h,S=R?"0":void 0,c=[`${d}-tree`,C&&`${d}-tree--rtl`,p&&`${d}-tree--checkable`,(r||s)&&`${d}-tree--block-node`,r&&`${d}-tree--block-line`],o=T=>"__motion"in T?D(kl,{height:T.height,nodes:T.nodes,clsPrefix:d,mode:T.mode,onAfterEnter:this.handleAfterEnter}):D(Hn,{key:T.key,tmNode:T,clsPrefix:d});if(this.virtualScroll){const{mergedTheme:T,internalScrollablePadding:A}=this,Y=un(A||"0");return D(Cn,Object.assign({},K,{ref:"scrollbarInstRef",onDragleave:_?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:c,theme:T.peers.Scrollbar,themeOverrides:T.peerOverrides.Scrollbar,tabindex:S,onKeydown:R?k:void 0,onFocusout:R?y:void 0}),{default:()=>{var E;return(E=this.onRender)===null||E===void 0||E.call(this),t.length?D(Vt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Me(T.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:Y.top,paddingBottom:Y.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:Y.left,paddingRight:Y.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:O})=>o(O)}):Nn(this.$slots.empty,()=>[D(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:x}=this;return c.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),x?D(Cn,Object.assign({},K,{class:c,tabindex:S,onKeydown:R?k:void 0,onFocusout:R?y:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>D("div",{onDragleave:_?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(o))}):D("div",{class:c,tabindex:S,ref:"selfElRef",style:this.cssVars,onKeydown:R?k:void 0,onFocusout:R?y:void 0,onDragleave:_?this.handleDragLeaveTree:void 0},t.length?t.map(o):Nn(this.$slots.empty,()=>[D(Rn,{class:`${d}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Cl={class:"flex-y-center gap-16px pb-12px"},Rl=ce({name:"MenuAuthModal",__name:"menu-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Qe(e,"visible");function d(){i.value=!1}const s=H(()=>w("common.edit")+w("page.manage.role.menuAuth")),r=Ae("");async function _(){console.log(t.roleId),r.value="home"}async function h(o){r.value=o}const b=Ae([]);async function p(){const{error:o,data:x}=await bt();o||(b.value=x)}const k=H(()=>b.value.map(x=>({label:x,value:x}))),C=Ae([]);async function y(){const{error:o,data:x}=await pt();o||(C.value=x)}const K=Ae([]);async function R(){console.log(t.roleId),K.value=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}function S(){var o,x;console.log(K.value,t.roleId),(x=(o=window.$message)==null?void 0:o.success)==null||x.call(o,w("common.modifySuccess")),d()}function c(){_(),p(),y(),R()}return Le(i,o=>{o&&c()}),(o,x)=>{const T=Bn,A=Vn,Y=Be,E=Ze,O=En;return ye(),Fe(O,{show:i.value,"onUpdate:show":x[1]||(x[1]=U=>i.value=U),title:s.value,preset:"card",class:"w-480px"},{footer:N(()=>[m(E,{justify:"end"},{default:N(()=>[m(Y,{size:"small",class:"mt-16px",onClick:d},{default:N(()=>[me(he(v(w)("common.cancel")),1)]),_:1}),m(Y,{type:"primary",size:"small",class:"mt-16px",onClick:S},{default:N(()=>[me(he(v(w)("common.confirm")),1)]),_:1})]),_:1})]),default:N(()=>[Sn("div",Cl,[Sn("div",null,he(v(w)("page.manage.menu.home")),1),m(T,{value:r.value,options:k.value,size:"small",class:"w-160px","onUpdate:value":h},null,8,["value","options"])]),m(A,{"checked-keys":K.value,"onUpdate:checkedKeys":x[0]||(x[0]=U=>K.value=U),data:C.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Sl=ce({name:"ButtonAuthModal",__name:"button-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,i=Qe(e,"visible");function d(){i.value=!1}const s=H(()=>w("common.edit")+w("page.manage.role.buttonAuth")),r=Ae([]);async function _(){r.value=[{id:1,label:"button1",code:"code1"},{id:2,label:"button2",code:"code2"},{id:3,label:"button3",code:"code3"},{id:4,label:"button4",code:"code4"},{id:5,label:"button5",code:"code5"},{id:6,label:"button6",code:"code6"},{id:7,label:"button7",code:"code7"},{id:8,label:"button8",code:"code8"},{id:9,label:"button9",code:"code9"},{id:10,label:"button10",code:"code10"}]}const h=Ae([]);async function b(){console.log(t.roleId),h.value=[1,2,3,4,5]}function p(){var C,y;console.log(h.value,t.roleId),(y=(C=window.$message)==null?void 0:C.success)==null||y.call(C,w("common.modifySuccess")),d()}function k(){_(),b()}return k(),(C,y)=>{const K=Vn,R=Be,S=Ze,c=En;return ye(),Fe(c,{show:i.value,"onUpdate:show":y[1]||(y[1]=o=>i.value=o),title:s.value,preset:"card",class:"w-480px"},{footer:N(()=>[m(S,{justify:"end"},{default:N(()=>[m(R,{size:"small",class:"mt-16px",onClick:d},{default:N(()=>[me(he(v(w)("common.cancel")),1)]),_:1}),m(R,{type:"primary",size:"small",class:"mt-16px",onClick:p},{default:N(()=>[me(he(v(w)("common.confirm")),1)]),_:1})]),_:1})]),default:N(()=>[m(K,{"checked-keys":h.value,"onUpdate:checkedKeys":y[0]||(y[0]=o=>h.value=o),data:r.value,"key-field":"id","block-line":"",checkable:"","expand-on-click":"","virtual-scroll":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Dl=ce({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:ze({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ze(["submitted"],["update:visible"]),setup(e,{emit:t}){const i=e,d=t,s=Qe(e,"visible"),{formRef:r,validate:_,restoreValidation:h}=ll(),{defaultRequiredRule:b}=ol(),{bool:p,setTrue:k}=Dn(),{bool:C,setTrue:y}=Dn(),{loading:K,startLoading:R,endLoading:S}=qt(),c=H(()=>({add:w("page.manage.role.addRole"),edit:w("page.manage.role.editRole")})[i.operateType]),o=Gt(x());function x(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const T={roleName:b,roleCode:b,status:b},A=H(()=>{var J;return((J=i.rowData)==null?void 0:J.id)||-1}),Y=H(()=>i.operateType==="edit");function E(){Object.assign(o,x()),i.operateType==="edit"&&i.rowData&&Object.assign(o,i.rowData)}function O(){s.value=!1}async function U(){var J;if(i.operateType==="add"){await _();const I={roleName:o.roleName,roleCode:o.roleCode,roleDesc:o.roleDesc,status:o.status};R();const{error:V}=await yt(I);V||((J=window.$message)==null||J.success(w("common.addSuccess")),d("submitted"),O()),S()}else i.operateType}return Le(s,()=>{s.value&&(E(),h())}),(J,I)=>{const V=In,ge=al,Oe=xt,ee=kt,re=Un,le=Be,xe=Ze,oe=Jt,ve=Qt;return ye(),Fe(ve,{show:s.value,"onUpdate:show":I[6]||(I[6]=M=>s.value=M),"display-directive":"show",width:360},{default:N(()=>[m(oe,{title:c.value,"native-scrollbar":!1,closable:""},{footer:N(()=>[m(xe,{size:16},{default:N(()=>[m(le,{onClick:O},{default:N(()=>[me(he(v(w)("common.cancel")),1)]),_:1}),m(le,{type:"primary",loading:v(K),onClick:U},{default:N(()=>[me(he(v(w)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:N(()=>[m(re,{ref_key:"formRef",ref:r,model:o,rules:T},{default:N(()=>[m(ge,{label:v(w)("page.manage.role.roleName"),path:"roleName"},{default:N(()=>[m(V,{value:o.roleName,"onUpdate:value":I[0]||(I[0]=M=>o.roleName=M),placeholder:v(w)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(ge,{label:v(w)("page.manage.role.roleCode"),path:"roleCode"},{default:N(()=>[m(V,{value:o.roleCode,"onUpdate:value":I[1]||(I[1]=M=>o.roleCode=M),placeholder:v(w)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(ge,{label:v(w)("page.manage.role.roleStatus"),path:"status"},{default:N(()=>[m(ee,{value:o.status,"onUpdate:value":I[2]||(I[2]=M=>o.status=M)},{default:N(()=>[(ye(!0),On(Yt,null,Wt(v(Ln),M=>(ye(),Fe(Oe,{key:M.value,value:M.value,label:v(w)(M.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),m(ge,{label:v(w)("page.manage.role.roleDesc"),path:"roleDesc"},{default:N(()=>[m(V,{value:o.roleDesc,"onUpdate:value":I[3]||(I[3]=M=>o.roleDesc=M),placeholder:v(w)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),Y.value?(ye(),Fe(xe,{key:0},{default:N(()=>[m(le,{onClick:v(k)},{default:N(()=>[me(he(v(w)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),m(Rl,{visible:v(p),"onUpdate:visible":I[4]||(I[4]=M=>Pe(p)?p.value=M:null),"role-id":A.value},null,8,["visible","role-id"]),m(le,{onClick:v(y)},{default:N(()=>[me(he(v(w)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),m(Sl,{visible:v(C),"onUpdate:visible":I[5]||(I[5]=M=>Pe(C)?C.value=M:null),"role-id":A.value},null,8,["visible","role-id"])]),_:1})):Xt("",!0)]),_:1},8,["title"])]),_:1},8,["show"])}}}),Kl=ce({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:ze(["reset","search"],["update:model"]),setup(e,{emit:t}){const i=t,d=Qe(e,"model");function s(){i("reset")}function r(){i("search")}return(_,h)=>{const b=In,p=_t,k=Bn,C=il,y=Be,K=rl,R=Ze,S=cl,c=Un,o=dl,x=sl,T=$n;return ye(),Fe(T,{bordered:!1,size:"small",class:"card-wrapper"},{default:N(()=>[m(x,{"default-expanded-names":["role-search"]},{default:N(()=>[m(o,{title:v(w)("common.search"),name:"role-search"},{default:N(()=>[m(c,{model:d.value,"label-placement":"left","label-width":80},{default:N(()=>[m(S,{responsive:"screen","item-responsive":""},{default:N(()=>[m(p,{span:"24 s:12 m:6",label:v(w)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:N(()=>[m(b,{value:d.value.roleName,"onUpdate:value":h[0]||(h[0]=A=>d.value.roleName=A),placeholder:v(w)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6",label:v(w)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:N(()=>[m(b,{value:d.value.roleCode,"onUpdate:value":h[1]||(h[1]=A=>d.value.roleCode=A),placeholder:v(w)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6",label:v(w)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:N(()=>[m(k,{value:d.value.status,"onUpdate:value":h[2]||(h[2]=A=>d.value.status=A),placeholder:v(w)("page.manage.role.form.roleStatus"),options:v(Zt)(v(Ln)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),m(p,{span:"24 s:12 m:6"},{default:N(()=>[m(R,{class:"w-full",justify:"end"},{default:N(()=>[m(y,{onClick:s},{icon:N(()=>[m(C,{class:"text-icon"})]),default:N(()=>[me(" "+he(v(w)("common.reset")),1)]),_:1}),m(y,{type:"primary",ghost:"",onClick:r},{icon:N(()=>[m(K,{class:"text-icon"})]),default:N(()=>[me(" "+he(v(w)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1})]),_:1})}}}),Tl={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tl(e)}const Ol=ce({name:"manage_role",__name:"index",setup(e){const t=el(),{columns:i,columnChecks:d,data:s,loading:r,getData:_,getDataByPage:h,mobilePagination:b,searchParams:p,resetSearchParams:k}=wt({apiFn:Ct,apiParams:{current:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:w("common.index"),width:64,align:"center"},{key:"roleName",title:w("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:w("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:w("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:w("page.manage.role.roleStatus"),align:"center",width:100,render:E=>{if(E.status===null)return null;const O={1:"success",2:"warning"},U=w(Rt[E.status]);return m(nl,{type:O[E.status]},hn(U)?U:{default:()=>[U]})}},{key:"operate",title:w("common.operate"),align:"center",width:130,render:E=>{let O;return m("div",{class:"flex-center gap-8px"},[m(Be,{type:"primary",ghost:!0,size:"small",onClick:()=>Y(E.id)},hn(O=w("common.edit"))?O:{default:()=>[O]}),m(St,{onPositiveClick:()=>A(E.id)},{default:()=>w("common.confirmDelete"),trigger:()=>{let U;return m(Be,{type:"error",ghost:!0,size:"small"},hn(U=w("common.delete"))?U:{default:()=>[U]})}})])}}]}),{drawerVisible:C,operateType:y,editingData:K,handleAdd:R,handleEdit:S,checkedRowKeys:c,onBatchDeleted:o,onDeleted:x}=Nt(s,_);async function T(){console.log(c.value),o()}function A(E){console.log(E),x()}function Y(E){S(E)}return(E,O)=>{const U=Dt,J=Kt,I=$n;return ye(),On("div",Tl,[m(Kl,{model:v(p),"onUpdate:model":O[0]||(O[0]=V=>Pe(p)?p.value=V:null),onReset:v(k),onSearch:v(h)},null,8,["model","onReset","onSearch"]),m(I,{title:v(w)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":N(()=>[m(U,{columns:v(d),"onUpdate:columns":O[1]||(O[1]=V=>Pe(d)?d.value=V:null),"disabled-delete":v(c).length===0,loading:v(r),onAdd:v(R),onDelete:T,onRefresh:v(_)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:N(()=>[m(J,{"checked-row-keys":v(c),"onUpdate:checkedRowKeys":O[2]||(O[2]=V=>Pe(c)?c.value=V:null),columns:v(i),data:v(s),size:"small","flex-height":!v(t).isMobile,"scroll-x":702,loading:v(r),remote:"","row-key":V=>V.id,pagination:v(b),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),m(Dl,{visible:v(C),"onUpdate:visible":O[3]||(O[3]=V=>Pe(C)?C.value=V:null),"operate-type":v(y),"row-data":v(K),onSubmitted:v(h)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Ol as default};
