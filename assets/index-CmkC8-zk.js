import{n as yt,o as kt,e as En,p as xt,E as wt,c as _t,_ as Nt,d as Ct,u as Rt,g as St,q as Dt,j as Kt,N as Tt,D as wn,k as Lt,l as At}from"./business-h-SbUEBI.js";import{d as ue,a1 as S,aa as Pn,ab as Oe,aM as Et,aN as Pt,av as Ft,x as Bt,r as W,aO as cn,a as V,aP as Ot,aQ as Z,i as It,a2 as $t,aR as Ye,aS as Fn,aT as Ut,L as H,K as he,N as q,aU as _n,O as Te,M as Le,aV as Mt,U as zt,a6 as jt,V as Bn,aW as Ht,aX as Nn,aY as Ue,a9 as $,ao as Xe,aD as Ae,aZ as Je,a_ as Me,a$ as Cn,b0 as Vt,ay as le,a8 as qt,b1 as un,Y as Gt,aq as Rn,b2 as Wt,b3 as Sn,b4 as Dn,aB as ze,aC as Qe,$ as _,b5 as Ee,o as ke,c as Fe,w as R,f as p,g as me,t as ge,h as v,e as Kn,aF as On,B as Be,aI as gn,aJ as Tn,y as Yt,p as In,b as $n,a3 as Xt,a4 as Jt,aK as Pe,aE as Qt,v as Un,aH as Zt,b6 as el,J as Mn,A as nl,a5 as tl,aL as ll}from"./index-CAXO7y6T.js";import{u as ol,a as al,_ as il,b as zn}from"./form-4Txvnxou.js";import{_ as Ze}from"./Space-DT8RddoM.js";import{_ as rl,a as dl,b as sl,c as cl}from"./round-refresh-DJTLwsjS.js";import{a as ul}from"./Grid-MZ71pvMH.js";function jn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const fl=ue({name:"Switcher",render(){return S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},S("path",{d:"M12 8l10 8l-10 8z"}))}}),Hn=Pn("n-tree-select"),je=Pn("n-tree"),hl=ue({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:t}=Oe(je,null);return()=>{const{clsPrefix:a,expanded:s,hide:d,indent:r,onClick:w}=e;return S("span",{"data-switcher":!0,class:[`${a}-tree-node-switcher`,s&&`${a}-tree-node-switcher--expanded`,d&&`${a}-tree-node-switcher--hide`],style:{width:`${r}px`},onClick:w},S("div",{class:`${a}-tree-node-switcher__icon`},S(Et,null,{default:()=>{if(e.loading)return S(Pt,{clsPrefix:a,key:"loading",radius:85,strokeWidth:20});const{value:f}=t;return f?f({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):S(Ft,{clsPrefix:a,key:"switcher"},{default:()=>S(fl,null)})}})))}}}),gl=ue({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Oe(je);function a(d){const{onCheck:r}=e;r&&r(d)}function s(d){a(d)}return{handleUpdateValue:s,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:a,indeterminate:s,disabled:d,focusable:r,indent:w,handleUpdateValue:f}=this;return S("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${w}px`},"data-checkbox":!0},S(Bt,{focusable:r,disabled:d,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:a,indeterminate:s,onUpdateChecked:f}))}}),vl=ue({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:a,renderSuffixRef:s,labelFieldRef:d}=Oe(je),r=W(null);function w(m){const{onClick:k}=e;k&&k(m)}function f(m){w(m)}return{selfRef:r,renderLabel:t,renderPrefix:a,renderSuffix:s,labelField:d,handleClick:f}},render(){const{clsPrefix:e,labelField:t,nodeProps:a,checked:s=!1,selected:d=!1,renderLabel:r,renderPrefix:w,renderSuffix:f,handleClick:m,onDragstart:k,tmNode:{rawNode:y,rawNode:{prefix:D,suffix:b,[t]:K}}}=this;return S("span",Object.assign({},a,{ref:"selfRef",class:[`${e}-tree-node-content`,a==null?void 0:a.class],onClick:m,draggable:k===void 0?void 0:!0,onDragstart:k}),w||D?S("div",{class:`${e}-tree-node-content__prefix`},w?w({option:y,selected:d,checked:s}):cn(D)):null,S("div",{class:`${e}-tree-node-content__text`},r?r({option:y,selected:d,checked:s}):cn(K)),f||b?S("div",{class:`${e}-tree-node-content__suffix`},f?f({option:y,selected:d,checked:s}):cn(b)):null)}});function Ln({position:e,offsetLevel:t,indent:a,el:s}){const d={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")d.left=0,d.top=0,d.bottom=0,d.borderRadius="inherit",d.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const r=e==="before"?"top":"bottom";d[r]=0,d.left=`${s.offsetLeft+6-t*a}px`,d.height="2px",d.backgroundColor="var(--n-drop-mark-color)",d.transformOrigin=r,d.borderRadius="1px",d.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return S("div",{style:d})}function ml({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function bl(e){return V(()=>e.leafOnly?"child":e.checkStrategy)}function ye(e,t){return!!e.rawNode[t]}function Vn(e,t,a,s){e==null||e.forEach(d=>{a(d),Vn(d[t],t,a,s),s(d)})}function pl(e,t,a,s,d){const r=new Set,w=new Set,f=[];return Vn(e,s,m=>{if(f.push(m),d(t,m)){w.add(m[a]);for(let k=f.length-2;k>=0;--k)if(!r.has(f[k][a]))r.add(f[k][a]);else return}},()=>{f.pop()}),{expandedKeys:Array.from(r),highlightKeySet:w}}if(Ot&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function yl(e,t,a,s,d){const r=new Set,w=new Set,f=new Set,m=[],k=[],y=[];function D(K){K.forEach(N=>{if(y.push(N),t(a,N)){r.add(N[s]),f.add(N[s]);for(let g=y.length-2;g>=0;--g){const o=y[g][s];if(!w.has(o))w.add(o),r.has(o)&&r.delete(o);else break}}const C=N[d];C&&D(C),y.pop()})}D(e);function b(K,N){K.forEach(C=>{const g=C[s],o=r.has(g),x=w.has(g);if(!o&&!x)return;const T=C[d];if(T)if(o)N.push(C);else{m.push(g);const F=Object.assign(Object.assign({},C),{[d]:[]});N.push(F),b(T,F[d])}else N.push(C)})}return b(e,k),{filteredTree:k,highlightKeySet:f,expandedKeys:m}}const qn=ue({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Oe(je),{droppingNodeParentRef:a,droppingMouseNodeRef:s,draggingNodeRef:d,droppingPositionRef:r,droppingOffsetLevelRef:w,nodePropsRef:f,indentRef:m,blockLineRef:k,checkboxPlacementRef:y,checkOnClickRef:D,disabledFieldRef:b,showLineRef:K,renderSwitcherIconRef:N,overrideDefaultNodeClickBehaviorRef:C}=t,g=Z(()=>!!e.tmNode.rawNode.checkboxDisabled),o=Z(()=>ye(e.tmNode,b.value)),x=Z(()=>t.disabledRef.value||o.value),T=V(()=>{const{value:c}=f;if(c)return c({option:e.tmNode.rawNode})}),F=W(null),Y={value:null};It(()=>{Y.value=F.value.$el});function J(){const c=()=>{const{tmNode:P}=e;if(!P.isLeaf&&!P.shallowLoaded){if(!t.loadingKeysRef.value.has(P.key))t.loadingKeysRef.value.add(P.key);else return;const{onLoadRef:{value:M}}=t;M&&M(P.rawNode).then(G=>{G!==!1&&t.handleSwitcherClick(P)}).finally(()=>{t.loadingKeysRef.value.delete(P.key)})}else t.handleSwitcherClick(P)};N.value?setTimeout(c,0):c()}const A=Z(()=>!o.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),L=Z(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),E=Z(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),O=Z(()=>{const{value:c}=L;if(!c)return!1;const{value:P}=D,{tmNode:M}=e;return typeof P=="boolean"?!M.disabled&&P:P(e.tmNode.rawNode)});function ee(c){const{value:P}=t.expandOnClickRef,{value:M}=A,{value:G}=O;if(!M&&!P&&!G||Ye(c,"checkbox")||Ye(c,"switcher"))return;const{tmNode:Q}=e;M&&t.handleSelect(Q),P&&!Q.isLeaf&&J(),G&&de(!E.value)}function U(c){var P,M;if(!(Ye(c,"checkbox")||Ye(c,"switcher"))){if(!x.value){const G=C.value;let Q=!1;if(G)switch(G({option:e.tmNode.rawNode})){case"toggleCheck":Q=!0,de(!E.value);break;case"toggleSelect":Q=!0,t.handleSelect(e.tmNode);break;case"toggleExpand":Q=!0,J(),Q=!0;break;case"none":Q=!0,Q=!0;return}Q||ee(c)}(M=(P=T.value)===null||P===void 0?void 0:P.onClick)===null||M===void 0||M.call(P,c)}}function be(c){k.value||U(c)}function ne(c){k.value&&U(c)}function de(c){t.handleCheck(e.tmNode,c)}function oe(c){t.handleDragStart({event:c,node:e.tmNode})}function we(c){c.currentTarget===c.target&&t.handleDragEnter({event:c,node:e.tmNode})}function ae(c){c.preventDefault(),t.handleDragOver({event:c,node:e.tmNode})}function ve(c){t.handleDragEnd({event:c,node:e.tmNode})}function z(c){c.currentTarget===c.target&&t.handleDragLeave({event:c,node:e.tmNode})}function en(c){c.preventDefault(),r.value!==null&&t.handleDrop({event:c,node:e.tmNode,dropPosition:r.value})}const nn=V(()=>{const{clsPrefix:c}=e,{value:P}=m;if(K.value){const M=[];let G=e.tmNode.parent;for(;G;)G.isLastChild?M.push(S("div",{class:`${c}-tree-node-indent`},S("div",{style:{width:`${P}px`}}))):M.push(S("div",{class:[`${c}-tree-node-indent`,`${c}-tree-node-indent--show-line`]},S("div",{style:{width:`${P}px`}}))),G=G.parent;return M.reverse()}else return $t(e.tmNode.level,S("div",{class:`${e.clsPrefix}-tree-node-indent`},S("div",{style:{width:`${P}px`}})))});return{showDropMark:Z(()=>{const{value:c}=d;if(!c)return;const{value:P}=r;if(!P)return;const{value:M}=s;if(!M)return;const{tmNode:G}=e;return G.key===M.key}),showDropMarkAsParent:Z(()=>{const{value:c}=a;if(!c)return!1;const{tmNode:P}=e,{value:M}=r;return M==="before"||M==="after"?c.key===P.key:!1}),pending:Z(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Z(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Z(()=>{var c;return(c=t.highlightKeySetRef.value)===null||c===void 0?void 0:c.has(e.tmNode.key)}),checked:E,indeterminate:Z(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Z(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Z(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:x,checkable:L,mergedCheckOnClick:O,checkboxDisabled:g,selectable:A,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:k,nodeProps:T,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:w,indent:m,checkboxPlacement:y,showLine:K,contentInstRef:F,contentElRef:Y,indentNodes:nn,handleCheck:de,handleDrop:en,handleDragStart:oe,handleDragEnter:we,handleDragOver:ae,handleDragEnd:ve,handleDragLeave:z,handleLineClick:ne,handleContentClick:be,handleSwitcherClick:J}},render(){const{tmNode:e,clsPrefix:t,checkable:a,expandOnClick:s,selectable:d,selected:r,checked:w,highlight:f,draggable:m,blockLine:k,indent:y,indentNodes:D,disabled:b,pending:K,internalScrollable:N,nodeProps:C,checkboxPlacement:g}=this,o=m&&!b?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,x=N?jn(e.key):void 0,T=g==="right",F=a?S(gl,{indent:y,right:T,focusable:this.checkboxFocusable,disabled:b||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return S("div",Object.assign({class:`${t}-tree-node-wrapper`},o),S("div",Object.assign({},k?C:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:r,[`${t}-tree-node--checkable`]:a,[`${t}-tree-node--highlight`]:f,[`${t}-tree-node--pending`]:K,[`${t}-tree-node--disabled`]:b,[`${t}-tree-node--selectable`]:d,[`${t}-tree-node--clickable`]:d||s||this.mergedCheckOnClick},C==null?void 0:C.class],"data-key":x,draggable:m&&k,onClick:this.handleLineClick,onDragstart:m&&k&&!b?this.handleDragStart:void 0}),D,e.isLeaf&&this.showLine?S("div",{class:[`${t}-tree-node-indent`,`${t}-tree-node-indent--show-line`,e.isLeaf&&`${t}-tree-node-indent--is-leaf`,e.isLastChild&&`${t}-tree-node-indent--last-child`]},S("div",{style:{width:`${y}px`}})):S(hl,{clsPrefix:t,expanded:this.expanded,selected:r,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:y,onClick:this.handleSwitcherClick}),T?null:F,S(vl,{ref:"contentInstRef",clsPrefix:t,checked:w,selected:r,onClick:this.handleContentClick,nodeProps:k?void 0:C,onDragstart:m&&!k&&!b?this.handleDragStart:void 0,tmNode:e}),m?this.showDropMark?Ln({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:y}):this.showDropMarkAsParent?Ln({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:y}):null:null,T?F:null))}});function kl({props:e,fNodesRef:t,mergedExpandedKeysRef:a,mergedSelectedKeysRef:s,mergedCheckedKeysRef:d,handleCheck:r,handleSelect:w,handleSwitcherClick:f}){const{value:m}=s,k=Oe(Hn,null),y=k?k.pendingNodeKeyRef:W(m.length?m[m.length-1]:null);function D(b){var K;if(!e.keyboard)return{enterBehavior:null};const{value:N}=y;let C=null;if(N===null){if((b.key==="ArrowDown"||b.key==="ArrowUp")&&b.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(b.key)&&N===null){const{value:g}=t;let o=0;for(;o<g.length;){if(!g[o].disabled){y.value=g[o].key;break}o+=1}}}else{const{value:g}=t;let o=g.findIndex(x=>x.key===N);if(!~o)return{enterBehavior:null};if(b.key==="Enter"){const x=g[o];switch(C=((K=e.overrideDefaultNodeClickBehavior)===null||K===void 0?void 0:K.call(e,{option:x.rawNode}))||null,C){case"toggleCheck":r(x,!d.value.includes(x.key));break;case"toggleSelect":w(x);break;case"toggleExpand":f(x);break;case"none":break;case"default":default:C="default",w(x)}}else if(b.key==="ArrowDown")for(b.preventDefault(),o+=1;o<g.length;){if(!g[o].disabled){y.value=g[o].key;break}o+=1}else if(b.key==="ArrowUp")for(b.preventDefault(),o-=1;o>=0;){if(!g[o].disabled){y.value=g[o].key;break}o-=1}else if(b.key==="ArrowLeft"){const x=g[o];if(x.isLeaf||!a.value.includes(N)){const T=x.getParent();T&&(y.value=T.key)}else f(x)}else if(b.key==="ArrowRight"){const x=g[o];if(x.isLeaf)return{enterBehavior:null};if(!a.value.includes(N))f(x);else for(o+=1;o<g.length;){if(!g[o].disabled){y.value=g[o].key;break}o+=1}}}return{enterBehavior:C}}return{pendingNodeKeyRef:y,handleKeydown:D}}const xl=ue({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return S(Ut,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>S("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Fn(this.height)}},this.nodes.map(t=>S(qn,{clsPrefix:e,tmNode:t})))})}}),fn=Mt(),wl=H("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[he("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),he(">",[H("tree-node",[he("&:first-child","margin-top: 0;")])]),H("tree-motion-wrapper",[q("expand",[_n({duration:"0.2s"})]),q("collapse",[_n({duration:"0.2s",reverse:!0})])]),H("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),H("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[q("highlight",[H("tree-node-content",[Te("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),q("disabled",[H("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Le("disabled",[q("clickable",[H("tree-node-content",`
 cursor: pointer;
 `)])])]),q("block-node",[H("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Le("block-line",[H("tree-node",[Le("disabled",[H("tree-node-content",[he("&:hover","background: var(--n-node-color-hover);")]),q("selectable",[H("tree-node-content",[he("&:active","background: var(--n-node-color-pressed);")])]),q("pending",[H("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),q("selected",[H("tree-node-content","background: var(--n-node-color-active);")])]),q("selected",[H("tree-node-content","background: var(--n-node-color-active);")])])]),q("block-line",[H("tree-node",[Le("disabled",[he("&:hover","background: var(--n-node-color-hover);"),q("pending",`
 background: var(--n-node-color-hover);
 `),q("selectable",[Le("selected",[he("&:active","background: var(--n-node-color-pressed);")])]),q("selected","background: var(--n-node-color-active);")]),q("selected","background: var(--n-node-color-active);"),q("disabled",`
 cursor: not-allowed;
 `)])]),H("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[q("show-line","position: relative",[he("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),q("last-child",[he("&::before",`
 bottom: 50%;
 `)]),q("is-leaf",[he("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Le("show-line","height: 0;")]),H("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Te("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[H("icon",[fn]),H("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[fn]),H("base-icon",[fn])]),q("hide","visibility: hidden;"),q("expanded","transform: rotate(90deg);")]),H("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),H("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[he("&:last-child","margin-bottom: 0;"),Te("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Te("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Te("suffix",`
 display: inline-flex;
 `)]),Te("empty","margin: auto;")]);var _l=function(e,t,a,s){function d(r){return r instanceof a?r:new a(function(w){w(r)})}return new(a||(a=Promise))(function(r,w){function f(y){try{k(s.next(y))}catch(D){w(D)}}function m(y){try{k(s.throw(y))}catch(D){w(D)}}function k(y){y.done?r(y.value):d(y.value).then(f,m)}k((s=s.apply(e,[])).next())})};function An(e,t,a,s){return{getIsGroup(){return!1},getKey(r){return r[e]},getChildren:s||(r=>r[t]),getDisabled(r){return!!(r[a]||r.checkboxDisabled)}}}const Nl={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Cl=Object.assign(Object.assign(Object.assign(Object.assign({},Bn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:ml},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Nl),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Gn=ue({name:"Tree",props:Cl,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:a,mergedRtlRef:s}=zt(e),d=jt("Tree",s,t),r=Bn("Tree","-tree",wl,Ht,e,t),w=W(null),f=W(null),m=W(null);function k(){var n;return(n=m.value)===null||n===void 0?void 0:n.listElRef}function y(){var n;return(n=m.value)===null||n===void 0?void 0:n.itemsElRef}const D=V(()=>{const{filter:n}=e;if(n)return n;const{labelField:l}=e;return(i,u)=>{if(!i.length)return!0;const h=u[l];return typeof h=="string"?h.toLowerCase().includes(i.toLowerCase()):!1}}),b=V(()=>{const{pattern:n}=e;return n?!n.length||!D.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:yl(e.data,D.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),K=V(()=>Nn(e.showIrrelevantNodes?e.data:b.value.filteredTree,An(e.keyField,e.childrenField,e.disabledField,e.getChildren))),N=Oe(Hn,null),C=e.internalTreeSelect?N.dataTreeMate:V(()=>e.showIrrelevantNodes?K.value:Nn(e.data,An(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:g}=e,o=W([]);g!=null&&g.includes("defaultCheckedKeys")?Ue(()=>{o.value=e.defaultCheckedKeys}):o.value=e.defaultCheckedKeys;const x=$(e,"checkedKeys"),T=Xe(x,o),F=V(()=>C.value.getCheckedKeys(T.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),Y=bl(e),J=V(()=>F.value.checkedKeys),A=V(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:F.value.indeterminateKeys}),L=W([]);g!=null&&g.includes("defaultSelectedKeys")?Ue(()=>{L.value=e.defaultSelectedKeys}):L.value=e.defaultSelectedKeys;const E=$(e,"selectedKeys"),O=Xe(E,L),ee=W([]),U=n=>{ee.value=e.defaultExpandAll?C.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};g!=null&&g.includes("defaultExpandedKeys")?Ue(()=>{U(void 0)}):Ue(()=>{U(e.defaultExpandedKeys)});const be=$(e,"expandedKeys"),ne=Xe(be,ee),de=V(()=>K.value.getFlattenedNodes(ne.value)),{pendingNodeKeyRef:oe,handleKeydown:we}=kl({props:e,mergedCheckedKeysRef:T,mergedSelectedKeysRef:O,fNodesRef:de,mergedExpandedKeysRef:ne,handleCheck:rn,handleSelect:dn,handleSwitcherClick:bn});let ae=null,ve=null;const z=W(new Set),en=V(()=>e.internalHighlightKeySet||b.value.highlightKeySet),nn=Xe(en,z),c=W(new Set),P=V(()=>ne.value.filter(n=>!c.value.has(n)));let M=0;const G=W(null),Q=W(null),He=W(null),Ve=W(null),qe=W(0),Wn=V(()=>{const{value:n}=Q;return n?n.parent:null});let tn=!1;Ae($(e,"data"),()=>{tn=!0,Je(()=>{tn=!1}),c.value.clear(),oe.value=null,$e()},{deep:!1});let ln=!1;const on=()=>{ln=!0,Je(()=>{ln=!1})};let Ie;Ae($(e,"pattern"),(n,l)=>{if(e.showIrrelevantNodes)if(Ie=void 0,n){const{expandedKeys:i,highlightKeySet:u}=pl(e.data,e.pattern,e.keyField,e.childrenField,D.value);z.value=u,on(),Ne(i,ie(i),{node:null,action:"filter"})}else z.value=new Set;else if(!n.length)Ie!==void 0&&(on(),Ne(Ie,ie(Ie),{node:null,action:"filter"}));else{l.length||(Ie=ne.value);const{expandedKeys:i}=b.value;i!==void 0&&(on(),Ne(i,ie(i),{node:null,action:"filter"}))}});function vn(n){return _l(this,void 0,void 0,function*(){const{onLoad:l}=e;if(!l){yield Promise.resolve();return}const{value:i}=c;if(!i.has(n.key)){i.add(n.key);try{(yield l(n.rawNode))===!1&&Ce()}catch(u){console.error(u),Ce()}i.delete(n.key)}})}Ue(()=>{var n;const{value:l}=K;if(!l)return;const{getNode:i}=l;(n=ne.value)===null||n===void 0||n.forEach(u=>{const h=i(u);h&&!h.shallowLoaded&&vn(h)})});const _e=W(!1),pe=W([]);Ae(P,(n,l)=>{if(!e.animated||ln){Je(Ge);return}if(tn)return;const i=Me(r.value.self.nodeHeight),u=new Set(l);let h=null,j=null;for(const I of n)if(!u.has(I)){if(h!==null)return;h=I}const te=new Set(n);for(const I of l)if(!te.has(I)){if(j!==null)return;j=I}if(h===null&&j===null)return;const{virtualScroll:re}=e,Se=(re?m.value.listElRef:w.value).offsetHeight,De=Math.ceil(Se/i)+1;let se;if(h!==null&&(se=l),j!==null&&(se===void 0?se=n:se=se.filter(I=>I!==j)),_e.value=!0,pe.value=K.value.getFlattenedNodes(se),h!==null){const I=pe.value.findIndex(ce=>ce.key===h);if(~I){const ce=pe.value[I].children;if(ce){const fe=Cn(ce,n);pe.value.splice(I+1,0,{__motion:!0,mode:"expand",height:re?fe.length*i:void 0,nodes:re?fe.slice(0,De):fe})}}}if(j!==null){const I=pe.value.findIndex(ce=>ce.key===j);if(~I){const ce=pe.value[I].children;if(!ce)return;_e.value=!0;const fe=Cn(ce,n);pe.value.splice(I+1,0,{__motion:!0,mode:"collapse",height:re?fe.length*i:void 0,nodes:re?fe.slice(0,De):fe})}}});const Yn=V(()=>Vt(de.value)),Xn=V(()=>_e.value?pe.value:de.value);function Ge(){const{value:n}=f;n&&n.sync()}function Jn(){_e.value=!1,e.virtualScroll&&Je(Ge)}function ie(n){const{getNode:l}=C.value;return n.map(i=>{var u;return((u=l(i))===null||u===void 0?void 0:u.rawNode)||null})}function Ne(n,l,i){const{"onUpdate:expandedKeys":u,onUpdateExpandedKeys:h}=e;ee.value=n,u&&le(u,n,l,i),h&&le(h,n,l,i)}function mn(n,l,i){const{"onUpdate:checkedKeys":u,onUpdateCheckedKeys:h}=e;o.value=n,h&&le(h,n,l,i),u&&le(u,n,l,i)}function Qn(n,l){const{"onUpdate:indeterminateKeys":i,onUpdateIndeterminateKeys:u}=e;i&&le(i,n,l),u&&le(u,n,l)}function an(n,l,i){const{"onUpdate:selectedKeys":u,onUpdateSelectedKeys:h}=e;L.value=n,h&&le(h,n,l,i),u&&le(u,n,l,i)}function Zn(n){const{onDragenter:l}=e;l&&le(l,n)}function et(n){const{onDragleave:l}=e;l&&le(l,n)}function nt(n){const{onDragend:l}=e;l&&le(l,n)}function tt(n){const{onDragstart:l}=e;l&&le(l,n)}function lt(n){const{onDragover:l}=e;l&&le(l,n)}function ot(n){const{onDrop:l}=e;l&&le(l,n)}function $e(){at(),xe()}function at(){G.value=null}function xe(){qe.value=0,Q.value=null,He.value=null,Ve.value=null,Ce()}function Ce(){ae&&(window.clearTimeout(ae),ae=null),ve=null}function rn(n,l){if(e.disabled||ye(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){dn(n);return}const i=l?"check":"uncheck",{checkedKeys:u,indeterminateKeys:h}=C.value[i](n.key,J.value,{cascade:e.cascade,checkStrategy:Y.value,allowNotLoaded:e.allowCheckingNotLoaded});mn(u,ie(u),{node:n.rawNode,action:i}),Qn(h,ie(h))}function it(n){if(e.disabled)return;const{key:l}=n,{value:i}=ne,u=i.findIndex(h=>h===l);if(~u){const h=Array.from(i);h.splice(u,1),Ne(h,ie(h),{node:n.rawNode,action:"collapse"})}else{const h=K.value.getNode(l);if(!h||h.isLeaf)return;let j;if(e.accordion){const te=new Set(n.siblings.map(({key:re})=>re));j=i.filter(re=>!te.has(re)),j.push(l)}else j=i.concat(l);Ne(j,ie(j),{node:n.rawNode,action:"expand"})}}function bn(n){e.disabled||_e.value||it(n)}function dn(n){if(!(e.disabled||!e.selectable)){if(oe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:l,indeterminateKeys:i}}=F;e.multiple?rn(n,!(l.includes(n.key)||i.includes(n.key))):mn([n.key],ie([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const l=Array.from(O.value),i=l.findIndex(u=>u===n.key);~i?e.cancelable&&l.splice(i,1):~i||l.push(n.key),an(l,ie(l),{node:n.rawNode,action:~i?"unselect":"select"})}else O.value.includes(n.key)?e.cancelable&&an([],[],{node:n.rawNode,action:"unselect"}):an([n.key],ie([n.key]),{node:n.rawNode,action:"select"})}}function rt(n){if(ae&&(window.clearTimeout(ae),ae=null),n.isLeaf)return;ve=n.key;const l=()=>{if(ve!==n.key)return;const{value:i}=He;if(i&&i.key===n.key&&!ne.value.includes(n.key)){const u=ne.value.concat(n.key);Ne(u,ie(u),{node:n.rawNode,action:"expand"})}ae=null,ve=null};n.shallowLoaded?ae=window.setTimeout(()=>{l()},1e3):ae=window.setTimeout(()=>{vn(n).then(()=>{l()})},1e3)}function dt({event:n,node:l}){!e.draggable||e.disabled||ye(l,e.disabledField)||(pn({event:n,node:l},!1),Zn({event:n,node:l.rawNode}))}function st({event:n,node:l}){!e.draggable||e.disabled||ye(l,e.disabledField)||et({event:n,node:l.rawNode})}function ct(n){n.target===n.currentTarget&&xe()}function ut({event:n,node:l}){$e(),!(!e.draggable||e.disabled||ye(l,e.disabledField))&&nt({event:n,node:l.rawNode})}function ft({event:n,node:l}){!e.draggable||e.disabled||ye(l,e.disabledField)||(M=n.clientX,G.value=l,tt({event:n,node:l.rawNode}))}function pn({event:n,node:l},i=!0){var u;if(!e.draggable||e.disabled||ye(l,e.disabledField))return;const{value:h}=G;if(!h)return;const{allowDrop:j,indent:te}=e;i&&lt({event:n,node:l.rawNode});const re=n.currentTarget,{height:Se,top:De}=re.getBoundingClientRect(),se=n.clientY-De;let I;j({node:l.rawNode,dropPosition:"inside",phase:"drag"})?se<=8?I="before":se>=Se-8?I="after":I="inside":se<=Se/2?I="before":I="after";const{value:fe}=Yn;let B,X;const Ke=fe(l.key);if(Ke===null){xe();return}let We=!1;I==="inside"?(B=l,X="inside"):I==="before"?l.isFirstChild?(B=l,X="before"):(B=de.value[Ke-1],X="after"):(B=l,X="after"),!B.isLeaf&&ne.value.includes(B.key)&&(We=!0,X==="after"&&(B=de.value[Ke+1],B?X="before":(B=l,X="inside")));const kn=B;if(He.value=kn,!We&&h.isLastChild&&h.key===B.key&&(X="after"),X==="after"){let xn=M-n.clientX,sn=0;for(;xn>=te/2&&B.parent!==null&&B.isLastChild&&sn<1;)xn-=te,sn+=1,B=B.parent;qe.value=sn}else qe.value=0;if((h.contains(B)||X==="inside"&&((u=h.parent)===null||u===void 0?void 0:u.key)===B.key)&&!(h.key===kn.key&&h.key===B.key)){xe();return}if(!j({node:B.rawNode,dropPosition:X,phase:"drag"})){xe();return}if(h.key===B.key)Ce();else if(ve!==B.key)if(X==="inside"){if(e.expandOnDragenter){if(rt(B),!B.shallowLoaded&&ve!==B.key){$e();return}}else if(!B.shallowLoaded){$e();return}}else Ce();else X!=="inside"&&Ce();Ve.value=X,Q.value=B}function ht({event:n,node:l,dropPosition:i}){if(!e.draggable||e.disabled||ye(l,e.disabledField))return;const{value:u}=G,{value:h}=Q,{value:j}=Ve;if(!(!u||!h||!j)&&e.allowDrop({node:h.rawNode,dropPosition:j,phase:"drag"})&&u.key!==h.key){if(j==="before"){const te=u.getNext({includeDisabled:!0});if(te&&te.key===h.key){xe();return}}if(j==="after"){const te=u.getPrev({includeDisabled:!0});if(te&&te.key===h.key){xe();return}}ot({event:n,node:h.rawNode,dragNode:u.rawNode,dropPosition:i}),$e()}}function gt(){Ge()}function vt(){Ge()}function mt(n){var l;if(e.virtualScroll||e.internalScrollable){const{value:i}=f;if(!((l=i==null?void 0:i.containerRef)===null||l===void 0)&&l.contains(n.relatedTarget))return;oe.value=null}else{const{value:i}=w;if(i!=null&&i.contains(n.relatedTarget))return;oe.value=null}}Ae(oe,n=>{var l,i;if(n!==null){if(e.virtualScroll)(l=m.value)===null||l===void 0||l.scrollTo({key:n});else if(e.internalScrollable){const{value:u}=f;if(u===null)return;const h=(i=u.contentRef)===null||i===void 0?void 0:i.querySelector(`[data-key="${jn(n)}"]`);if(!h)return;u.scrollTo({el:h})}}}),qt(je,{loadingKeysRef:c,highlightKeySetRef:nn,displayedCheckedKeysRef:J,displayedIndeterminateKeysRef:A,mergedSelectedKeysRef:O,mergedExpandedKeysRef:ne,mergedThemeRef:r,mergedCheckStrategyRef:Y,nodePropsRef:$(e,"nodeProps"),disabledRef:$(e,"disabled"),checkableRef:$(e,"checkable"),selectableRef:$(e,"selectable"),expandOnClickRef:$(e,"expandOnClick"),onLoadRef:$(e,"onLoad"),draggableRef:$(e,"draggable"),blockLineRef:$(e,"blockLine"),indentRef:$(e,"indent"),cascadeRef:$(e,"cascade"),checkOnClickRef:$(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:He,droppingNodeParentRef:Wn,draggingNodeRef:G,droppingPositionRef:Ve,droppingOffsetLevelRef:qe,fNodesRef:de,pendingNodeKeyRef:oe,showLineRef:$(e,"showLine"),disabledFieldRef:$(e,"disabledField"),internalScrollableRef:$(e,"internalScrollable"),internalCheckboxFocusableRef:$(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:$(e,"renderLabel"),renderPrefixRef:$(e,"renderPrefix"),renderSuffixRef:$(e,"renderSuffix"),renderSwitcherIconRef:$(e,"renderSwitcherIcon"),labelFieldRef:$(e,"labelField"),multipleRef:$(e,"multiple"),overrideDefaultNodeClickBehaviorRef:$(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:bn,handleDragEnd:ut,handleDragEnter:dt,handleDragLeave:st,handleDragStart:ft,handleDrop:ht,handleDragOver:pn,handleSelect:dn,handleCheck:rn});function bt(n,l){var i,u;typeof n=="number"?(i=m.value)===null||i===void 0||i.scrollTo(n,l||0):(u=m.value)===null||u===void 0||u.scrollTo(n)}const pt={handleKeydown:we,scrollTo:bt,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=F.value;return{keys:n,options:ie(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=F.value;return{keys:n,options:ie(n)}}},yn=V(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:l,nodeBorderRadius:i,nodeColorHover:u,nodeColorPressed:h,nodeColorActive:j,arrowColor:te,loadingColor:re,nodeTextColor:Se,nodeTextColorDisabled:De,dropMarkColor:se,nodeWrapperPadding:I,nodeHeight:ce,lineHeight:fe,lineColor:B}}=r.value,X=un(I,"top"),Ke=un(I,"bottom"),We=Fn(Me(ce)-Me(X)-Me(Ke));return{"--n-arrow-color":te,"--n-loading-color":re,"--n-bezier":n,"--n-font-size":l,"--n-node-border-radius":i,"--n-node-color-active":j,"--n-node-color-hover":u,"--n-node-color-pressed":h,"--n-node-text-color":Se,"--n-node-text-color-disabled":De,"--n-drop-mark-color":se,"--n-node-wrapper-padding":I,"--n-line-offset-top":`-${X}`,"--n-line-offset-bottom":`-${Ke}`,"--n-node-content-height":We,"--n-line-height":fe,"--n-line-color":B}}),Re=a?Gt("tree",void 0,yn,e):void 0;return Object.assign(Object.assign({},pt),{mergedClsPrefix:t,mergedTheme:r,rtlEnabled:d,fNodes:Xn,aip:_e,selfElRef:w,virtualListInstRef:m,scrollbarInstRef:f,handleFocusout:mt,handleDragLeaveTree:ct,handleScroll:gt,getScrollContainer:k,getScrollContent:y,handleAfterEnter:Jn,handleResize:vt,cssVars:a?void 0:yn,themeClass:Re==null?void 0:Re.themeClass,onRender:Re==null?void 0:Re.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:a}=this;if(!t.length&&a)return a();const{mergedClsPrefix:s,blockNode:d,blockLine:r,draggable:w,disabled:f,internalFocusable:m,checkable:k,handleKeydown:y,rtlEnabled:D,handleFocusout:b,scrollbarProps:K}=this,N=m&&!f,C=N?"0":void 0,g=[`${s}-tree`,D&&`${s}-tree--rtl`,k&&`${s}-tree--checkable`,(r||d)&&`${s}-tree--block-node`,r&&`${s}-tree--block-line`],o=T=>"__motion"in T?S(xl,{height:T.height,nodes:T.nodes,clsPrefix:s,mode:T.mode,onAfterEnter:this.handleAfterEnter}):S(qn,{key:T.key,tmNode:T,clsPrefix:s});if(this.virtualScroll){const{mergedTheme:T,internalScrollablePadding:F}=this,Y=un(F||"0");return S(Sn,Object.assign({},K,{ref:"scrollbarInstRef",onDragleave:w?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:g,theme:T.peers.Scrollbar,themeOverrides:T.peerOverrides.Scrollbar,tabindex:C,onKeydown:N?y:void 0,onFocusout:N?b:void 0}),{default:()=>{var J;return(J=this.onRender)===null||J===void 0||J.call(this),t.length?S(Wt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Me(T.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:Y.top,paddingBottom:Y.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:Y.left,paddingRight:Y.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:A})=>o(A)}):Rn(this.$slots.empty,()=>[S(Dn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:x}=this;return g.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),x?S(Sn,Object.assign({},K,{class:g,tabindex:C,onKeydown:N?y:void 0,onFocusout:N?b:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>S("div",{onDragleave:w?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(o))}):S("div",{class:g,tabindex:C,ref:"selfElRef",style:this.cssVars,onKeydown:N?y:void 0,onFocusout:N?b:void 0,onDragleave:w?this.handleDragLeaveTree:void 0},t.length?t.map(o):Rn(this.$slots.empty,()=>[S(Dn,{class:`${s}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Rl={class:"flex-y-center gap-16px pb-12px"},Sl=ue({name:"MenuAuthModal",__name:"menu-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,a=Qe(e,"visible");function s(){a.value=!1}const d=V(()=>_("common.edit")+_("page.manage.role.menuAuth")),r=Ee("");async function w(){console.log(t.roleId),r.value="home"}async function f(o){r.value=o}const m=Ee([]);async function k(){const{error:o,data:x}=await yt();o||(m.value=x)}const y=V(()=>m.value.map(x=>({label:x,value:x}))),D=Ee([]);async function b(){const{error:o,data:x}=await kt();o||(D.value=x)}const K=Ee([]);async function N(){console.log(t.roleId),K.value=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}function C(){var o,x;console.log(K.value,t.roleId),(x=(o=window.$message)==null?void 0:o.success)==null||x.call(o,_("common.modifySuccess")),s()}function g(){w(),k(),b(),N()}return Ae(a,o=>{o&&g()}),(o,x)=>{const T=On,F=Gn,Y=Be,J=Ze,A=gn;return ke(),Fe(A,{show:a.value,"onUpdate:show":x[1]||(x[1]=L=>a.value=L),title:d.value,preset:"card",class:"w-480px"},{footer:R(()=>[p(J,{justify:"end"},{default:R(()=>[p(Y,{size:"small",class:"mt-16px",onClick:s},{default:R(()=>[me(ge(v(_)("common.cancel")),1)]),_:1}),p(Y,{type:"primary",size:"small",class:"mt-16px",onClick:C},{default:R(()=>[me(ge(v(_)("common.confirm")),1)]),_:1})]),_:1})]),default:R(()=>[Kn("div",Rl,[Kn("div",null,ge(v(_)("page.manage.menu.home")),1),p(T,{value:r.value,options:y.value,size:"small",class:"w-160px","onUpdate:value":f},null,8,["value","options"])]),p(F,{"checked-keys":K.value,"onUpdate:checkedKeys":x[0]||(x[0]=L=>K.value=L),data:D.value,"key-field":"id",checkable:"","expand-on-click":"","virtual-scroll":"","block-line":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Dl=ue({name:"ButtonAuthModal",__name:"button-auth-modal",props:ze({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(e){const t=e,a=Qe(e,"visible");function s(){a.value=!1}const d=V(()=>_("common.edit")+_("page.manage.role.buttonAuth")),r=Ee([]);async function w(){r.value=[{id:1,label:"button1",code:"code1"},{id:2,label:"button2",code:"code2"},{id:3,label:"button3",code:"code3"},{id:4,label:"button4",code:"code4"},{id:5,label:"button5",code:"code5"},{id:6,label:"button6",code:"code6"},{id:7,label:"button7",code:"code7"},{id:8,label:"button8",code:"code8"},{id:9,label:"button9",code:"code9"},{id:10,label:"button10",code:"code10"}]}const f=Ee([]);async function m(){console.log(t.roleId),f.value=[1,2,3,4,5]}function k(){var D,b;console.log(f.value,t.roleId),(b=(D=window.$message)==null?void 0:D.success)==null||b.call(D,_("common.modifySuccess")),s()}function y(){w(),m()}return y(),(D,b)=>{const K=Gn,N=Be,C=Ze,g=gn;return ke(),Fe(g,{show:a.value,"onUpdate:show":b[1]||(b[1]=o=>a.value=o),title:d.value,preset:"card",class:"w-480px"},{footer:R(()=>[p(C,{justify:"end"},{default:R(()=>[p(N,{size:"small",class:"mt-16px",onClick:s},{default:R(()=>[me(ge(v(_)("common.cancel")),1)]),_:1}),p(N,{type:"primary",size:"small",class:"mt-16px",onClick:k},{default:R(()=>[me(ge(v(_)("common.confirm")),1)]),_:1})]),_:1})]),default:R(()=>[p(K,{"checked-keys":f.value,"onUpdate:checkedKeys":b[0]||(b[0]=o=>f.value=o),data:r.value,"key-field":"id","block-line":"",checkable:"","expand-on-click":"","virtual-scroll":"",class:"h-280px"},null,8,["checked-keys","data"])]),_:1},8,["show","title"])}}}),Kl=ue({name:"RoleOperateDrawer",__name:"role-operate-modal",props:ze({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:ze(["submitted"],["update:visible"]),setup(e,{emit:t}){const a=e,s=t,d=Qe(e,"visible"),{formRef:r,validate:w,restoreValidation:f}=ol(),{defaultRequiredRule:m}=al(),{bool:k,setTrue:y}=Tn(),{bool:D,setTrue:b}=Tn(),{loading:K,startLoading:N,endLoading:C}=Yt(),g=V(()=>({add:_("page.manage.role.addRole"),edit:_("page.manage.role.editRole")})[a.operateType]),o=In(x());function x(){return{roleName:"",roleCode:"",roleDesc:"",status:null}}const T={roleName:m,roleCode:m,status:m},F=V(()=>{var E;return((E=a.rowData)==null?void 0:E.id)||-1}),Y=V(()=>a.operateType==="edit");function J(){Object.assign(o,x()),a.operateType==="edit"&&a.rowData&&Object.assign(o,a.rowData)}function A(){d.value=!1}async function L(){var E,O,ee;if(a.operateType==="add"){await w();const U={roleName:o.roleName,roleCode:o.roleCode,roleDesc:o.roleDesc,status:o.status};N();const{error:be}=await xt(U);be||((E=window.$message)==null||E.success(_("common.addSuccess")),s("submitted"),A()),C()}else if(a.operateType==="edit"){await w();const U={id:(O=a.rowData)==null?void 0:O.id,roleName:o.roleName,roleCode:o.roleCode,roleDesc:o.roleDesc,status:o.status};N();const{error:be}=await wt(U);be||((ee=window.$message)==null||ee.success(_("common.updateSuccess")),s("submitted"),A()),C()}}return Ae(d,()=>{d.value&&(J(),f())}),(E,O)=>{const ee=Un,U=il,be=Nt,ne=_t,de=zn,oe=Be,we=Ze,ae=Zt,ve=gn;return ke(),Fe(ve,{show:d.value,"onUpdate:show":O[6]||(O[6]=z=>d.value=z),title:g.value,preset:"card",class:"w-600px"},{footer:R(()=>[p(we,{size:16,justify:"end"},{default:R(()=>[p(oe,{onClick:A},{default:R(()=>[me(ge(v(_)("common.cancel")),1)]),_:1}),p(oe,{type:"primary",loading:v(K),onClick:L},{default:R(()=>[me(ge(v(_)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:R(()=>[p(ae,{class:"h-328px pr-20px"},{default:R(()=>[p(de,{ref_key:"formRef",ref:r,model:o,rules:T},{default:R(()=>[p(U,{label:v(_)("page.manage.role.roleName"),path:"roleName"},{default:R(()=>[p(ee,{value:o.roleName,"onUpdate:value":O[0]||(O[0]=z=>o.roleName=z),placeholder:v(_)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),p(U,{label:v(_)("page.manage.role.roleCode"),path:"roleCode"},{default:R(()=>[p(ee,{value:o.roleCode,"onUpdate:value":O[1]||(O[1]=z=>o.roleCode=z),placeholder:v(_)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),p(U,{label:v(_)("page.manage.role.roleStatus"),path:"status"},{default:R(()=>[p(ne,{value:o.status,"onUpdate:value":O[2]||(O[2]=z=>o.status=z)},{default:R(()=>[(ke(!0),$n(Jt,null,Xt(v(En),z=>(ke(),Fe(be,{key:z.value,value:z.value,label:v(_)(z.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),p(U,{label:v(_)("page.manage.role.roleDesc"),path:"roleDesc"},{default:R(()=>[p(ee,{value:o.roleDesc,"onUpdate:value":O[3]||(O[3]=z=>o.roleDesc=z),placeholder:v(_)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),Y.value?(ke(),Fe(we,{key:0},{default:R(()=>[p(oe,{onClick:v(y)},{default:R(()=>[me(ge(v(_)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),p(Sl,{visible:v(k),"onUpdate:visible":O[4]||(O[4]=z=>Pe(k)?k.value=z:null),"role-id":F.value},null,8,["visible","role-id"]),p(oe,{onClick:v(b)},{default:R(()=>[me(ge(v(_)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),p(Dl,{visible:v(D),"onUpdate:visible":O[5]||(O[5]=z=>Pe(D)?D.value=z:null),"role-id":F.value},null,8,["visible","role-id"])]),_:1})):Qt("",!0)]),_:1})]),_:1},8,["show","title"])}}}),Tl=ue({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:ze(["reset","search"],["update:model"]),setup(e,{emit:t}){const a=t,s=Qe(e,"model");function d(){a("reset")}function r(){a("search")}return(w,f)=>{const m=Un,k=Ct,y=On,D=rl,b=Be,K=dl,N=Ze,C=ul,g=zn,o=sl,x=cl,T=Mn;return ke(),Fe(T,{bordered:!1,size:"small",class:"card-wrapper"},{default:R(()=>[p(x,{"default-expanded-names":["role-search"]},{default:R(()=>[p(o,{title:v(_)("common.search"),name:"role-search"},{default:R(()=>[p(g,{model:s.value,"label-placement":"left","label-width":80},{default:R(()=>[p(C,{responsive:"screen","item-responsive":""},{default:R(()=>[p(k,{span:"24 s:12 m:6",label:v(_)("page.manage.role.roleName"),path:"roleName",class:"pr-24px"},{default:R(()=>[p(m,{value:s.value.roleName,"onUpdate:value":f[0]||(f[0]=F=>s.value.roleName=F),placeholder:v(_)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),p(k,{span:"24 s:12 m:6",label:v(_)("page.manage.role.roleCode"),path:"roleCode",class:"pr-24px"},{default:R(()=>[p(m,{value:s.value.roleCode,"onUpdate:value":f[1]||(f[1]=F=>s.value.roleCode=F),placeholder:v(_)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),p(k,{span:"24 s:12 m:6",label:v(_)("page.manage.role.roleStatus"),path:"status",class:"pr-24px"},{default:R(()=>[p(y,{value:s.value.status,"onUpdate:value":f[2]||(f[2]=F=>s.value.status=F),placeholder:v(_)("page.manage.role.form.roleStatus"),options:v(el)(v(En)),clearable:""},null,8,["value","placeholder","options"])]),_:1},8,["label"]),p(k,{span:"24 s:12 m:6"},{default:R(()=>[p(N,{class:"w-full",justify:"end"},{default:R(()=>[p(b,{onClick:d},{icon:R(()=>[p(D,{class:"text-icon"})]),default:R(()=>[me(" "+ge(v(_)("common.reset")),1)]),_:1}),p(b,{type:"primary",ghost:"",onClick:r},{icon:R(()=>[p(K,{class:"text-icon"})]),default:R(()=>[me(" "+ge(v(_)("common.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1})]),_:1})}}}),Ll={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function hn(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ll(e)}const Il=ue({name:"manage_role",__name:"index",setup(e){const t=nl(),a=In({}),{columns:s,columnChecks:d,data:r,loading:w,getData:f,getDataByPage:m,mobilePagination:k,searchParams:y,resetSearchParams:D}=Rt({apiFn:Dt,apiParams:{current:1,size:10,status:null,roleName:null,roleCode:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"index",title:_("common.index"),width:64,align:"center"},{key:"roleName",title:_("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",title:_("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",title:_("page.manage.role.roleDesc"),minWidth:120},{key:"status",title:_("page.manage.role.roleStatus"),align:"center",width:100,render:A=>{if(A.status===null)return null;const L={1:"success",2:"warning"},E=_(Kt[A.status]);return p(tl,{type:L[A.status]},hn(E)?E:{default:()=>[E]})}},{key:"operate",title:_("common.operate"),align:"center",width:130,render:A=>{let L;return p("div",{class:"flex-center gap-8px"},[p(Be,{type:"primary",ghost:!0,size:"small",onClick:()=>J(A.id)},hn(L=_("common.edit"))?L:{default:()=>[L]}),p(Tt,{onPositiveClick:()=>Y(A.id)},{default:()=>_("common.confirmDelete"),trigger:()=>{let E;return p(Be,{loading:a[A.id],type:"error",ghost:!0,size:"small"},hn(E=_("common.delete"))?E:{default:()=>[E]})}})])}}]}),{drawerVisible:b,operateType:K,editingData:N,handleAdd:C,handleEdit:g,checkedRowKeys:o,onBatchDeleted:x,onDeleted:T}=St(r,f);async function F(){const A=o.value.map(E=>Number.parseInt(E,10));A.forEach(E=>{a[E]=!0});const{error:L}=await wn(A);L||(A.forEach(E=>{a[E]=!1}),x())}async function Y(A){const L=[A];a[A]=!0;const{error:E}=await wn(L);E||(a[A]=!1,T())}function J(A){g(A)}return(A,L)=>{const E=Lt,O=At,ee=Mn;return ke(),$n("div",Ll,[p(Tl,{model:v(y),"onUpdate:model":L[0]||(L[0]=U=>Pe(y)?y.value=U:null),onReset:v(D),onSearch:v(m)},null,8,["model","onReset","onSearch"]),p(ee,{title:v(_)("page.manage.role.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":R(()=>[p(E,{columns:v(d),"onUpdate:columns":L[1]||(L[1]=U=>Pe(d)?d.value=U:null),"disabled-delete":v(o).length===0,loading:v(w),onAdd:v(C),onDelete:F,onRefresh:v(f)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:R(()=>[p(O,{"checked-row-keys":v(o),"onUpdate:checkedRowKeys":L[2]||(L[2]=U=>Pe(o)?o.value=U:null),columns:v(s),data:v(r),size:"small","flex-height":!v(t).isMobile,"scroll-x":702,loading:v(w),remote:"","row-key":U=>U.id,pagination:v(k),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),p(Kl,{visible:v(b),"onUpdate:visible":L[3]||(L[3]=U=>Pe(b)?b.value=U:null),"operate-type":v(K),"row-data":v(N),onSubmitted:v(m)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Il as default};
